<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Literal Proof Test</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #000; color: #e0e0e0; text-align: center; padding: 20px; }
        .card { background: #1a1a1a; padding: 40px; border-radius: 20px; border: 4px solid gold; max-width: 600px; margin: 100px auto; }
        .btn { width: 100%; padding: 25px; margin: 15px 0; border: none; border-radius: 15px; color: white; font-weight: 900; font-size: 24px; cursor: pointer; background: #1976d2; }
        #status { margin-top: 20px; color: gold; font-weight: bold; font-size: 20px; }
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; overflow-y: auto; padding: 40px; box-sizing: border-box; }
        #story-text { font-size: 26px; line-height: 1.8; text-align: justify; }
    </style>
</head>
<body>

<div class="card">
    <h1 style="font-size: 36px;">MEZAMORTA</h1>
    <div id="status">Ready to test...</div>
    <button class="btn" onclick="runLiteralTest()">3. ðŸ“– READ & LISTEN (US MALE)</button>
    <audio id="player"></audio>
</div>

<div id="modal">
    <button onclick="closeModal()" style="background: #333; color: white; padding: 20px; font-size: 24px; border-radius: 50%; border: none; cursor: pointer; float: right;">âœ•</button>
    <h1 style="color: #1976d2; font-size: 44px; margin-bottom: 40px;">Mezamorta HÃ¼seyin Pasha</h1>
    <div id="story-text">Mezamorta HÃ¼seyin Pasha was a famous Ottoman admiral born in the 17th century. Some people say he was originally from Spain and later became a Muslim. He started his career as a sailor and a pirate in the Mediterranean Sea. His interesting nickname, 'Mezamorta,' means 'half-dead' in Italian. In a big battle against the Venetians, he was hurt very badly. His enemies thought he was dead, but he survived. Because of this amazing event, he got his famous name. By 1674, he was a captain and attacked many enemy ships. In 1683, the French navy attacked Algiers. The leader of Algiers wanted to give up, but Mezamorta refused. He became the new ruler and defended the city. To show his strength, he put the French consul into a large cannon and fired him at the enemy ships. This stopped the French attack. Later, he attacked the French coast until they agreed to peace. Later, Mezamorta went to Istanbul to join the Ottoman navy. In 1695, he won back Chios Island from the Venetians. Because of this victory, the Sultan made him the Grand Admiral, or 'Kapudan Pasha.' He changed how the navy fought. He stopped using old rowing ships and started using big sailing ships called 'kalyons.' Mezamorta died from an illness in 1701 while getting ready for a new war.</div>
</div>

<script>
    const status = document.getElementById('status');
    const player = document.getElementById('player');
    const targetFile = "mezamorta male us.wav"; // EXACT filename from your screenshot

    async function runLiteralTest() {
        status.innerText = "Querying GitHub API...";
        try {
            const response = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            const files = await response.json();
            
            // Flexible resemblance check: ignores case and spaces to find your literal file
            const match = files.find(f => 
                f.name.toLowerCase().replace(/\s+/g, '') === targetFile.toLowerCase().replace(/\s+/g, '')
            );
            
            if (match && match.download_url) {
                status.innerText = "File identified! Playing literal GitHub download URL...";
                player.src = match.download_url; // Use the direct, temporary link GitHub generates
                player.play();
                document.getElementById('modal').style.display = 'block';
            } else {
                status.innerText = "Error: '" + targetFile + "' not found in GitHub's own list.";
            }
        } catch (e) {
            status.innerText = "Connection Error: Check your repository name/visibility.";
        }
    }

    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
</script>
</body>
</html>
