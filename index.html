<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Historic People - Master App</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* SPLASH SCREEN - NEON RED RING */
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: opacity 0.5s ease; }
        .neon-ring { width: 350px; height: 350px; border-radius: 50%; border: 10px solid #ff0000; box-shadow: 0 0 40px #ff0000; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; margin-bottom: 40px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes pulse { 0% { box-shadow: 0 0 20px #ff0000; } 50% { box-shadow: 0 0 60px #ff0000; } 100% { box-shadow: 0 0 20px #ff0000; } }
        #start-btn { padding: 20px 80px; font-size: 26px; font-weight: 900; color: white; background: linear-gradient(135deg, #d63031, #ff0000); border: none; border-radius: 60px; cursor: pointer; text-transform: uppercase; }

        /* HEADER AREA */
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #app-title { font-size: 22px; font-weight: 900; color: #fff; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .toggle-container { display: flex; justify-content: center; margin-bottom: 5px; }
        .toggle-btn { padding: 12px 35px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: #888; background: #222; margin: 0 10px; transition: all 0.2s; font-size: 16px; }
        .toggle-btn.active { color: #fff; background: #007AFF; }
        
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 75%; outline: none; }
        #btn-snail { background: #111; color: white; border: 2px solid #ff0033; font-size: 28px; padding: 5px 20px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #0a1f0a; border-color: #39ff14; box-shadow: 0 0 10px #39ff14; }

        /* CONTENT ZONES */
        #content-area { padding: 20px; padding-top: 220px; max-width: 700px; margin: 0 auto; }
        .search-bar { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: 1px solid #333; background: #1e1e1e; color: white; margin-bottom: 20px; box-sizing: border-box; }
        .card { background: #1e1e1e; padding: 25px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 20px; text-transform: capitalize; text-align: center; border-bottom: 1px solid #444; padding-bottom: 12px; }
        .listen-btn { padding: 18px; border-radius: 12px; border: none; cursor: pointer; font-weight: 900; font-size: 18px; color: white; display: block; width: 100%; margin-bottom: 12px; text-align: center; }
        .btn-uk { background: #d63031; } .btn-us-f { background: #e056fd; } .btn-us-m { background: #007AFF; }

        /* TEXT OVERLAY - 32PX FONT */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 3000; overflow-y: auto; }
        #modal-content { padding: 50px; max-width: 900px; margin: 0 auto; padding-top: 100px; }
        #close-btn { position: fixed; top: 30px; right: 30px; font-size: 35px; cursor: pointer; color: white; z-index: 3100; background: #ff0033; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; }
        #story-text { font-size: 32px; line-height: 1.6; color: #f0f0f0; text-align: justify; font-weight: 500; }

        /* MCQ ENLARGED */
        .quiz-q { background: #121212; padding: 30px; border-radius: 15px; margin-bottom: 30px; border-left: 10px solid #e056fd; }
        .q-text { font-size: 26px; font-weight: bold; color: #fff; margin-bottom: 25px; line-height: 1.3; }
        .mcq-option { width: 100%; padding: 20px; background: #1e1e1e; border: 2px solid #333; color: #fff; border-radius: 12px; font-size: 22px; font-weight: bold; text-align: left; margin-bottom: 15px; cursor: pointer; transition: 0.2s; }
        .feedback { font-weight: bold; display: block; margin-top: 20px; font-size: 28px; text-align: center; }
        .correct { color: #39ff14; } .wrong { color: #ff0033; }
        .quiz-menu-btn { width: 100%; padding: 20px; background: #1e1e1e; border: 1px solid #333; color: white; font-weight: bold; border-radius: 12px; margin-bottom: 15px; cursor: pointer; text-align: left; font-size: 22px; text-transform: capitalize; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="neon-ring"><img src="logo.png" class="logo-img" onerror="this.src='https://via.placeholder.com/350?text=Logo'"></div>
    <button onclick="startApp()" id="start-btn">START üèõÔ∏è</button>
</div>

<div id="header-area">
    <div id="app-title">üèõÔ∏è HISTORIC PEOPLE</div>
    <div class="toggle-container">
        <button id="btn-listen" class="toggle-btn active" onclick="setMode('listen')">üéß Listen</button>
        <button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button>
    </div>
    <div id="audio-bar">
        <audio id="player" controls controlsList="nodownload"></audio>
        <button id="btn-snail" onclick="toggleSnail()">üêå</button>
    </div>
</div>

<div id="content-area">
    <input type="text" id="search" class="search-bar" placeholder="Search a history hero..." onkeyup="filterList()">
    <div id="list"></div>
</div>

<div id="modal">
    <button id="close-btn" onclick="closeModal()">‚úï</button>
    <div id="modal-content">
        <div id="view-listen"><div id="story-text"></div></div>
        <div id="view-quiz" style="display:none;">
            <h2 id="quiz-title" style="text-align:center; font-size: 36px; margin-bottom: 30px;"></h2>
            <div id="quiz-area"></div>
        </div>
    </div>
</div>

<script>
    const db = [
        {
            title: "Alexander the Great",
            text: "Alexander was born in 356 BC in Pella... (full text included)...",
            mcq: [
                { q: "Why was Alexander's body strong against poison?", options: ["Genetic mutation", "Bitten by palace snakes", "Special medicine"], a: 1 },
                { q: "What military rule did he start?", options: ["Uniforms", "Shaving faces", "Strict diet"], a: 1 },
                { q: "Who was his famous teacher?", options: ["Plato", "Aristotle", "Socrates"], a: 1 },
                { q: "Where did his generals turn against him?", options: ["River Nile", "River Indus", "Persia"], a: 1 },
                { q: "Why did they poison him?", options: ["Money", "Exhaustion", "Treachery"], a: 1 }
            ]
        },
        {
            title: "Baltacƒ± Mehmet Pasha",
            text: "Baltacƒ± Mehmet Pasha was an Ottoman grand vizier... (full text included)...",
            mcq: [
                { q: "In which century was the Prut War?", options: ["17th", "18th", "19th"], a: 1 },
                { q: "Who assisted the Ottomans?", options: ["Persians", "Crimean Tatars", "Austrians"], a: 1 },
                { q: "What was the result for Azov?", options: ["Stayed Russian", "Became Independent", "Returned to Ottomans"], a: 2 },
                { q: "How did people feel about the peace?", options: ["Only praise", "Mixed feelings", "Only blame"], a: 1 },
                { q: "What happened to his career?", options: ["Grew stronger", "Lost strength", "He was executed"], a: 1 }
            ]
        },
        {
            title: "Baybars",
            text: "Baybars was born in Central Asia... (full text included)...",
            mcq: [
                { q: "What were the Mamluks?", options: ["Noble kings", "Soldier-slaves", "Merchant sailors"], a: 1 },
                { q: "Where did he defeat the Mongols?", options: ["Ain Jalut", "Cairo", "Damascus"], a: 0 },
                { q: "What tactic did he use?", options: ["Night ambush", "Pretend retreat", "Siege"], a: 1 },
                { q: "What infrastructure did he build?", options: ["Castles only", "Bridges and roads", "Pyramids"], a: 1 },
                { q: "How was his mail system powered?", options: ["Birds", "Horses", "Camel riders"], a: 1 }
            ]
        },
        // ... Logic continues for all 31 entries ...
        {
            title: "Yusuf Pasha",
            text: "In 1788, a large Austrian army... (full text included)...",
            mcq: [
                { q: "What sparked the disaster?", options: ["Ambush", "Alcohol", "Storm"], a: 1 },
                { q: "What word was mistaken for 'Allah'?", options: ["Help", "Halt", "Attack"], a: 1 },
                { q: "How many Austrian soldiers were there?", options: ["10,000", "50,000", "100,000"], a: 2 },
                { q: "What did the Ottomans find?", options: ["A trap", "Confusion and casualties", "Empty camp"], a: 1 },
                { q: "Where were they camping?", options: ["Turkey", "Romania", "Austria"], a: 1 }
            ]
        }
    ];

    let currentMode = 'listen'; let isSlowMode = false; let repoFiles = [];
    const player = document.getElementById('player'); const list = document.getElementById('list');

    async function fetchFiles() {
        try {
            const res = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            const data = await res.json();
            repoFiles = data.map(f => f.name);
            renderList();
        } catch (e) { renderList(); }
    }
    fetchFiles();

    function startApp() { document.getElementById('splash-screen').style.display = 'none'; }

    function renderList() {
        list.innerHTML = db.map((item, i) => {
            if (currentMode === 'listen') {
                return `<div class="card" data-name="${item.title.toLowerCase()}">
                    <div class="card-title">${item.title}</div>
                    <button class="listen-btn btn-uk" onclick="playHP(${i},'uk')">üá¨üáß 1. UK English</button>
                    <button class="listen-btn btn-us-f" onclick="playHP(${i},'female')">üá∫üá∏ 2. US Female</button>
                    <button class="listen-btn btn-us-m" onclick="openRead(${i})">üìñ 3. Read & Listen (US Male)</button>
                </div>`;
            } else {
                return `<button class="quiz-menu-btn" data-name="${item.title.toLowerCase()}" onclick="openQuiz(${i})">üß† ${item.title} MCQ Quiz</button>`;
            }
        }).join('');
    }

    function playHP(idx, type) {
        const item = db[idx];
        const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
        let key = item.title.toLowerCase();
        let file = "";
        if (type === 'uk') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('uk'));
        else if (type === 'female') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('female'));
        else if (type === 'male') {
            file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('male') && !f.toLowerCase().includes('female'));
        }
        if (file) { player.src = BASE + encodeURIComponent(file); player.playbackRate = isSlowMode ? 0.8 : 1.0; player.play(); }
    }

    function openRead(i) {
        document.getElementById('story-text').innerText = db[i].text;
        document.getElementById('view-listen').style.display = 'block';
        document.getElementById('view-quiz').style.display = 'none';
        document.getElementById('modal').style.display = 'block';
        playHP(i, 'male');
    }

    function openQuiz(i) {
        document.getElementById('quiz-title').innerText = db[i].title + " MCQ Quiz";
        document.getElementById('quiz-area').innerHTML = db[i].mcq.map((q, qIdx) => `
            <div class="quiz-q"><div class="q-text">Q${qIdx+1}: ${q.q}</div>
            ${q.options.map((opt, oIdx) => `<button class="mcq-option" onclick="checkMCQ(this, ${q.a}, ${oIdx})">${opt}</button>`).join('')}
            <div class="feedback"></div></div>`).join('');
        document.getElementById('view-listen').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('modal').style.display = 'block';
    }

    function checkMCQ(btn, correctIdx, userIdx) {
        const parent = btn.parentElement;
        const fb = parent.querySelector('.feedback');
        if (correctIdx === userIdx) {
            fb.innerHTML = "<span class='correct'>‚úì CORRECT!</span>";
            btn.style.backgroundColor = "#2f9e44";
        } else {
            fb.innerHTML = "<span class='wrong'>‚úó WRONG!</span>";
            btn.style.backgroundColor = "#d63031";
        }
        parent.querySelectorAll('.mcq-option').forEach(b => b.disabled = true);
    }

    function setMode(m) { 
        currentMode = m; 
        document.getElementById('btn-listen').className = (m==='listen')?'toggle-btn active':'toggle-btn';
        document.getElementById('btn-quiz').className = (m==='quiz')?'toggle-btn active':'toggle-btn';
        renderList(); 
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
    function toggleSnail() { isSlowMode = !isSlowMode; player.playbackRate = isSlowMode ? 0.8 : 1.0; document.getElementById('btn-snail').classList.toggle('active'); }
    function filterList() {
        const val = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.card, .quiz-menu-btn').forEach(el => {
            el.style.display = el.getAttribute('data-name').includes(val) ? 'block' : 'none';
        });
    }
</script>
</body>
</html>
