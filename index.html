<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Historic People - Master Edition</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* SPLASH SCREEN - NEON RED RING */
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: opacity 0.5s ease; }
        .neon-ring { width: 350px; height: 350px; border-radius: 50%; border: 10px solid #ff0000; box-shadow: 0 0 40px #ff0000; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; margin-bottom: 40px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes pulse { 0% { box-shadow: 0 0 20px #ff0000; } 50% { box-shadow: 0 0 60px #ff0000; } 100% { box-shadow: 0 0 20px #ff0000; } }
        #start-btn { padding: 20px 80px; font-size: 26px; font-weight: 900; color: white; background: linear-gradient(135deg, #d63031, #ff0000); border: none; border-radius: 60px; cursor: pointer; text-transform: uppercase; }

        /* HEADER AREA */
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #app-title { font-size: 22px; font-weight: 900; color: #fff; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .toggle-container { display: flex; justify-content: center; margin-bottom: 5px; }
        .toggle-btn { padding: 12px 35px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: #888; background: #222; margin: 0 10px; transition: all 0.2s; font-size: 16px; }
        .toggle-btn.active { color: #fff; background: #007AFF; }
        
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 75%; outline: none; }
        #btn-snail { background: #111; color: white; border: 2px solid #ff0033; font-size: 28px; padding: 5px 20px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #0a1f0a; border-color: #39ff14; box-shadow: 0 0 10px #39ff14; }

        /* CONTENT ZONES */
        #content-area { padding: 20px; padding-top: 220px; max-width: 700px; margin: 0 auto; }
        .search-bar { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: 1px solid #333; background: #1e1e1e; color: white; margin-bottom: 20px; box-sizing: border-box; }
        .card { background: #1e1e1e; padding: 25px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 20px; text-transform: capitalize; text-align: center; border-bottom: 1px solid #444; padding-bottom: 12px; }
        .listen-btn { padding: 18px; border-radius: 12px; border: none; cursor: pointer; font-weight: 900; font-size: 18px; color: white; display: block; width: 100%; margin-bottom: 12px; text-align: center; }
        .btn-uk { background: #d63031; } .btn-us-f { background: #e056fd; } .btn-us-m { background: #007AFF; }

        /* TEXT OVERLAY - 32PX FONT */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 3000; overflow-y: auto; }
        #modal-content { padding: 50px; max-width: 900px; margin: 0 auto; padding-top: 100px; }
        #close-btn { position: fixed; top: 30px; right: 30px; font-size: 35px; cursor: pointer; color: white; z-index: 3100; background: #ff0033; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; }
        #story-text { font-size: 32px; line-height: 1.6; color: #f0f0f0; text-align: justify; font-weight: 500; }

        /* MCQ ENLARGED */
        .quiz-q { background: #121212; padding: 30px; border-radius: 15px; margin-bottom: 30px; border-left: 10px solid #e056fd; }
        .q-text { font-size: 26px; font-weight: bold; color: #fff; margin-bottom: 25px; line-height: 1.3; }
        .mcq-option { width: 100%; padding: 20px; background: #1e1e1e; border: 2px solid #333; color: #fff; border-radius: 12px; font-size: 22px; font-weight: bold; text-align: left; margin-bottom: 15px; cursor: pointer; transition: 0.2s; }
        .feedback { font-weight: bold; display: block; margin-top: 20px; font-size: 28px; text-align: center; }
        .correct { color: #39ff14; } .wrong { color: #ff0033; }
        .quiz-menu-btn { width: 100%; padding: 20px; background: #1e1e1e; border: 1px solid #333; color: white; font-weight: bold; border-radius: 12px; margin-bottom: 15px; cursor: pointer; text-align: left; font-size: 22px; text-transform: capitalize; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="neon-ring">
        <img src="logo.png" class="logo-img" onerror="this.src='https://raw.githubusercontent.com/dogierez01/historic-people/main/logo.png'">
    </div>
    <button onclick="startApp()" id="start-btn">START üèõÔ∏è</button>
</div>

<div id="header-area">
    <div id="app-title">üèõÔ∏è HISTORIC PEOPLE</div>
    <div class="toggle-container">
        <button id="btn-listen" class="toggle-btn active" onclick="setMode('listen')">üéß Listen</button>
        <button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button>
    </div>
    <div id="audio-bar">
        <audio id="player" controls controlsList="nodownload"></audio>
        <button id="btn-snail" onclick="toggleSnail()">üêå</button>
    </div>
</div>

<div id="content-area">
    <input type="text" id="search" class="search-bar" placeholder="Search a history hero..." onkeyup="filterList()">
    <div id="list"></div>
</div>

<div id="modal">
    <button id="close-btn" onclick="closeModal()">‚úï</button>
    <div id="modal-content">
        <div id="view-listen"><div id="story-text"></div></div>
        <div id="view-quiz" style="display:none;">
            <h2 id="quiz-title" style="text-align:center; font-size: 36px; margin-bottom: 30px;"></h2>
            <div id="quiz-area"></div>
        </div>
    </div>
</div>

<script>
    const db = [
        {
            title: "Alexander the Great",
            text: "Alexander was born in 356 BC in Pella, the capital of Macedon. His mother, Olympia, was a strong and mysterious woman. She prayed to snakes and kept many of them in the palace. Alexander grew up with these snakes. Poisonous snakes bit him, so his body became strong against poison. His father, King Philip II, was a very strict ruler. One night, he punished Alexander very badly. This difficult event helped make Alexander a fearless and strong man. Even as a young man, Alexander was special. He did not have a beard. He ordered all his soldiers to shave their faces, too. This rule for soldiers is still used today. He was a student of the famous teacher Aristotle. He learned about war and how to lead an army. He became a commander when he was still a teenager. Alexander wanted to conquer the whole world. He took control of many huge lands like Persia and Egypt. He even traveled as far as India. His army grew bigger and stronger. However, great power brought danger. When he was at the River Indus, his own generals turned against him. They poisoned him because they were tired of fighting. They wanted to stop and return to their homes and families.",
            mcq: [
                { q: "What unique physical trait did Alexander enforce upon his army?", options: ["Wearing helmets at all times", "Being clean-shaven", "Having long hair"], a: 1 },
                { q: "Who was Alexander's world-famous teacher?", options: ["Socrates", "Plato", "Aristotle"], a: 2 },
                { q: "Where did Alexander's own generals turn against him?", options: ["The River Indus", "The Pyramids", "Athens"], a: 0 },
                { q: "Why did his body become strong against poison?", options: ["He was born with a mutation", "He grew up being bitten by palace snakes", "He took a secret medicine"], a: 1 },
                { q: "Why did the generals decide to poison Alexander?", options: ["They wanted his gold", "They were tired and wanted to go home", "They hated his mother"], a: 1 }
            ]
        },
        {
            title: "Baltacƒ± Mehmet Pasha",
            text: "Baltacƒ± Mehmet Pasha was an Ottoman grand vizier in the early 18th century. He is best known for his role in the Prut War between the Ottoman Empire and Russia in 1711. At that time, Russia was growing stronger under Tsar Peter the Great. The Ottomans, with the help of the Crimean Tatars, marched to stop them. Baltacƒ± Mehmet Pasha led the Ottoman army to the Prut River, where they surrounded the Russian forces. The Russians were trapped, hungry, and weak. It seemed that the Ottomans were ready for a great victory. Although the army had the chance to destroy the Russians, Baltacƒ± Mehmet Pasha accepted peace. With the Treaty of Prut, Russia gave back the city of Azov and promised to stay away from Ottoman lands. Peter the Great and his army were allowed to leave safely. Some people praised Baltacƒ± Mehmet Pasha for avoiding more bloodshed. Others blamed him for not using the chance to defeat Russia completely. After this, his career lost strength, but the Treaty of Prut remained an important event in Ottoman history.",
            mcq: [
                { q: "In what year did the Prut War take place?", options: ["1453", "1711", "1914"], a: 1 },
                { q: "Which city did Russia return according to the Treaty of Prut?", options: ["Moscow", "Istanbul", "Azov"], a: 2 },
                { q: "Who assisted the Ottomans during the Prut campaign?", options: ["The British", "The Crimean Tatars", "The French"], a: 1 },
                { q: "What was the condition of the Russian army at the Prut River?", options: ["Strong and ready", "Hungry and trapped", "Attacking from the sea"], a: 1 },
                { q: "How did history judge Baltacƒ± Mehmet Pasha's peace decision?", options: ["Everyone agreed he was right", "With mixed praise and blame", "He was given the title of Sultan"], a: 1 }
            ]
        },
        {
            title: "Baybars",
            text: "Baybars was born in Central Asia around 1223. When he was a young boy, enemies captured him and sold him as a slave. He traveled to Egypt to become a Mamluk. Baybars trained very hard with horses and weapons and quickly became an important commander. At this time, a dangerous army called the Mongols was attacking the Middle East. In 1260, they tried to enter Egypt. Baybars met them at a place called Ain Jalut. He used a clever plan to win. He led a small attack and then pretended to run away in fear. The Mongols chased him into a valley without looking carefully. Suddenly, the rest of the Mamluk army appeared from their hiding places. The trap worked perfectly, and they defeated the Mongol army. Soon after, Baybars became the Sultan of Egypt and Syria. He built bridges, canals, and roads to help people travel. He also made a fast mail system using horses.",
            mcq: [
                { q: "What were Mamluks in medieval Egypt?", options: ["Rich merchants", "Soldier-slaves", "Priests"], a: 1 },
                { q: "Where did Baybars defeat the Mongol army?", options: ["Ain Jalut", "Waterloo", "Constantinople"], a: 0 },
                { q: "What clever tactic did Baybars use at Ain Jalut?", options: ["A night ambush", "A pretended retreat", "A naval blockade"], a: 1 },
                { q: "Which infrastructure did Baybars improve as Sultan?", options: ["Pyramids only", "Bridges, canals, and roads", "Coliseums"], a: 1 },
                { q: "Which invading force did Baybars successfully stop?", options: ["The Romans", "The Vikings", "The Mongols"], a: 2 }
            ]
        },
        {
            title: "Boudica",
            text: "Boudica was a famous warrior queen in Britain during the first century. At that time, the Roman Empire ruled parts of Britain. Roman rulers treated the Celtic people harshly. After Boudica's husband, King Prasutagus, died, the Romans took his lands and property. They beat Boudica and attacked her daughters. These cruel actions made Boudica very angry. She decided to fight against Roman rule. Boudica gathered warriors from different Celtic tribes and destroyed cities like Londinium. The Roman governor Suetonius led a large army to stop her. At the final battle in 61 AD, the Roman army defeated Boudica's forces, although her army was much larger. The exact details of Boudica's death remain unknown. Some stories say she got ill and died, others say she committed suicide to avoid capture.",
            mcq: [
                { q: "Which empire did Boudica fight against?", options: ["The Vikings", "The Romans", "The Persians"], a: 1 },
                { q: "What caused Boudica to lead a rebellion?", options: ["Higher taxes", "Mistreatment of her family", "Religious differences"], a: 1 },
                { q: "Which major city did Boudica's forces destroy?", options: ["Londinium", "Rome", "Athens"], a: 0 },
                { q: "What happened at the final battle in 61 AD?", options: ["Boudica won", "The Roman army was destroyed", "The Romans defeated Boudica's larger army"], a: 2 },
                { q: "How did Boudica die according to stories?", options: ["Killed in battle", "Old age", "Suicide or illness"], a: 2 }
            ]
        },
        {
            title: "Cezzar Ahmed Pasha",
            text: "Cezzar Ahmed Pasha was the Ottoman governor of Acre. He became famous in 1799, when Napoleon Bonaparte attacked Acre. Napoleon believed Acre would open the road for him to enter Anatolia. With modern cannons and a strong army, he began a long siege. Although Napoleon‚Äôs army was powerful, Acre did not fall. Cezzar Ahmed Pasha defended the city with courage and discipline. He was supported by British ships under Admiral Sidney Smith, who gave him weapons and naval help. For two months, Napoleon‚Äôs forces tried again and again, but the walls of Acre resisted. At last, Napoleon abandoned the siege and returned to Egypt. Cezzar Ahmed Pasha became a hero of the Ottoman Empire, remembered as the man who stopped Napoleon.",
            mcq: [
                { q: "Who attacked Cezzar Ahmed Pasha at Acre in 1799?", options: ["Peter the Great", "Napoleon Bonaparte", "Julius Caesar"], a: 1 },
                { q: "Who provided naval support to the Ottomans during the siege?", options: ["The British", "The Russians", "The French"], a: 0 },
                { q: "Why did Napoleon want to capture Acre?", options: ["To reach India", "To enter Anatolia", "To build a navy base"], a: 1 },
                { q: "How long did the siege of Acre last before Napoleon gave up?", options: ["One week", "Two months", "Two years"], a: 1 },
                { q: "What was the result of Napoleon's failure at Acre?", options: ["He became Emperor of the East", "His reputation was damaged", "He conquered Anatolia"], a: 1 }
            ]
        },
        {
            title: "El Cid",
            text: "Rodrigo Diaz de Vivar, known as 'El Cid,' was a skilled warrior in Christian Spain. His nickname comes from Arabic El Seyit, meaning respected. He served kings but was eventually sent into exile. Rodrigo often worked with Muslim rulers and fought for them when it helped his cause. His respect for Muslim soldiers made him unique. In 1094, he took the city of Valencia. Many Muslim families still lived there, and Rodrigo let them stay under his rule. He defended the city until he died in 1099. His life shows that alliances and respect for Muslim culture were important for his success.",
            mcq: [
                { q: "What does the nickname 'El Cid' mean in Arabic?", options: ["The King", "The Respected", "The Sword"], a: 1 },
                { q: "Which city did El Cid rule until his death in 1099?", options: ["Madrid", "Barcelona", "Valencia"], a: 2 },
                { q: "How did El Cid treat Muslim families in Valencia?", options: ["He exiled them", "He let them stay under his rule", "He made them slaves"], a: 1 },
                { q: "Why was Rodrigo sent into exile?", options: ["He was accused of treachery", "He retired from war", "He was too old"], a: 0 },
                { q: "Who did El Cid work with during his exile?", options: ["French monks", "Muslim rulers", "Italian sailors"], a: 1 }
            ]
        },
        {
            title: "Fahrettin Pasha",
            text: "Fahrettin Pasha, known as the 'Desert Tiger,' defended Medina during WWI. He protected the city against the British-supported Arab revolt. Lawrence of Arabia destroyed the railway and cut Medina off. Food became so scarce that soldiers ate locusts to survive. Fahrettin Pasha sent the holy relics to Istanbul for safety and refused to surrender, saying: 'I will not lower the Turkish flag with my own hands!'. After the war ended, he was finally forced to give up by his own officers. He later joined the Turkish War of Independence and became the first ambassador to Afghanistan. He died in 1948.",
            mcq: [
                { q: "What was Fahrettin Pasha's famous nickname?", options: ["Desert Tiger", "Iron Wall", "Medina Lion"], a: 0 },
                { q: "What did soldiers eat during the siege of Medina to survive?", options: ["Sand bread", "Locusts", "Desert fruits"], a: 1 },
                { q: "Who cut off Medina by destroying the railway?", options: ["General Townshend", "Lawrence of Arabia", "Sidney Smith"], a: 1 },
                { q: "Where did Fahrettin Pasha send the holy relics for safety?", options: ["Cairo", "Medina", "Istanbul"], a: 2 },
                { q: "What was his role after the Turkish War of Independence?", options: ["President", "Ambassador to Afghanistan", "Admiral"], a: 1 }
            ]
        },
        {
            title: "Gavrilo Princip",
            text: "Gavrilo Princip was a young Serbian student who wanted freedom for Slavic peoples. In 1914, he assassinated Archduke Franz Ferdinand in Sarajevo. Princip saw the Archduke's car by accident after the driver made a wrong turn. Both the Archduke and his wife died. This event started World War I. Princip was arrested immediately, but because he was under 20, he couldn't get the death penalty. He died in prison in 1918.",
            mcq: [
                { q: "Where was Gavrilo Princip born?", options: ["Austria", "Serbia", "Bosnia"], a: 1 },
                { q: "Why did the Archduke's car stop near Princip?", options: ["It broke down", "The driver made a wrong turn", "To buy fuel"], a: 1 },
                { q: "Which major war did the assassination trigger?", options: ["Crimean War", "World War I", "World War II"], a: 1 },
                { q: "Why was Princip not given the death penalty?", options: ["He was found innocent", "He was under 20 years old", "He escaped"], a: 1 },
                { q: "In which city did the assassination occur?", options: ["Belgrade", "Sarajevo", "Vienna"], a: 1 }
            ]
        },
        {
            title: "Gazi Osman Pasha",
            text: "Gazi Osman Pasha defended Plevna in Bulgaria during the Russo-Turkish War (1877-1878). With a smaller army, he organized the defenses and built strong trenches. For five months, his army resisted Russian and Romanian forces. In December 1877, he attempted a final attack, was wounded, and captured. The Russians respected him and treated him with dignity. After the war, he returned to Istanbul as a hero and was given the title 'Gazi.'",
            mcq: [
                { q: "During which war did Gazi Osman Pasha defend Plevna?", options: ["Crimean War", "Russo-Turkish War", "Balkan War"], a: 1 },
                { q: "In which modern country is Plevna located?", options: ["Turkey", "Bulgaria", "Romania"], a: 1 },
                { q: "How long did the defense of Plevna last?", options: ["Five days", "Five months", "Five years"], a: 1 },
                { q: "How was he treated by the Russians after capture?", options: ["Executed", "With dignity and respect", "He was ignored"], a: 1 },
                { q: "What title was given to him for his bravery?", options: ["Sultan", "Gazi", "Grand Vizier"], a: 1 }
            ]
        },
        {
            title: "Halil Pasha",
            text: "The Siege of Kut al-Amara was an Ottoman victory in WWI. In Mesopotamia (Iraq), Ottoman forces under Halil Pasha surrounded 13,000 British soldiers led by General Townshend. Hunger and disease weakened the British inside the town. After 147 days, the British surrendered on 29 April 1916. More than 13,000 British and Indian soldiers were taken as prisoners. It was one of the worst defeats in British military history.",
            mcq: [
                { q: "In which modern country did the Siege of Kut al-Amara occur?", options: ["Turkey", "Iraq", "Egypt"], a: 1 },
                { q: "Who was the British general who surrendered to Halil Pasha?", options: ["General Smith", "General Townshend", "General Lawrence"], a: 1 },
                { q: "How many days did the siege last?", options: ["47 days", "147 days", "300 days"], a: 1 },
                { q: "What were the main 'enemies' inside the town for the British?", options: ["Ottoman spies", "Hunger and disease", "Cold weather"], a: 1 },
                { q: "What happened on 29 April 1916?", options: ["The British won", "The British surrendered", "The Ottomans retreated"], a: 1 }
            ]
        },
        {
            title: "isabelle & ferdinand",
            text: "Isabella of Castile and Ferdinand of Aragon married in 1469, uniting Spain. In 1492, they captured Granada, the last Muslim kingdom, ending the Reconquista. They ordered Muslims and Jews to convert or leave. That same year, they supported Columbus's voyage, leading to Spain's overseas empire. They built a strong monarchy but are remembered with pain for removing non-Christians.",
            mcq: [
                { q: "When did Isabella and Ferdinand unite their kingdoms?", options: ["1453", "1469", "1492"], a: 1 },
                { q: "Which city was the last Muslim kingdom in Spain to be captured?", options: ["Madrid", "Granada", "Barcelona"], a: 1 },
                { q: "What choice did they give to Muslims and Jews in 1492?", options: ["Pay extra taxes", "Convert or leave", "Join the navy"], a: 1 },
                { q: "Which explorer did they support for an overseas journey?", options: ["Marco Polo", "Christopher Columbus", "Vasco da Gama"], a: 1 },
                { q: "What was the struggle to retake Iberia called?", options: ["Crusades", "Reconquista", "Armada"], a: 1 }
            ]
        },
        {
            title: "Jacobi",
            text: "Jacobi, a Jewish physician from Genoa, studied medicine and poisons.Recruited by Venice and the Vatican, he went to the Ottoman court as 'Yakup.' Mehmed II trusted him as head physician. In 1481, Mehmed fell ill and died after Yakup gave him medicine. Suspected of being a Venetian spy, his life ended in mystery; some say he was killed, others that he fled but was caught.",
            mcq: [
                { q: "Under what name did Jacobi serve the Ottoman Sultan?", options: ["Mustafa", "Yakup", "Joseph"], a: 1 },
                { q: "What was Jacobi's professional role in the palace?", options: ["Head Architect", "Head Physician", "Financial Advisor"], a: 1 },
                { q: "Which Sultan died after Jacobi gave him medicine in 1481?", options: ["Murad II", "Mehmed II", "Suleiman I"], a: 1 },
                { q: "Where was Jacobi originally born?", options: ["Near Genoa", "Istanbul", "Rome"], a: 0 },
                { q: "Who were whispers saying Jacobi actually served?", options: ["The King of France", "Venice and the Vatican", "The British"], a: 1 }
            ]
        },
        {
            title: "Koca Sinan Pasha",
            text: "In 1595, Koca Sinan Pasha fought Michael the Brave in Wallachia. During a slow retreat to the Danube, the army used a wooden bridge at Giurgiu. Heavy treasure carts delayed the crossing. Sinan Pasha and the main army crossed, leaving 'Akƒ±ncƒ±' warriors to guard the back. Michael the Brave destroyed the bridge with cannons. Thousands of Akƒ±ncƒ± died, and the unit never recovered. This is called the 'Bridge Disaster.'",
            mcq: [
                { q: "Which famous Ottoman unit was destroyed in the Bridge Disaster?", options: ["Janissaries", "Akƒ±ncƒ±", "Mamluks"], a: 1 },
                { q: "Who was the enemy leader in this conflict?", options: ["Peter the Great", "Michael the Brave", "Prince Eugene"], a: 1 },
                { q: "What delayed the crossing of the bridge?", options: ["Heavy rain", "Heavy carts filled with treasure", "A broken boat"], a: 1 },
                { q: "Where was the bridge located?", options: ["Istanbul", "Giurgiu", "Plevna"], a: 1 },
                { q: "What was the result for the Akƒ±ncƒ± warriors?", options: ["They became stronger", "They never recovered", "They moved to Egypt"], a: 1 }
            ]
        },
        {
            title: "Mezamorta H√ºseyin Pasha",
            text: "Mezamorta H√ºseyin Pasha was an Ottoman admiral. His name means 'half-dead' because he survived a Venetian battle where enemies thought he was dead. In 1683, he stopped a French attack on Algiers by firing the French consul from a cannon. He later modernized the navy by introducing large sailing ships called 'kalyons.' He died of illness in 1701.",
            mcq: [
                { q: "What does the nickname 'Mezamorta' mean in Italian?", options: ["Great Admiral", "Half-dead", "Spanish King"], a: 1 },
                { q: "How did he stop the French navy at Algiers?", options: ["Burned the fleet", "Fired a consul from a cannon", "Surrendered"], a: 1 },
                { q: "What type of modern ships did he introduce to the navy?", options: ["Rowing boats", "Kalyons (sailing ships)", "Ironclads"], a: 1 },
                { q: "Against which power did he win back Chios Island?", options: ["The French", "The Venetians", "The Russians"], a: 1 },
                { q: "Where did he start his career?", options: ["Sultan's Palace", "Sailor and pirate", "Merchant ship"], a: 1 }
            ]
        },
        {
            title: "Mir Ali Beg",
            text: "In the 1500s, Mir Ali Beg fought to remove Portugal from East African cities like Mombasa. In 1589, the Portuguese attacked with heavy guns while the cannibalistic Zimba tribe attacked from land. Ottoman soldiers were caught and eaten. Mir Ali Beg was captured and died in Portugal, ending Ottoman influence in the region.",
            mcq: [
                { q: "Which empire was Mir Ali Beg fighting in East Africa?", options: ["Spanish", "Portuguese", "British"], a: 1 },
                { q: "What terrifying tribe attacked the city from land?", options: ["The Mongols", "The Zimba (cannibals)", "The Vikings"], a: 1 },
                { q: "What happened to Mir Ali Beg after the battle?", options: ["He escaped to Cairo", "He died a prisoner in Portugal", "He became Sultan of Mombasa"], a: 1 },
                { q: "In which city did Mir Ali Beg build a small castle?", options: ["Mombasa", "Istanbul", "Cairo"], a: 0 },
                { q: "What was the outcome of this battle for the Ottomans?", options: ["They conquered the region", "They never tried to take power there again", "They built a larger fleet"], a: 1 }
            ]
        },
        {
            title: "Mustafa the Second",
            text: "Sultan Mustafa II attacked Austria in 1695. Prince Eugene of Savoy used spies to find his location at the Tisa River. Greedy Ottoman Pashas delayed the army by demanding money from their own men at the bridge. Prince Eugene attacked, the bridge broke, and 30,000 Ottomans died. Mustafa II never led an army again, leading to the Treaty of Karlowitz.",
            mcq: [
                { q: "Who was the clever Austrian general who defeated Mustafa II?", options: ["Sidney Smith", "Prince Eugene of Savoy", "General Townshend"], a: 1 },
                { q: "What caused the fatal delay at the Tisa River bridge?", options: ["A massive storm", "Pashas demanding money from soldiers", "A fire in the camp"], a: 1 },
                { q: "How many Ottoman men were lost in this disaster?", options: ["3,000", "30,000", "100,000"], a: 1 },
                { q: "Which treaty was signed in 1699 following this defeat?", options: ["Treaty of Prut", "Treaty of Karlowitz", "Treaty of London"], a: 1 },
                { q: "What did the Sultan lose besides his army?", options: ["His official seal", "His crown", "His sword"], a: 0 }
            ]
        },
        {
            title: "Ragnar Lodbrok",
            text: "Ragnar Lodbrok was a 9th-century Viking leader. He got his name 'Lodbrok' by wearing special pants to protect himself from a snake. He attacked Paris in 845 and was paid silver to leave. He died in a snake pit in England after capture by King Aella. His sons avenged him by killing King Aella.",
            mcq: [
                { q: "What does the name 'Lodbrok' refer to?", options: ["Special pants", "Golden sword", "Fast runner"], a: 0 },
                { q: "Which city paid Ragnar silver to stop his attack in 845?", options: ["London", "Paris", "Rome"], a: 1 },
                { q: "How did Ragnar die?", options: ["Battle at sea", "A snake pit", "Old age"], a: 1 },
                { q: "Who were Ragnar's sons?", options: ["Ivar, Bjorn, Halfdan", "Peter, Paul, John", "Alexander, Philip, Karl"], a: 0 },
                { q: "Who did his sons kill to avenge him?", options: ["Edward I", "King Aella", "General Smith"], a: 1 }
            ]
        },
        {
            title: "Rob Roy",
            text: "Rob Roy MacGregor was a Scottish hero who lived in the Highlands. A cattle farmer by trade, he became an outlaw after a noble took his land. Known as the 'Scottish Robin Hood,' he stole from the rich and gave to the poor. He hid in the mountains for years, avoiding English capture.",
            mcq: [
                { q: "What was Rob Roy's original job?", options: ["Soldier", "Cattle farmer", "Sailor"], a: 1 },
                { q: "What was his famous nickname?", options: ["Scottish Robin Hood", "Iron Scot", "Medina Lion"], a: 0 },
                { q: "Why did he become an outlaw?", options: ["He hated the King", "A rich man took his land", "He wanted to travel"], a: 1 },
                { q: "Where did he hide for many years?", options: ["In London", "The Highlands", "On a small island"], a: 1 },
                { q: "Which clan did he belong to?", options: ["MacGregor", "Donald", "Stewart"], a: 0 }
            ]
        },
        {
            title: "Salahuddin Ayyubi",
            text: "Salahuddin Ayyubi (Saladin) united Muslim lands to defend against Crusaders. He defeated them at the Battle of Hattin in 1187 and captured Jerusalem. He was famously fair, letting Christians and Jews stay or leave safely. He died in 1193, remembered as a hero of justice.",
            mcq: [
                { q: "In which battle did Saladin defeat the Crusaders in 1187?", options: ["Ain Jalut", "Hattin", "Guadalete"], a: 1 },
                { q: "Which holy city did he capture?", options: ["Rome", "Jerusalem", "Constantinople"], a: 1 },
                { q: "How did he treat people in Jerusalem?", options: ["Executed them", "Let them stay or leave in peace", "Made them slaves"], a: 1 },
                { q: "Where was he born?", options: ["Cairo", "Tikrit", "Baghdad"], a: 1 },
                { q: "What was his main goal?", options: ["Conquering Europe", "Uniting Muslim lands", "Finding gold"], a: 1 }
            ]
        },
        {
            title: "Skanderbeg",
            text: "Gjergj Kastrioti (Skanderbeg) is Albania's hero. Hostage and soldier for the Ottomans, he revolted in 1443. For 20 years, he protected Albania using clever tactics. The Pope called him the 'Athlete of Christ.' His eagle flag is still Albania's symbol today.",
            mcq: [
                { q: "What is Skanderbeg's real name?", options: ["Mehmet", "Gjergj Kastrioti", "Osman"], a: 1 },
                { q: "What symbol is on his flag?", options: ["Lion", "Double-headed eagle", "Crescent"], a: 1 },
                { q: "How long did he resist the Ottomans?", options: ["5 years", "20 years", "50 years"], a: 1 },
                { q: "What title did the Pope give him?", options: ["Athlete of Christ", "Saint of War", "King of Alps"], a: 0 },
                { q: "Where was he trained?", options: ["Rome", "Ottoman Empire", "Venice"], a: 1 }
            ]
        },
        {
            title: "Spartacus",
            text: "Spartacus was a gladiator who led a slave revolt against Rome in 73 BC. He escaped with 70 others using kitchen knives. He built a large army but was defeated by Crassus in 71 BC. 6,000 rebels were crucified as a warning.",
            mcq: [
                { q: "Where was Spartacus from?", options: ["Rome", "Thrace", "Egypt"], a: 1 },
                { q: "What did they use to escape gladiator school?", options: ["Swords", "Kitchen knives", "Chains"], a: 1 },
                { q: "Where did they first hide?", options: ["Colosseum", "Mount Vesuvius", "Sicily"], a: 1 },
                { q: "Who defeated him?", options: ["Caesar", "Crassus", "Napoleon"], a: 1 },
                { q: "What was the punishment for the 6,000 rebels?", options: ["Exile", "Crucifixion", "Freeing them"], a: 1 }
            ]
        },
        {
            title: "Stefan Du≈°an",
            text: "Stefan Du≈°an ruled Serbia (1331‚Äì1355). He built an empire and expanded into Macedonia and Greece. He tried to form a united Christian army against the Ottomans and aimed to take Constantinople but died suddenly in 1355. His empire weakened afterward.",
            mcq: [
                { q: "What was his main goal?", options: ["Take Rome", "Take Constantinople", "Sailing"], a: 1 },
                { q: "Which threat did he recognize?", options: ["Ottomans", "British", "Vikings"], a: 0 },
                { q: "What happened after his death?", options: ["Empire grew", "Empire weakened/divided", "Nothing"], a: 1 },
                { q: "Which battle happened 34 years after he died?", options: ["Maritsa", "Ain Jalut", "Ankara"], a: 0 },
                { q: "Who did he try to form alliances with?", options: ["France", "The Pope and Venice", "Russia"], a: 1 }
            ]
        },
        {
            title: "Taras Bulba",
            text: "Taras Bulba was a Cossack warrior who fought Polish rule in Ukraine. He killed his son Andriy for betraying them for a Polish woman. His older son Ostap was killed in Warsaw. Taras was eventually killed, remembered as a hero of traditions.",
            mcq: [
                { q: "Who did he fight against?", options: ["Russia", "Poland", "Germany"], a: 1 },
                { q: "Why did he kill his son Andriy?", options: ["Stealing", "Betrayal/Enemy love", "Cowardice"], a: 1 },
                { q: "Where was Ostap killed?", options: ["Kyiv", "Warsaw", "Warsaw"], a: 1 },
                { q: "What did Taras say to Andriy?", options: ["I hate you", "I gave you life, I take it", "Go"], a: 1 },
                { q: "What group was he?", options: ["Vikings", "Cossacks", "Mamluks"], a: 1 }
            ]
        },
        {
            title: "Tariq ibn Ziyad",
            text: "In 711 AD, Tariq ibn Ziyad led 7,000 soldiers into Spain. He landed at Gibraltar and burned his boats to show there was no retreat. He defeated King Roderick at Guadalete, beginning 800 years of Muslim rule in Spain.",
            mcq: [
                { q: "What is named after him?", options: ["Paris", "Gibraltar", "Madrid"], a: 1 },
                { q: "What did he do to the boats?", options: ["Sank them", "Burned them", "Sold them"], a: 1 },
                { q: "Who did he defeat?", options: ["King Philip", "King Roderick", "King Aella"], a: 1 },
                { q: "How many soldiers?", options: ["700", "7,000", "70,000"], a: 1 },
                { q: "How many years of rule?", options: ["80", "800", "8000"], a: 1 }
            ]
        },
        {
            title: "Timur (Tamerlane)",
            text: "Timur, from Central Asia, defeated Sultan Bayezid at Ankara in 1402 by turning Bayezid's soldiers against him. Bayezid died a prisoner. Timur was known for cruelty and died in 1405 while planning to invade China.",
            mcq: [
                { q: "Which Sultan did he capture?", options: ["Mustafa", "Bayezid", "Mehmed"], a: 1 },
                { q: "How did he win at Ankara?", options: ["Cannons", "Switching soldiers", "Ambush"], a: 1 },
                { q: "Where did he die going?", options: ["India", "Egypt", "China"], a: 2 },
                { q: "What route did he control?", options: ["Silk Road", "Spice Route", "Sea"], a: 0 },
                { q: "What happened to Bayezid?", options: ["Freed", "Died a prisoner", "Escaped"], a: 1 }
            ]
        },
        {
            title: "Tomyris",
            text: "Queen Tomyris of the Massagetae defeated Cyrus the Great of Persia in 530 BC. Cyrus tricked her son with wine; he died in captivity. Tomyris avenged him by cutting off Cyrus's head and putting it in a bag of blood.",
            mcq: [
                { q: "Which King did she defeat?", options: ["Xerxes", "Cyrus the Great", "Darius"], a: 1 },
                { q: "How were her soldiers tricked?", options: ["Gold", "Wine and food", "Maps"], a: 1 },
                { q: "How did her son die?", options: ["Battle", "Suicide in captivity", "Old age"], a: 1 },
                { q: "What did she do with the head?", options: ["Back to Persia", "Bag of blood", "Buried"], a: 1 },
                { q: "Where was she?", options: ["Europe", "Central Asia", "Egypt"], a: 1 }
            ]
        },
        {
            title: "Turgut Reis",
            text: "Turgut Reis was a sailor who became an Ottoman admiral. Prisoner of the Genoese for 3 years, he was rescued by Barbarossa. He famously moved ships overland at Djerba and died at the Siege of Malta in 1565.",
            mcq: [
                { q: "How did he escape at Djerba?", options: ["Swimming", "Overland ships", "Storm"], a: 1 },
                { q: "Who held him for 3 years?", options: ["Genoese", "British", "French"], a: 0 },
                { q: "Where did he die?", options: ["Vienna", "Malta", "Acre"], a: 1 },
                { q: "Where is his tomb?", options: ["Istanbul", "Tripoli", "Malta"], a: 1 },
                { q: "Who was his ally?", options: ["Mezamorta", "Barbarossa", "Yusuf"], a: 1 }
            ]
        },
        {
            title: "Vlad III (Dracula)",
            text: "Vlad III 'The Impaler' of Wallachia hated the Ottomans after being a hostage. He used brutal night attacks and scorched earth against Mehmed II. He was defeated, and his head sent to Mehmed in 1476.",
            mcq: [
                { q: "What does Dracula mean?", options: ["Impaler", "Son of Dragon", "Night King"], a: 1 },
                { q: "Where was he a hostage?", options: ["Rome", "Ottoman Empire", "Paris"], a: 1 },
                { q: "Brother's name?", options: ["Radu", "Mustafa", "Stefan"], a: 0 },
                { q: "Tactic used?", options: ["Scorched earth", "Walls", "Bribes"], a: 0 },
                { q: "Whom was his head sent to?", options: ["Philip", "Mehmed II", "Pope"], a: 1 }
            ]
        },
        {
            title: "William Tell",
            text: "Swiss hero William Tell shot an apple off his son's head under Gessler's orders. He admitted his second arrow was for Gessler. He escaped a storm and sparked the Swiss rebellion for independence.",
            mcq: [
                { q: "What did he shoot off?", options: ["Grape", "Apple", "Bird"], a: 1 },
                { q: "Who was the 2nd arrow for?", options: ["Son", "Gessler", "King"], a: 1 },
                { q: "How did he escape?", options: ["Swimming", "Steering boat/Storm", "Bribes"], a: 1 },
                { q: "What was on the pole?", options: ["Sword", "Hat", "Picture"], a: 1 },
                { q: "Which nation?", options: ["Scotland", "Switzerland", "Albania"], a: 1 }
            ]
        },
        {
            title: "William Wallace",
            text: "Scottish fighter William Wallace rebelled after English soldiers killed his wife. Won at Stirling Bridge (1297) but lost at Falkirk. Captured in 1305 and executed in London, he remains a hero.",
            mcq: [
                { q: "English King?", options: ["Henry VIII", "Edward I", "Richard III"], a: 1 },
                { q: "Victory?", options: ["Falkirk", "Stirling Bridge", "London"], a: 1 },
                { q: "Trigger?", options: ["Gold", "Wife killed", "Land"], a: 1 },
                { q: "Execution city?", options: ["Edinburgh", "London", "Paris"], a: 1 },
                { q: "Successor?", options: ["Bruce", "Rob Roy", "Eugene"], a: 0 }
            ]
        },
        {
            title: "Yusuf Pasha",
            text: "In 1788, the Austrian army of 100,000 destroyed itself in Romania due to confusion and alcohol. Mishearing 'Halt' as 'Allah', they fired on each other. Yusuf Pasha took the town without a fight.",
            mcq: [
                { q: "Cause of destruction?", options: ["Plague", "Alcohol/Confusion", "Storm"], a: 1 },
                { q: "Mistaken word?", options: ["Halt", "Attack", "Run"], a: 0 },
                { q: "Army size?", options: ["1,000", "100,000", "500,000"], a: 1 },
                { q: "Country?", options: ["Turkey", "Romania", "Germany"], a: 1 },
                { q: "Ottoman effort?", options: ["Siege", "Battle", "None"], a: 2 }
            ]
        }
    ];

    let currentMode = 'listen'; let isSlowMode = false; let repoFiles = [];
    const player = document.getElementById('player'); const list = document.getElementById('list');

    async function fetchFiles() {
        try {
            const res = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            const data = await res.json();
            repoFiles = data.map(f => f.name);
            renderList();
        } catch (e) { renderList(); }
    }
    fetchFiles();

    function startApp() { document.getElementById('splash-screen').style.display = 'none'; }

    function renderList() {
        const sorted = [...db].sort((a, b) => a.title.localeCompare(b.title));
        list.innerHTML = sorted.map((item) => {
            const originalIndex = db.findIndex(x => x.title === item.title);
            if (currentMode === 'listen') {
                return `<div class="card" data-name="${item.title.toLowerCase()}">
                    <div class="card-title">${item.title}</div>
                    <button class="listen-btn btn-uk" onclick="playHP(${originalIndex},'uk')">üá¨üáß 1. UK English</button>
                    <button class="listen-btn btn-us-f" onclick="playHP(${originalIndex},'female')">üá∫üá∏ 2. US Female</button>
                    <button class="listen-btn btn-us-m" onclick="openRead(${originalIndex})">üìñ 3. Read & Listen (US Male)</button>
                </div>`;
            } else {
                return `<button class="quiz-menu-btn" data-name="${item.title.toLowerCase()}" onclick="openQuiz(${originalIndex})">üß† ${item.title} MCQ Quiz</button>`;
            }
        }).join('');
    }

    function playHP(idx, type) {
        const item = db[idx];
        const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
        let key = item.title.toLowerCase().replace(" and ", " & "); 
        let file = "";
        if (type === 'uk') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('uk'));
        else if (type === 'female') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('female'));
        else if (type === 'male') {
            file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('male') && !f.toLowerCase().includes('female'));
        }
        if (file) { player.src = BASE + encodeURIComponent(file); player.playbackRate = isSlowMode ? 0.8 : 1.0; player.play(); }
    }

    function openRead(i) {
        document.getElementById('story-text').innerText = db[i].text;
        document.getElementById('view-listen').style.display = 'block';
        document.getElementById('view-quiz').style.display = 'none';
        document.getElementById('modal').style.display = 'block';
        playHP(i, 'male');
    }

    function openQuiz(i) {
        document.getElementById('quiz-title').innerText = db[i].title + " Quiz";
        document.getElementById('quiz-area').innerHTML = db[i].mcq.map((q, qIdx) => `
            <div class="quiz-q"><div class="q-text">Q${qIdx+1}: ${q.q}</div>
            ${q.options.map((opt, oIdx) => `<button class="mcq-option" onclick="checkMCQ(this, ${q.a}, ${oIdx})">${opt}</button>`).join('')}
            <div class="feedback"></div></div>`).join('');
        document.getElementById('view-listen').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('modal').style.display = 'block';
    }

    function checkMCQ(btn, correctIdx, userIdx) {
        const parent = btn.parentElement;
        const fb = parent.querySelector('.feedback');
        if (correctIdx === userIdx) {
            fb.innerHTML = "<span class='correct'>‚úì CORRECT!</span>";
            btn.style.backgroundColor = "#2f9e44";
        } else {
            fb.innerHTML = "<span class='wrong'>‚úó WRONG!</span>";
            btn.style.backgroundColor = "#d63031";
        }
        parent.querySelectorAll('.mcq-option').forEach(b => b.disabled = true);
    }

    function setMode(m) { 
        currentMode = m; 
        document.getElementById('btn-listen').className = (m==='listen')?'toggle-btn active':'toggle-btn';
        document.getElementById('btn-quiz').className = (m==='quiz')?'toggle-btn active':'toggle-btn';
        renderList(); 
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
    function toggleSnail() { isSlowMode = !isSlowMode; player.playbackRate = isSlowMode ? 0.8 : 1.0; document.getElementById('btn-snail').classList.toggle('active'); }
    function filterList() {
        const val = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.card, .quiz-menu-btn').forEach(el => {
            el.style.display = el.getAttribute('data-name').includes(val) ? 'block' : 'none';
        });
    }
</script>
</body>
</html>
