<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lingua Pharmacia - Mezamorta</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #000; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* Splash Screen */
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .logo-ring { width: 350px; height: 350px; border-radius: 50%; border: 6px solid gold; box-shadow: 0 0 60px #d32f2f; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; background: #1a1a1a; overflow: hidden; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        .start-btn { padding: 25px 100px; font-size: 32px; font-weight: bold; background: #d32f2f; color: white; border: none; border-radius: 60px; cursor: pointer; }

        /* Header & Audio Bar */
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 65%; }
        #btn-snail { background: #111; color: white; border: 2px solid #ffcc00; font-size: 28px; padding: 5px 15px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #ffcc00; color: #000; }
        #status { color: gold; font-weight: bold; margin-top: 10px; font-size: 14px; }

        /* Content Area */
        #content-area { padding: 20px; padding-top: 180px; max-width: 750px; margin: 0 auto; }
        .card { background: #1a1a1a; padding: 35px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 32px; font-weight: 900; color: #fff; margin-bottom: 25px; text-align: center; }
        
        .voice-btn { width: 100%; padding: 22px; margin-bottom: 15px; border: none; border-radius: 12px; color: white; font-weight: 900; font-size: 22px; text-align: left; cursor: pointer; transition: transform 0.1s; }
        .voice-btn:active { transform: scale(0.98); }
        .v-uk { background: #d32f2f; }
        .v-usf { background: #9c27b0; }
        .v-usm { background: #1976d2; }

        /* Modal - Large Text */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.99); z-index: 200; overflow-y: auto; }
        #modal-content { padding: 30px; max-width: 850px; margin: 0 auto; padding-top: 80px; }
        #close-btn { position: fixed; top: 20px; right: 20px; font-size: 45px; cursor: pointer; color: white; z-index: 300; background: #333; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        #story-text { font-size: 26px; line-height: 1.8; color: #f5f5f5; text-align: justify; padding-bottom: 100px; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="logo-ring"><img src="https://dogierez01.github.io/historic-people/logo.png" class="logo-img" onerror="this.src='https://via.placeholder.com/350?text=LOGO'"></div>
    <div style="color: #fff; font-size: 36px; font-weight: 900; margin-bottom: 40px;">LINGUA PHARMACIA</div>
    <button class="start-btn" onclick="startApp()">START üèõÔ∏è</button>
</div>

<div id="header-area">
    <div style="font-weight:900; color:gold; margin-bottom:10px; font-size:22px;">üèõÔ∏è MEZAMORTA: THE TRUTH TEST</div>
    <div id="audio-bar">
        <audio id="player" controls></audio>
        <button id="btn-snail" onclick="toggleSnail()">üêå</button>
    </div>
    <div id="status">Syncing with Repository...</div>
</div>

<div id="content-area">
    <div class="card">
        <div class="card-title">Mezamorta H√ºseyin Pasha</div>
        <button class="voice-btn v-uk" onclick="fetchAndPlay('mezamorta male uk.wav')">1. üá¨üáß UK English (Male)</button>
        <button class="voice-btn v-usf" onclick="fetchAndPlay('mezamorta female us.wav')">2. üá∫üá∏ US Female</button>
        <button class="voice-btn v-usm" onclick="fetchAndPlay('mezamorta male us.wav', true)">3. üìñ Read & Listen (US Male)</button>
    </div>
</div>

<div id="modal">
    <div id="close-btn" onclick="closeModal()">‚úï</div>
    <div id="modal-content">
        <h1 style="text-align:center; color:#1976d2; font-size:38px; margin-bottom:30px;">Mezamorta H√ºseyin Pasha</h1>
        <div id="story-text">Mezamorta H√ºseyin Pasha was a famous Ottoman admiral born in the 17th century. Some people say he was originally from Spain and later became a Muslim. He started his career as a sailor and a pirate in the Mediterranean Sea. His interesting nickname, 'Mezamorta,' means 'half-dead' in Italian. In a big battle against the Venetians, he was hurt very badly. His enemies thought he was dead, but he survived. Because of this amazing event, he got his famous name. By 1674, he was a captain and attacked many enemy ships. In 1683, the French navy attacked Algiers. The leader of Algiers wanted to give up, but Mezamorta refused. He became the new ruler and defended the city. To show his strength, he put the French consul into a large cannon and fired him at the enemy ships. This stopped the French attack. Later, he attacked the French coast until they agreed to peace. Later, Mezamorta went to Istanbul to join the Ottoman navy. In 1695, he won back Chios Island from the Venetians. Because of this victory, the Sultan made him the Grand Admiral, or 'Kapudan Pasha.' He changed how the navy fought. He stopped using old rowing ships and started using big sailing ships called 'kalyons.' Mezamorta died from an illness in 1701 while getting ready for a new war.</div>
    </div>
</div>

<script>
    const player = document.getElementById('player');
    const snailBtn = document.getElementById('btn-snail');
    const statusDiv = document.getElementById('status');
    let isSlow = false;
    let repoFiles = [];

    // LITERALLY ASKING GITHUB FOR THE FILE LIST (Same logic as Animal Kingdom)
    async function syncRepo() {
        try {
            const response = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            repoFiles = await response.json();
            statusDiv.innerText = "Repository Connected Successfully.";
        } catch (e) {
            statusDiv.innerText = "Error: Cannot connect to GitHub.";
        }
    }
    syncRepo();

    function fetchAndPlay(targetName, openText = false) {
        // Find the file in the live repo list by literal name resemblance
        const match = repoFiles.find(f => f.name.toLowerCase() === targetName.toLowerCase());
        
        if (match && match.download_url) {
            player.src = match.download_url;
            player.playbackRate = isSlow ? 0.9 : 1.0;
            player.play();
            statusDiv.innerText = "Playing: " + targetName;
        } else {
            statusDiv.innerText = "Error: " + targetName + " not found.";
        }

        if (openText) {
            document.getElementById('modal').style.display = 'block';
        }
    }

    function toggleSnail() { 
        isSlow = !isSlow; 
        player.playbackRate = isSlow ? 0.9 : 1.0; 
        snailBtn.classList.toggle('active'); 
    }

    function startApp() { document.getElementById('splash-screen').style.display = 'none'; }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
</script>
</body>
</html>
