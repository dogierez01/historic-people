<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Historic People Master</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: opacity 0.5s ease; }
        .neon-ring { width: 350px; height: 350px; border-radius: 50%; border: 10px solid #ff0000; box-shadow: 0 0 40px #ff0000; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; margin-bottom: 40px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes pulse { 0% { box-shadow: 0 0 20px #ff0000; } 50% { box-shadow: 0 0 60px #ff0000; } 100% { box-shadow: 0 0 20px #ff0000; } }
        #start-btn { padding: 20px 80px; font-size: 26px; font-weight: 900; color: white; background: linear-gradient(135deg, #d63031, #ff0000); border: none; border-radius: 60px; cursor: pointer; text-transform: uppercase; }
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #app-title { font-size: 22px; font-weight: 900; color: #fff; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .toggle-btn { padding: 12px 35px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: #888; background: #222; margin: 0 10px; transition: all 0.2s; font-size: 16px; }
        .toggle-btn.active { color: #fff; background: #007AFF; }
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 75%; outline: none; }
        #btn-snail { background: #111; color: white; border: 2px solid #ff0033; font-size: 28px; padding: 5px 20px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #0a1f0a; border-color: #39ff14; box-shadow: 0 0 10px #39ff14; }
        #content-area { padding: 20px; padding-top: 220px; max-width: 700px; margin: 0 auto; }
        .card { background: #1e1e1e; padding: 25px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 20px; text-transform: capitalize; text-align: center; border-bottom: 1px solid #444; padding-bottom: 12px; }
        .listen-btn { padding: 18px; border-radius: 12px; border: none; cursor: pointer; font-weight: 900; font-size: 18px; color: white; display: block; width: 100%; margin-bottom: 12px; }
        .btn-uk { background: #d63031; } .btn-us-f { background: #e056fd; } .btn-us-m { background: #007AFF; }
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 3000; overflow-y: auto; }
        #modal-content { padding: 50px; max-width: 900px; margin: 0 auto; padding-top: 100px; }
        #close-btn { position: fixed; top: 30px; right: 30px; font-size: 35px; cursor: pointer; color: white; z-index: 3100; background: #ff0033; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; }
        #story-text { font-size: 32px; line-height: 1.6; color: #f0f0f0; text-align: justify; font-weight: 500; }
        .quiz-q { background: #121212; padding: 30px; border-radius: 15px; margin-bottom: 30px; border-left: 10px solid #e056fd; }
        .q-text { font-size: 26px; font-weight: bold; color: #fff; margin-bottom: 25px; line-height: 1.3; }
        .mcq-option { width: 100%; padding: 20px; background: #1e1e1e; border: 2px solid #333; color: #fff; border-radius: 12px; font-size: 22px; font-weight: bold; text-align: left; margin-bottom: 15px; cursor: pointer; }
        .feedback { font-weight: bold; display: block; margin-top: 20px; font-size: 28px; text-align: center; }
        .correct { color: #39ff14; } .wrong { color: #ff0033; }
    </style>
</head>
<body>
<div id="splash-screen"><div class="neon-ring"><img src="logo.png" class="logo-img" onerror="this.src='https://raw.githubusercontent.com/dogierez01/historic-people/main/logo.png'"></div><button onclick="startApp()" id="start-btn">START üèõÔ∏è</button></div>
<div id="header-area"><div id="app-title">üèõÔ∏è HISTORIC PEOPLE</div><div style="display:flex; justify-content:center;"><button id="btn-listen" class="toggle-btn active" onclick="setMode('listen')">üéß Listen</button><button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button></div><div id="audio-bar"><audio id="player" controls controlsList="nodownload"></audio><button id="btn-snail" onclick="toggleSnail()">üêå</button></div></div>
<div id="content-area"><input type="text" id="search" style="width:100%; padding:15px; font-size:18px; border-radius:12px; border:1px solid #333; background:#1e1e1e; color:white; margin-bottom:20px; box-sizing:border-box;" placeholder="Search hero..." onkeyup="filterList()"><div id="list"></div></div>
<div id="modal"><button id="close-btn" onclick="closeModal()">‚úï</button><div id="modal-content"><div id="view-listen"><div id="story-text"></div></div><div id="view-quiz" style="display:none;"><h2 id="quiz-title" style="text-align:center; font-size: 36px; margin-bottom: 30px;"></h2><div id="quiz-area"></div></div></div></div>
<script>
    const db = [
        {
            title: "Alexander the Great", fileKey: "alexander the great",
            text: "Alexander was born in 356 BC in Pella, the capital of Macedon. His mother, Olympia, was a strong and mysterious woman. She prayed to snakes and kept many of them in the palace. Alexander grew up with these snakes. Poisonous snakes bit him, so his body became strong against poison. His father, King Philip II, was a very strict ruler. One night, he punished Alexander very badly. This difficult event helped make Alexander a fearless and strong man. Even as a young man, Alexander was special. He did not have a beard. He ordered all his soldiers to shave their faces, too. This rule for soldiers is still used today. He was a student of the famous teacher Aristotle. He learned about war and how to lead an army. He became a commander when he was still a teenager. Alexander wanted to conquer the whole world. He took control of many huge lands like Persia and Egypt. He even traveled as far as India. His army grew bigger and stronger. However, great power brought danger. When he was at the River Indus, his own generals turned against him. They poisoned him because they were tired of fighting. They wanted to stop and return to their homes and families.",
            mcq: [{q:"Why was Alexander's body resistant to poison?", options:["Training", "Bitten by palace snakes", "Tea"], a:1},{q:"What custom did he establish?", options:["Uniforms", "Shaving faces", "Diet"], a:1},{q:"Who was his tutor?", options:["Plato", "Aristotle", "Socrates"], a:1},{q:"Generals turn-on point?", options:["Indus River", "Nile", "Rome"], a:0},{q:"Poisoning reason?", options:["Gold", "Fatigue/Want home", "Spy"], a:1}]
        },
        {
            title: "Baltacƒ± Mehmet Pasha", fileKey: "baltaci mehmet",
            text: "Baltacƒ± Mehmet Pasha was an Ottoman grand vizier in the early 18th century. He is best known for his role in the Prut War between the Ottoman Empire and Russia in 1711. At that time, Russia was growing stronger under Tsar Peter the Great. The Ottomans, with the help of the Crimean Tatars, marched to stop them. Baltacƒ± Mehmet Pasha led the Ottoman army to the Prut River, where they surrounded the Russian forces. The Russians were trapped, hungry, and weak. It seemed that the Ottomans were ready for a great victory. Although the army had the chance to destroy the Russians, Baltacƒ± Mehmet Pasha accepted peace. With the Treaty of Prut, Russia gave back the city of Azov and promised to stay away from Ottoman lands. Peter the Great and his army were allowed to leave safely. Some people praised Baltacƒ± Mehmet Pasha for avoiding more bloodshed. Others blamed him for not using the chance to defeat Russia completely. After this, his career lost strength, but the Treaty of Prut remained an important event in Ottoman history.",
            mcq: [{q:"Russian Tsar?", options:["Ivan IV", "Peter the Great", "Nicholas"], a:1},{q:"Treaty city?", options:["Azov", "Istanbul", "Moscow"], a:0},{q:"Ottoman allies?", options:["British", "Crimean Tatars", "French"], a:1},{q:"Russian condition?", options:["Strong", "Trapped/Weak", "Armed"], a:1},{q:"Result?", options:["Sultan", "Lost career strength", "Victory"], a:1}]
        },
        {
            title: "Baybars", fileKey: "baybars",
            text: "Baybars was born in Central Asia around 1223. When he was a young boy, enemies captured him and sold him as a slave. He traveled to Egypt to become a Mamluk. Mamluks were special soldier-slaves who went to strict military schools to learn fighting. Baybars trained very hard with horses and weapons. He was smart and strong, so he quickly became an important commander. At this time, a dangerous army called the Mongols was attacking the Middle East. They destroyed many cities and never lost a big battle. In 1260, the Mongols tried to enter Egypt. Baybars met them at a place called Ain Jalut. He used a clever plan to win. He led a small attack and then pretended to run away in fear. The Mongols chased him into a valley without looking carefully. Suddenly, the rest of the Mamluk army appeared from their hiding places. The trap worked perfectly, and they defeated the Mongol army. This victory was very important because it stopped the Mongols from taking the region. Soon after, Baybars became the Sultan of Egypt and Syria. He was a good ruler. He built bridges, canals, and roads to help people travel. He also made a fast mail system using horses. Today, history remembers Baybars as a great leader who protected his people.",
            mcq: [{q:"Mamluks were?", options:["Priests", "Soldier-slaves", "Merchant"], a:1},{q:"Defeated force?", options:["Crusaders", "Romans", "Mongols"], a:2},{q:"Battle site?", options:["Ain Jalut", "Cairo", "Paris"], a:0},{q:"Infrastructure?", options:["Pyramids", "Bridges/Roads", "Castles"], a:1},{q:"Mail system?", options:["Birds", "Horses", "Camel"], a:1}]
        },
        {
            title: "Boudica", fileKey: "boudica",
            text: "Boudica was a famous warrior queen in Britain during the first century. At that time, the Roman Empire ruled parts of Britain. The Celtic tribes wanted their freedom. Roman rulers treated the Celtic people harshly. After Boudica's husband, King Prasutagus, died, the Romans took his lands and property. They beat Boudica and attacked her daughters. These cruel actions made Boudica very angry. She decided to fight against Roman rule. Boudica gathered warriors from different Celtic tribes. She became their leader. They attacked Roman towns and forts across eastern Britain. Their most important victories destroyed the cities of Camulodunum, Londinium, and Verulamium. The Roman governor Suetonius led a large army to stop Boudica. At the final battle in 61 AD, the Roman army defeated Boudica's forces, although her army was much larger. The exact details of Boudica's death remain unknown. Some stories say she got ill and died. Other stories say she committed suicide to avoid capture.",
            mcq: [{q:"Tribal group?", options:["Vikings", "Celtic", "Romans"], a:1},{q:"Rebellion trigger?", options:["Tax", "Family mistreatment", "Land"], a:1},{q:" Londinium status?", options:["Destroyed", "Saved", "Hidden"], a:0},{q:"Roman governor?", options:["Nero", "Suetonius", "Caesar"], a:1},{q:"Final result?", options:["Boudica won", "Romans defeated larger army", "Exile"], a:1}]
        },
        {
            title: "Cezzar Ahmed Pasha", fileKey: "cezzar ahmed",
            text: "Cezzar Ahmed Pasha was the Ottoman governor of Acre, a fortress city on the eastern Mediterranean coast. He became famous in 1799, when Napoleon Bonaparte, after conquering Egypt, marched into Syria and attacked Acre. Napoleon was one of the most brilliant generals of his time. He believed Acre would open the road for him to enter Anatolia and perhaps challenge the Ottoman Empire itself. With modern cannons and a strong army, he began a long siege. Although Napoleon‚Äôs army was powerful and had won many victories before, Acre did not fall. Cezzar Ahmed Pasha defended the city with courage and discipline. He was supported by British ships under Admiral Sidney Smith, who gave him weapons and naval help. For two months, Napoleon‚Äôs forces tried again and again, but the walls of Acre resisted. At last, Napoleon abandoned the siege and returned to Egypt. This failure damaged his reputation and stopped his dreams in the East. Cezzar Ahmed Pasha became a hero of the Ottoman Empire, remembered as the man who stopped Napoleon at the gates of Acre.",
            mcq: [{q:"Who attacked Acre?", options:["Peter", "Napoleon", "Eugene"], a:1},{q:"Naval help?", options:["British", "Russian", "French"], a:0},{q:" Napoleon goal?", options:["Gold", "Enter Anatolia", "Build palace"], a:1},{q:"Siege length?", options:["1 week", "2 months", "2 years"], a:1},{q:" Napoleon status?", options:["Crowned", "Reputation damaged", "Won"], a:1}]
        },
        {
            title: "El Cid", fileKey: "el cid",
            text: "Rodrigo Diaz de Vivar was born in 1043 near Burgos in Christian Spain. His nickname, 'El Cid,' comes from the Arabic word El Seyit, meaning respected. He grew up as a skilled warrior and served King Sancho II of Castile. He supported the new ruler, King Alfonso VI. But political fights soon made him lose favor. He was accused of treachery and sent into exile. Although he had to leave his king, Rodrigo gathered loyal soldiers and fought to survive. He often worked with Muslim rulers and fought for them when it helped his cause. His respect for Muslim soldiers and leaders made him different from other Christian knights of his time. The most important moment in his life came in 1094, when he took the city of Valencia. Many Muslim families still lived there, and Rodrigo let them stay in the city under his rule. He kept peace with nearby Muslim states and sometimes hired Muslim soldiers to fight for him. His skill in battle and understanding of Muslim customs helped him keep Valencia safe from both Christian and Muslim enemies. Rodrigo continued to defend the city until he died in 1099. His life shows that his Islamic connections, alliances, and respect for Muslim culture were important for his success.",
            mcq: [{q:"Name meaning?", options:["Sword", "Respected", "King"], a:1},{q:"City 1094?", options:["Madrid", "Valencia", "Granada"], a:1},{q:"Exile cause?", options:["Treachery", "Defeat", "Old age"], a:0},{q:"Unique trait?", options:["No armor", "Respect for Muslim culture", "Sailor"], a:1},{q:"Service?", options:["Only Christians", "Often Muslim rulers", "No one"], a:1}]
        },
        {
            title: "Fahrettin Pasha", fileKey: "fahrettin",
            text: "Fahrettin Pasha, known as the 'Desert Tiger,' was one of the bravest commanders of the Ottoman Empire. During World War I, in 1916, he was sent to defend the holy city of Medina. His mission was to protect the city against the Arab revolt supported by the British. The famous British spy, Lawrence of Arabia, destroyed the Hejaz Railway and cut Medina off from the world. Food and water became very scarce. Soldiers and people even ate locusts to survive. Still, Fahrettin Pasha never gave up. He sent the holy relics to Istanbul for safety and refused to surrender, saying: 'I will not lower the Turkish flag with my own hands!'. Even after the war ended, he resisted, but was finally forced to give up by his own officers. As he left Medina, he cried: 'O Messenger of God, they are taking me by force!'. Later, he was sent into exile in Egypt and Malta. In 1921, he was freed and joined the Turkish War of Independence. After victory, he became the first ambassador of the new Republic of Turkey in Afghanistan. Fahrettin Pasha died in 1948, but his courage, faith, and love for his country are never forgotten.",
            mcq: [{q:"Nickname?", options:["Iron Lion", "Desert Tiger", "Hero"], a:1},{q:"Survival food?", options:["Bread", "Locusts", "Hide"], a:1},{q:"Railway destroyer?", options:["Lawrence of Arabia", "Townshend", "Smith"], a:0},{q:"Relics sent?", options:["Cairo", "Istanbul", "Mecca"], a:1},{q:"Ambassador to?", options:["Russia", "Afghanistan", "Malta"], a:1}]
        },
        {
            title: "Gavrilo Princip", fileKey: "gavrilo princip",
            text: "Gavrilo Princip was a young Serbian student whose assassination of Archduke Franz Ferdinand in Sarajevo (1914) started World War I. Born in 1894, he wanted freedom for Slavic peoples. The Archduke's car made a wrong turn and stopped right in front of him. Princip shot both the Archduke and his wife. Caught immediately, he avoided the death penalty because he was under 20. He died in prison in 1918. History debates him as a terrorist or a patriot.",
            mcq: [{q:"Origin?", options:["Austria", "Serbia", "Bosnia"], a:1},{q:"Car error?", options:["Broke", "Wrong turn", "Traffic"], a:1},{q:"War triggered?", options:["WWII", "WWI", "Crimean"], a:1},{q:"Penalty?", options:["Death", "Under 20 exemption", "Exile"], a:1},{q:"Victim?", options:["Franz Ferdinand", "Peter", "King"], a:0}]
        },
        {
            title: "Gazi Osman Pasha", fileKey: "gazi osman",
            text: "Gazi Osman Pasha defended Plevna, Bulgaria in 1877 during the Russo-Turkish War. Despite a smaller army, he used clever trenches to resist for 5 months. Captured after a final attack in December, he was respected by the Russians. He returned to Istanbul as a hero with the title 'Gazi.'",
            mcq: [{q:"War?", options:["Crimean", "Russo-Turkish", "Balkan"], a:1},{q:"Defense site?", options:["Plevna", "Sofia", "Varna"], a:0},{q:"Duration?", options:["5 months", "1 year", "2 weeks"], a:0},{q:"Russian treat?", options:["Cruel", "Dignity/Respect", "Ignore"], a:1},{q:"Title?", options:["Sultan", "Gazi", "Vizier"], a:1}]
        },
        {
            title: "Halil Pasha", fileKey: "halil",
            text: "At the Siege of Kut al-Amara (1915-1916), Halil Pasha surrounded 13,000 British soldiers in Mesopotamia (Iraq). After 147 days of hunger and disease, General Townshend surrendered in April 1916. It was a massive Ottoman victory and a major British defeat in WWI.",
            mcq: [{q:"Location?", options:["Turkey", "Iraq", "Egypt"], a:1},{q:"General?", options:["Smith", "Townshend", "Lawrence"], a:1},{q:"Days?", options:["47", "147", "300"], a:1},{q:"Result?", options:["British won", "Ottoman victory", "Peace"], a:1},{q:"War?", options:["WWII", "WWI", "Prut"], a:1}]
        },
        {
            title: "isabelle & ferdinand", fileKey: "isabelle & ferdinand",
            text: "The Catholic Monarchs united Spain in 1469. In 1492, they captured Granada, finishing the Reconquista. They expelled Muslims and Jews and supported Columbus's voyage, creating Spain's empire but leaving a legacy of religious removal.",
            mcq: [{q:"Granada year?", options:["1453", "1492", "1711"], a:1},{q:"Explorer?", options:["Marco Polo", "Columbus", "Vasco"], a:1},{q:"Struggle?", options:["Crusades", "Reconquista", "Armada"], a:1},{q:"Non-Christian result?", options:["Pay tax", "Convert/Leave", "Offices"], a:1},{q:"Union year?", options:["1469", "1492", "1500"], a:0}]
        },
        {
            title: "Jacobi", fileKey: "jacobi",
            text: "Jacobi (Yakup), a Jewish physician from Genoa, served Mehmed II. Studied medicines and poisons in Italy for Venice/Vatican. In 1481, Mehmed died after Yakup gave him medicine. Life ended in mystery; suspicion of being a Venetian spy remained.",
            mcq: [{q:"Palace name?", options:["Mehmed", "Yakup", "Joseph"], a:1},{q:"Role?", options:["Architect", "Physician", "Advisor"], a:1},{q:"Died Sultan?", options:["Murad", "Mehmed II", "Ismail"], a:1},{q:"Masters?", options:["British", "Venice/Vatican", "Spain"], a:1},{q:"Origin?", options:["Genoa", "Rome", "Cairo"], a:0}]
        },
        {
            title: "Koca Sinan Pasha", fileKey: "koca sinan",
            text: "Led the 'Bridge Disaster' at Giurgiu in 1595. Treasure carts delayed the Danube crossing. Michael the Brave destroyed the bridge, trapping and killing thousands of Akƒ±ncƒ± riders, who never recovered their strength.",
            mcq: [{q:"Unit destroyed?", options:["Janissary", "Akƒ±ncƒ±", "Mamluk"], a:1},{q:"Delay?", options:["Rain", "Treasure carts", "Broken wheels"], a:1},{q:"Enemy?", options:["Michael the Brave", "Eugene", "Peter"], a:0},{q:"Bridge location?", options:["Giurgiu", "Plevna", "Sofia"], a:0},{q:"Result?", options:["Stronger", "Never recovered", "Exiled"], a:1}]
        },
        {
            title: "mezamorta", fileKey: "mezamorta",
            text: "Mezamorta H√ºseyin Pasha ('half-dead') fired the French consul from a cannon in 1683 to stop an attack on Algiers. He won back Chios from Venice and modernized the navy with sailing kalyons before dying in 1701.",
            mcq: [{q:"Name meaning?", options:["Sea Lion", "Half-dead", "Warrior"], a:1},{q:"French stop?", options:["Burning fleet", "Consul from cannon", "Surrender"], a:1},{q:"Ship change?", options:["Rowing to kalyons", "Iron", "Small to large"], a:0},{q:"Winner against?", options:["French", "Venetians", "Spanish"], a:1},{q:"Start?", options:["Pirate/Sailor", "Farmer", "Prince"], a:0}]
        },
        {
            title: "Mir Ali Beg", fileKey: "mir ali beg",
            text: "Mir Ali Beg fought Portuguese trade control in Mombasa in the late 1500s. In 1589, Portuguese and cannibal Zimba warriors attacked; Ottoman soldiers were caught and eaten. Beg died a prisoner in Portugal.",
            mcq: [{q:"African region?", options:["North", "East", "India"], a:1},{q:"Land attacker?", options:["Zimba cannibals", "Vikings", "Greeks"], a:0},{q:"Beg's fate?", options:["Escaped", "Prisoner in Portugal", "Sultan"], a:1},{q:"Port?", options:["Mombasa", "Cairo", "Algiers"], a:0},{q:"Region?", options:["North Africa", "East Africa", "India"], a:1}]
        },
        {
            title: "Mustafa 'the second'", fileKey: "mustafa the second",
            text: "Mustafa II led a disaster at Tisa River in 1695. Spies told Prince Eugene of Savoy his location. Pashas delayed for money at the bridge. The bridge broke, 30,000 died, leading to the Treaty of Karlowitz and massive land loss.",
            mcq: [{q:"General?", options:["Smith", "Prince Eugene", "Townshend"], a:1},{q:"Delay?", options:["Storm", "Pashas/Money", "Snow"], a:1},{q:"Losses?", options:["3,000", "30,000", "100,000"], a:1},{q:"Treaty?", options:["Prut", "Karlowitz", "Acre"], a:1},{q:"Result?", options:["New army", "Never led again", "Resigned"], a:1}]
        },
        {
            title: "ragnar lodbrok", fileKey: "ragnar lodbrok",
            text: "Ragnar Lodbrok was a 9th-century Viking leader who attacked Paris in 845 and was paid silver to leave. Captured by King Aella of Northumbria, he died in a snake pit. His sons later killed the King for revenge.",
            mcq: [{q:"Name?", options:["Hairy pants", "Fast boat", "King"], a:0},{q:"City silver?", options:["London", "Paris", "Rome"], a:1},{q:"Death?", options:["Battle", "Snake pit", "Old age"], a:1},{q:"Sons group?", options:["Heathen Army", "Legion", "Akƒ±ncƒ±"], a:0},{q:"Revenge on?", options:["Nero", "King Aella", "Eugene"], a:1}]
        },
        {
            title: "Rob Roy", fileKey: "rob roy",
            text: "Rob Roy MacGregor (1671-1734) was the 'Scottish Robin Hood.' A cattle farmer who became an outlaw after a noble took his land. He stole from the rich to give to the poor while hiding in the Highlands mountains.",
            mcq: [{q:"Job?", options:["Soldier", "Cattle farmer", "Sailor"], a:1},{q:"Nickname?", options:["Scot", "Robin Hood", "King"], a:1},{q:"Outlaw cause?", options:["Stole crown", "Lost land/Debt", "Old age"], a:1},{q:"Hideout?", options:["London", "Highlands", "Cave"], a:1},{q:"Clan?", options:["MacGregor", "Stewart", "Aella"], a:0}]
        },
        {
            title: "salahuddin eyyubi", fileKey: "salahuddin eyyubi",
            text: "Salahuddin (Saladin) born in Tikrit (1137), united Muslim lands to defend against Crusaders. Won at Hattin in 1187 and captured Jerusalem fairly. He died in 1193, remembered as a hero of respect.",
            mcq: [{q:"Born?", options:["Cairo", "Tikrit", "Baghdad"], a:1},{q:"1187 victory?", options:["Jalut", "Hattin", "Plevna"], a:1},{q:"City?", options:["Rome", "Jerusalem", "Paris"], a:1},{q:"Trait?", options:["Cruelty", "Fairness/Respect", "Gold"], a:1},{q:"Goal?", options:["Conquer Rome", "Unite Muslims", "Walls"], a:1}]
        },
        {
            title: "Skanderbeg", fileKey: "skanderbeg",
            text: "Gjergj Kastrioti (Skanderbeg) is Albania's hero. Soldier for Ottomans who revolted in 1443. For 20 years, he protected Albania using knowledge of Ottoman tactics. Pope called him 'Athlete of Christ.'",
            mcq: [{q:"Real name?", options:["Osman", "Gjergj Kastrioti", "Mehmet"], a:1},{q:"Flag symbol?", options:["Lion", "Double-headed eagle", "Star"], a:1},{q:"Resistance time?", options:["2", "20", "50 years"], a:1},{q:"Pope title?", options:["Athlete of Christ", "Saint", "King"], a:0},{q:"Trained?", options:["Rome", "Ottoman Empire", "Paris"], a:1}]
        },
        {
            title: "Spartacus", fileKey: "spartacus",
            text: "Spartacus led 70 gladiators escaping from school in 73 BC using kitchen knives. Hid at Mount Vesuvius and built a slave army. Defeated by Crassus in 71 BC, leading to 6,000 crucifixions along Appian Way.",
            mcq: [{q:"Origin?", options:["Rome", "Thrace", "Egypt"], a:1},{q:"Escape tool?", options:["Swords", "Kitchen knives", "Chains"], a:1},{q:"Hideout?", options:["Forum", "Mount Vesuvius", "Colosseum"], a:1},{q:"Defeated by?", options:["Caesar", "Crassus", "Napoleon"], a:1},{q:"Penalty?", options:["Crucified along road", "Free", "Exiled"], a:0}]
        },
        {
            title: "stefan dusan", fileKey: "stefan dusan",
            text: "Stefan Du≈°an built a strong Serbian Empire (1331-1355) taking parts of Macedonia and Greece. Tried to form a united Christian army against the Ottomans before his sudden death in 1355.",
            mcq: [{q:"Goal?", options:["Rome", "Constantinople", "London"], a:1},{q:"Threat?", options:["Vikings", "Ottomans", "British"], a:1},{q:"Alliance?", options:["France", "Pope/Venice", "Russia"], a:1},{q:"Post-death status?", options:["Stronger", "Weakened/Divided", "Stable"], a:1},{q:"Maritsa timing?", options:["34 years after death", "Immediately", "100 years"], a:0}]
        },
        {
            title: "Taras Bulba", fileKey: "taras bulba",
            text: "Cossack warrior in 1500s Ukraine fighting Polish rule. Killed son Andriy for betraying them for a Polish woman. Son Ostap killed in Warsaw. Taras was eventually killed, remembered as hero of tradition.",
            mcq: [{q:"Fought who?", options:["Russia", "Poland", "Germany"], a:1},{q:"Why kill son?", options:["Stealing", "Enemy love betrayal", "Cowardice"], a:1},{q:"Ostap killed where?", options:["Kyiv", "Warsaw", "London"], a:1},{q:"Line?", options:["Go", "I gave life, I take it", "I hate you"], a:1},{q:"Group?", options:["Viking", "Cossack", "Mamluk"], a:1}]
        },
        {
            title: "tariq ibn ziyad", fileKey: "tariq ibn ziyad",
            text: "Muslim commander Tariq ibn Ziyad led 7,000 soldiers into Spain in 711 AD. Burned boats at Gibraltar (Jabal Tariq) to show no retreat. Defeated King Roderick at Guadalete, starting 800y of Muslim rule.",
            mcq: [{q:"Modern name?", options:["Madrid", "Gibraltar", "Alps"], a:1},{q:"Boat order?", options:["Build wall", "Burn them", "Sell"], a:1},{q:"Defeated King?", options:["Philip", "Roderick", "Alexander"], a:1},{q:"Rule length?", options:["8", "800", "8,000 years"], a:1},{q:"Crossing year?", options:["711 AD", "1000", "1492"], a:0}]
        },
        {
            title: "timur", fileKey: "timur",
            text: "Central Asian conqueror (1336) who captured Ottoman Sultan Bayezid at Ankara (1402) by turning his soldiers. Died in 1405 planning to invade China. One of history's greatest conquerors.",
            mcq: [{q:"Sultan captured?", options:["Mehmed", "Bayezid", "Mustafa"], a:1},{q:"Ankara tactic?", options:["Cannons", "Switching soldiers", "Night"], a:1},{q:"Invade target?", options:["Egypt", "China", "India"], a:1},{q:"Died year?", options:["1336", "1405", "1492"], a:1},{q:"Captured Sultan fate?", options:["Freed", "Died prisoner", "Escaped"], a:1}]
        },
        {
            title: "Tomyris", fileKey: "tomyris",
            text: "Queen Tomyris of Massagetae defeated Cyrus the Great in 530 BC. Cyrus tricked her son with wine; he died. She avenged him by cutting off Cyrus's head and putting it in a bag of blood.",
            mcq: [{q:"King defeated?", options:["Xerxes", "Cyrus the Great", "Darius"], a:1},{q:"Trick?", options:["Wine and food", "Fake peace", "Spies"], a:0},{q:"Head fate?", options:["Sent to Rome", "Bag of blood", "Buried"], a:1},{q:"Son death?", options:["Battle", "Suicide/Capture", "Old age"], a:1},{q:"Location?", options:["Egypt", "Central Asia", "France"], a:1}]
        },
        {
            title: "Turgut Reis", fileKey: "turgut reis",
            text: "Muƒüla-born sailor who became an Ottoman admiral. Prisoner of Genoese for 3 years. Moved ships overland at Djerba. Governor of Tripoli, died at Siege of Malta 1565.",
            mcq: [{q:"Rescuer?", options:["Suleiman", "Barbarossa", "Yusuf"], a:1},{q:"Djerba escape?", options:["Swim", "Overland ships", "Storm"], a:1},{q:"Where died?", options:["Vienna", "Malta", "Acre"], a:1},{q:"Prisoner time?", options:["1 month", "3 years", "10 years"], a:1},{q:"Ally?", options:["Napoleon", "Barbarossa", "Gessler"], a:1}]
        },
        {
            title: "vlad dracula", fileKey: "vlad dracula",
            text: "Vlad the Impaler of Wallachia was an Ottoman hostage as a child. Later used scorched earth/night attacks against Mehmed II. Head sent to Mehmed as proof in 1476.",
            mcq: [{q:"Dracula meaning?", options:["Impaler", "Son of dragon", "King"], a:1},{q:"Hostage where?", options:["Rome", "Ottoman Empire", "Paris"], a:1},{q:"Brother name?", options:["Radu", "Mustafa", "Stefan"], a:0},{q:"Tactic?", options:["Scorched earth", "Wall", "Bribe"], a:0},{q:"Head to?", options:["Philip", "Mehmed II", "Pope"], a:1}]
        },
        {
            title: "William Tell", fileKey: "william tell",
            text: "Swiss hero who shot an apple off his son's head under Gessler's orders. Escaped a storm, killed Gessler, and inspired rebellion for Swiss independence.",
            mcq: [{q:"Target?", options:["Bird", "Apple on son's head", "Target"], a:1},{q:"2nd arrow for?", options:["Son", "Gessler", "King"], a:1},{q:"Escape method?", options:["Swim", "Steering in storm", "Bribe"], a:1},{q:"On pole?", options:["Sword", "Hat", "Crown"], a:1},{q:"Nation?", options:["Scotland", "Switzerland", "Albania"], a:1}]
        },
        {
            title: "William Wallace", fileKey: "william wallace",
            text: "Scottish hero who rebelled against Edward I after English soldiers killed his wife. Won at Stirling Bridge (1297) but executed in London 1305.",
            mcq: [{q:"English King?", options:["Henry", "Edward I", "Richard"], a:1},{q:"Victory?", options:["Falkirk", "Stirling Bridge", "London"], a:1},{q:"Trigger?", options:["Gold", "Wife killed", "Taxes"], a:1},{q:"Execution city?", options:["Edinburgh", "London", "Paris"], a:1},{q:"Successor?", options:["Bruce", "Rob Roy", "Eugene"], a:0}]
        },
        {
            title: "Yusuf Pasha", fileKey: "yusuf pasha",
            text: "1788 victory over Austrians who destroyed themselves in Romania due to confusion and alcohol. Misheard 'Halt' as 'Allah' and fired on friends.",
            mcq: [{q:"Cause?", options:["Plague", "Alcohol/Confusion", "Storm"], a:1},{q:"Mistaken word?", options:["Halt!", "Attack!", "Run!"], a:0},{q:"Army size?", options:["10,000", "100,000", "500,000"], a:1},{q:"Effort?", options:["Siege", "None", "1-day fight"], a:1},{q:"Location?", options:["Turkey", "Romania", "Germany"], a:1}]
        }
    ];

    let currentMode = 'listen'; let isSlowMode = false; let repoFiles = [];
    const player = document.getElementById('player'); const list = document.getElementById('list');

    function norm(str) { 
        if(!str) return "";
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().replace(" and ", " & ").trim(); 
    }

    async function fetchFiles() {
        try {
            const res = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            const data = await res.json();
            repoFiles = data.map(f => f.name);
            renderList();
        } catch (e) { renderList(); }
    }
    fetchFiles();

    function startApp() { document.getElementById('splash-screen').style.display = 'none'; }

    function renderList() {
        const sorted = [...db].sort((a, b) => a.title.localeCompare(b.title));
        list.innerHTML = sorted.map((item) => {
            const originalIndex = db.findIndex(x => x.title === item.title);
            if (currentMode === 'listen') {
                return `<div class="card" data-name="${item.title.toLowerCase()}">
                    <div class="card-title">${item.title}</div>
                    <button class="listen-btn btn-uk" onclick="playHP(${originalIndex},'uk')">üá¨üáß 1. UK English</button>
                    <button class="listen-btn btn-us-f" onclick="playHP(${originalIndex},'female')">üá∫üá∏ 2. US Female</button>
                    <button class="listen-btn btn-us-m" onclick="openRead(${originalIndex})">üìñ 3. Read & Listen (US Male)</button>
                </div>`;
            } else {
                return `<button class="quiz-menu-btn" data-name="${item.title.toLowerCase()}" onclick="openQuiz(${originalIndex})">üß† ${item.title} Quiz</button>`;
            }
        }).join('');
    }

    function playHP(idx, type) {
        const item = db[idx];
        const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
        let key = norm(item.fileKey); 
        let file = repoFiles.find(f => {
            const nf = norm(f);
            if (type === 'uk') return nf.includes(key) && nf.includes('uk');
            if (type === 'female') return nf.includes(key) && nf.includes('us') && nf.includes('female');
            if (type === 'male') return nf.includes(key) && nf.includes('us') && nf.includes('male') && !nf.includes('female');
            return false;
        });
        if (file) { player.src = BASE + encodeURIComponent(file); player.playbackRate = isSlowMode ? 0.8 : 1.0; player.play(); }
    }

    function openRead(i) {
        document.getElementById('story-text').innerText = db[i].text;
        document.getElementById('view-listen').style.display = 'block';
        document.getElementById('view-quiz').style.display = 'none';
        document.getElementById('modal').style.display = 'block';
        playHP(i, 'male');
    }

    function openQuiz(i) {
        document.getElementById('quiz-title').innerText = db[i].title + " MCQ Quiz";
        document.getElementById('quiz-area').innerHTML = db[i].mcq.map((q, qIdx) => `
            <div class="quiz-q"><div class="q-text">Q${qIdx+1}: ${q.q}</div>
            ${q.options.map((opt, oIdx) => `<button class="mcq-option" onclick="checkMCQ(this, ${q.a}, ${oIdx})">${opt}</button>`).join('')}
            <div class="feedback"></div></div>`).join('');
        document.getElementById('view-listen').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('modal').style.display = 'block';
    }

    function checkMCQ(btn, correctIdx, userIdx) {
        const parent = btn.parentElement;
        const fb = parent.querySelector('.feedback');
        if (correctIdx === userIdx) {
            fb.innerHTML = "<span class='correct'>‚úì CORRECT!</span>";
            btn.style.backgroundColor = "#2f9e44";
        } else {
            fb.innerHTML = "<span class='wrong'>‚úó WRONG!</span>";
            btn.style.backgroundColor = "#d63031";
        }
        parent.querySelectorAll('.mcq-option').forEach(b => b.disabled = true);
    }

    function setMode(m) { 
        currentMode = m; 
        document.getElementById('btn-listen').className = (m==='listen')?'toggle-btn active':'toggle-btn';
        document.getElementById('btn-quiz').className = (m==='quiz')?'toggle-btn active':'toggle-btn';
        renderList(); 
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
    function toggleSnail() { isSlowMode = !isSlowMode; player.playbackRate = isSlowMode ? 0.8 : 1.0; document.getElementById('btn-snail').classList.toggle('active'); }
    function filterList() {
        const val = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.card, .quiz-menu-btn').forEach(el => {
            el.style.display = el.getAttribute('data-name').includes(val) ? 'block' : 'none';
        });
    }
</script>
</body>
</html>
