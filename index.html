<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Historic People - Master Edition</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .neon-ring { width: 350px; height: 350px; border-radius: 50%; border: 10px solid #ff0000; box-shadow: 0 0 40px #ff0000; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; margin-bottom: 40px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes pulse { 0% { box-shadow: 0 0 20px #ff0000; } 50% { box-shadow: 0 0 60px #ff0000; } 100% { box-shadow: 0 0 20px #ff0000; } }
        #start-btn { padding: 25px 90px; font-size: 28px; font-weight: 900; color: white; background: linear-gradient(135deg, #d63031, #ff0000); border: none; border-radius: 60px; cursor: pointer; text-transform: uppercase; }
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #app-title { font-size: 24px; font-weight: 900; color: #fff; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .toggle-btn { padding: 15px 40px; border-radius: 35px; border: none; font-weight: 900; cursor: pointer; color: #888; background: #222; margin: 0 10px; font-size: 18px; }
        .toggle-btn.active { color: #fff; background: #007AFF; }
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 75%; outline: none; }
        #btn-snail { background: #111; color: white; border: 2px solid #ff0033; font-size: 28px; padding: 5px 20px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { border-color: #39ff14; box-shadow: 0 0 10px #39ff14; }
        #content-area { padding: 20px; padding-top: 240px; max-width: 700px; margin: 0 auto; }
        .card { background: #1e1e1e; padding: 25px; margin-bottom: 30px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 30px; font-weight: 900; color: #fff; margin-bottom: 25px; text-align: center; border-bottom: 1px solid #444; padding-bottom: 15px; }
        .listen-btn { padding: 22px; border-radius: 12px; border: none; cursor: pointer; font-weight: 900; font-size: 22px; color: white; display: block; width: 100%; margin-bottom: 15px; }
        .btn-uk { background: #d63031; } .btn-us-f { background: #e056fd; } .btn-us-m { background: #007AFF; }
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 3000; overflow-y: auto; }
        #modal-content { padding: 45px; max-width: 900px; margin: 0 auto; padding-top: 110px; }
        #close-btn { position: fixed; top: 30px; right: 30px; font-size: 40px; cursor: pointer; color: white; z-index: 3100; background: #ff0033; width: 70px; height: 70px; border-radius: 50%; border: none; }
        #story-text { font-size: 32px; line-height: 1.7; color: #f0f0f0; text-align: justify; font-weight: 500; white-space: pre-wrap; }
        .quiz-menu-btn { display: block; width: 100%; padding: 30px; background: #1e1e1e; border: 2px solid #333; color: white; font-weight: 900; border-radius: 15px; margin-bottom: 45px; cursor: pointer; text-align: left; font-size: 26px; min-height: 110px; }
        .mcq-option { width: 100%; padding: 25px; background: #1e1e1e; border: 2px solid #333; color: #fff; border-radius: 12px; font-size: 24px; font-weight: bold; text-align: left; margin-bottom: 20px; cursor: pointer; }
        .feedback { font-weight: bold; display: block; margin-top: 25px; font-size: 30px; text-align: center; }
    </style>
</head>
<body>
<div id="splash-screen"><div class="neon-ring"><img src="logo.png" class="logo-img" onerror="this.src='https://raw.githubusercontent.com/dogierez01/historic-people/main/logo.png'"></div><button onclick="startApp()" id="start-btn">START üèõÔ∏è</button></div>
<div id="header-area"><div id="app-title">üèõÔ∏è HISTORIC PEOPLE</div><div style="display:flex; justify-content:center;"><button id="btn-listen" class="toggle-btn active" onclick="setMode('listen')">üéß Listen</button><button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button></div><div id="audio-bar"><audio id="player" controls></audio><button id="btn-snail" onclick="toggleSnail()">üêå</button></div></div>
<div id="content-area"><input type="text" id="search" style="width:100%; padding:20px; font-size:22px; border-radius:15px; border:1px solid #333; background:#1e1e1e; color:white; margin-bottom:30px; box-sizing:border-box;" placeholder="Search hero..." onkeyup="filterList()"><div id="list"></div></div>
<div id="modal"><button id="close-btn" onclick="closeModal()">‚úï</button><div id="modal-content"><div id="view-listen"><div id="story-text"></div></div><div id="view-quiz" style="display:none;"><h2 id="quiz-title" style="text-align:center; font-size: 38px;"></h2><div id="quiz-area"></div></div></div></div>
<script>
const db = [
    { title: "Alexander the Great", fk: "alexander the great", text: "Alexander was born in 356 BC in Pella, the capital of Macedon. His mother, Olympia, was a strong and mysterious woman. She prayed to snakes and kept many of them in the palace. Alexander grew up with these snakes. Poisonous snakes bit him, so his body became strong against poison. His father, King Philip II, was a very strict ruler. One night, he punished Alexander very badly. This difficult event helped make Alexander a fearless and strong man. Even as a young man, Alexander was special. He did not have a beard. He ordered all his soldiers to shave their faces, too. This rule for soldiers is still used today. He was a student of the famous teacher Aristotle. He learned about war and how to lead an army. He became a commander when he was still a teenager. Alexander wanted to conquer the whole world. He took control of many huge lands like Persia and Egypt. He even traveled as far as India. His army grew bigger and stronger. However, great power brought danger. When he was at the River Indus, his own generals turned against him. They poisoned him because they were tired of fighting. They wanted to stop and return to their homes and families.", mcq: [{q:"How did palace snakes affect Alexander?", o:["They trained him", "He became resistant to poison", "They were his only friends"], a:1},{q:"What facial rule did he establish?", o:["Grow beards", "Shave faces", "Face tattoos"], a:1},{q:"Who was his famous teacher?", o:["Socrates", "Aristotle", "Plato"], a:1},{q:"Where generals turned on him?", o:["Indus River", "Nile", "Danube"], a:0},{q:"Why poisoned?", o:["Gold", "Fatigue/Want home", "Spying"], a:1}] },
    { title: "Baltacƒ± Mehmet Pasha", fk: "baltaci mehmet", text: "Baltacƒ± Mehmet Pasha was an Ottoman grand vizier in the early 18th century. He is best known for his role in the Prut War between the Ottoman Empire and Russia in 1711. At that time, Russia was growing stronger under Tsar Peter the Great. The Ottomans, with the help of the Crimean Tatars, marched to stop them. Baltacƒ± Mehmet Pasha led the Ottoman army to the Prut River, where they surrounded the Russian forces. The Russians were trapped, hungry, and weak. It seemed that the Ottomans were ready for a great victory. Although the army had the chance to destroy the Russians, Baltacƒ± Mehmet Pasha accepted peace. With the Treaty of Prut, Russia gave back the city of Azov and promised to stay away from Ottoman lands. Peter the Great and his army were allowed to leave safely. Some people praised Baltacƒ± Mehmet Pasha for avoiding more bloodshed. Others blamed him for not using the chance to defeat Russia completely. After this, his career lost strength, but the Treaty of Prut remained an important event in Ottoman history.", mcq: [{q:"Who was the Russian Tsar in 1711?", o:["Ivan IV", "Peter the Great", "Nicholas"], a:1},{q:"Returned city in treaty?", o:["Azov", "Istanbul", "Moscow"], a:0},{q:"Ottoman allies?", o:["British", "Crimean Tatars", "French"], a:1},{q:"Russian condition?", o:["Strong", "Trapped and weak", "Armed"], a:1},{q:"Career result?", o:["Sultan", "Lost strength", "Execution"], a:1}] },
    { title: "Baybars", fk: "baybars", text: "Baybars was born in Central Asia around 1223. When he was a young boy, enemies captured him and sold him as a slave. He traveled to Egypt to become a Mamluk. Mamluks were special soldier-slaves who went to strict military schools to learn fighting. Baybars trained very hard with horses and weapons. He was smart and strong, so he quickly became an important commander. At this time, a dangerous army called the Mongols was attacking the Middle East. They destroyed many cities and never lost a big battle. In 1260, the Mongols tried to enter Egypt. Baybars met them at a place called Ain Jalut. He used a clever plan to win. He led a small attack and then pretended to run away in fear. The Mongols chased him into a valley without looking carefully. Suddenly, the rest of the Mamluk army appeared from their hiding places. The trap worked perfectly, and they defeated the Mongol army. This victory was very important because it stopped the Mongols from taking the region. Soon after, Baybars became the Sultan of Egypt and Syria. He was a good ruler. He built bridges, canals, and roads to help people travel. He also made a fast mail system using horses. Today, history remembers Baybars as a great leader who protected his people.", mcq: [{q:"Mamluks were?", o:["Priests", "Soldier-slaves", "Merchant"], a:1},{q:"Defeated force?", o:["Crusaders", "Romans", "Mongols"], a:2},{q:"Battle site?", o:["Ain Jalut", "Cairo", "Paris"], a:0},{q:"Infrastructure?", o:["Pyramids", "Bridges/Roads", "Castles"], a:1},{q:"Mail system?", o:["Birds", "Horses", "Camel"], a:1}] },
    { title: "Boudica", fk: "boudica", text: "Boudica was a famous warrior queen in Britain during the first century. At that time, the Roman Empire ruled parts of Britain. The Celtic tribes wanted their freedom. Roman rulers treated the Celtic people harshly. After Boudica's husband, King Prasutagus, died, the Romans took his lands and property. They beat Boudica and attacked her daughters. These cruel actions made Boudica very angry. She decided to fight against Roman rule. Boudica gathered warriors from different Celtic tribes. She became their leader. They attacked Roman towns and forts across eastern Britain. Their most important victories destroyed the cities of Camulodunum, Londinium, and Verulamium. The Roman governor Suetonius led a large army to stop Boudica. At the final battle in 61 AD, the Roman army defeated Boudica's forces, although her army was much larger. The exact details of Boudica's death remain unknown. Some stories say she got ill and died. Other stories say she committed suicide to avoid capture.", mcq: [{q:"Tribal group?", o:["Vikings", "Celtic", "Romans"], a:1},{q:"Rebellion trigger?", o:["Tax", "Family mistreatment", "Land"], a:1},{q:"Londinium status?", o:["Destroyed", "Saved", "Hidden"], a:0},{q:"Governor who won?", o:["Nero", "Suetonius", "Caesar"], a:1},{q:"Final result?", o:["Boudica won", "Romans defeated larger army", "Exile"], a:1}] },
    { title: "Cezzar Ahmed Pasha", fk: "cezzar ahmed", text: "Cezzar Ahmed Pasha was the Ottoman governor of Acre, a fortress city on the eastern Mediterranean coast. He became famous in 1799, when Napoleon Bonaparte, after conquering Egypt, marched into Syria and attacked Acre. Napoleon was one of the most brilliant generals of his time. He believed Acre would open the road for him to enter Anatolia and perhaps challenge the Ottoman Empire itself. With modern cannons and a strong army, he began a long siege. Although Napoleon‚Äôs army was powerful and had won many victories before, Acre did not fall. Cezzar Ahmed Pasha defended the city with courage and discipline. He was supported by British ships under Admiral Sidney Smith, who gave him weapons and naval help. For two months, Napoleon‚Äôs forces tried again and again, but the walls of Acre resisted. At last, Napoleon abandoned the siege and returned to Egypt. This failure damaged his reputation and stopped his dreams in the East. Cezzar Ahmed Pasha became a hero of the Ottoman Empire, remembered as the man who stopped Napoleon at the gates of Acre.", mcq: [{q:"Attacker at Acre?", o:["Peter", "Napoleon", "Eugene"], a:1},{q:"Naval help?", o:["British", "Russian", "French"], a:0},{q:"Napoleon goal?", o:["Gold", "Anatolia access", "Build palace"], a:1},{q:"Siege length?", o:["1 week", "2 months", "2 years"], a:1},{q:"Napoleon status?", o:["Crowned", "Reputation damaged", "Won"], a:1}] },
    { title: "El Cid", fk: "el cid", text: "Rodrigo Diaz de Vivar was born in 1043 near Burgos in Christian Spain. His nickname, 'El Cid,' comes from the Arabic word El Seyit, meaning respected. He grew up as a skilled warrior and served King Sancho II of Castile. He supported the new ruler, King Alfonso VI. But political fights soon made him lose favor. He was accused of treachery and sent into exile. Although he had to leave his king, Rodrigo gathered loyal soldiers and fought to survive. He often worked with Muslim rulers and fought for them when it helped his cause. His respect for Muslim soldiers and leaders made him different from other Christian knights of his time. The most important moment in his life came in 1094, when he took the city of Valencia. Many Muslim families still lived there, and Rodrigo let them stay in the city under his rule. He kept peace with nearby Muslim states and sometimes hired Muslim soldiers to fight for him. His skill in battle and understanding of Muslim customs helped him keep Valencia safe from both Christian and Muslim enemies. Rodrigo continued to defend the city until he died in 1099. His life shows that his Islamic connections, alliances, and respect for Muslim culture were important for his success.", mcq: [{q:"Name meaning?", o:["Sword", "Respected", "King"], a:1},{q:"City 1094?", o:["Madrid", "Valencia", "Granada"], a:1},{q:"Exile cause?", o:["Treachery", "Defeat", "Old age"], a:0},{q:"Unique trait?", o:["No armor", "Respect for Muslim culture", "Sailor"], a:1},{q:"Valencia policy?", o:["Exiled Muslims", "Allowed them to stay", "Enslaved them"], a:1}] },
    { title: "Fahrettin Pasha", fk: "fahrettin", text: "Fahrettin Pasha, known as the 'Desert Tiger,' was one of the bravest commanders of the Ottoman Empire. During World War I, in 1916, he was sent to defend the holy city of Medina. His mission was to protect the city against the Arab revolt supported by the British. The famous British spy, Lawrence of Arabia, destroyed the Hejaz Railway and cut Medina off from the world. Food and water became very scarce. Soldiers and people even ate locusts to survive. Still, Fahrettin Pasha never gave up. He sent the holy relics to Istanbul for safety and refused to surrender, saying: 'I will not lower the Turkish flag with my own hands!'. Even after the war ended, he resisted, but was finally forced to give up by his own officers. As he left Medina, he cried: 'O Messenger of God, they are taking me by force!'. Later, he was sent into exile in Egypt and Malta. In 1921, he was freed and joined the Turkish War of Independence. After victory, he became the first ambassador of the new Republic of Turkey in Afghanistan. Fahrettin Pasha died in 1948, but his courage, faith, and love for his country are never forgotten.", mcq: [{q:"Nickname?", o:["Iron Lion", "Desert Tiger", "Hero"], a:1},{q:"Survival food?", o:["Bread", "Locusts", "Hide"], a:1},{q:"Railway destroyer?", o:["Lawrence of Arabia", "Townshend", "Smith"], a:0},{q:"Relics sent?", o:["Cairo", "Istanbul", "Mecca"], a:1},{q:"Ambassador to?", o:["Russia", "Afghanistan", "Malta"], a:1}] },
    { title: "Gavrilo Princip", fk: "gavrilo princip", text: "Gavrilo Princip was a young man from Serbia, born in 1894. He lived in Bosnia when it was ruled by the Austro-Hungarian Empire. As a student, he strongly wanted freedom for Slavic peoples. In 1914, something very important happened. Archduke Franz Ferdinand, the next leader of Austria-Hungary, visited Sarajevo. Princip and his friends from a secret group wanted to kill him. Their first plan with a bomb did not work. Later that day, Princip saw the Archduke's car by accident. The driver had made a wrong turn and stopped near him. Princip walked to the car and shot the Archduke and his wife. Both died from their injuries. The police caught Princip right away. Because he was under 20, he could not receive the death penalty. He was sent to prison, where he became sick and died in 1918. The killing of Archduke Franz Ferdinand started a major conflict. Austria-Hungary declared war on Serbia. This led other countries to join the fight, beginning the First World War. People still disagree about Gavrilo Princip today. Some call him a terrorist who caused a terrible war. Others see him as a patriot who fought for his people's freedom.", mcq: [{q:"Empire ruling youth?", o:["Ottoman", "Austro-Hungarian", "Russian"], a:1},{q:"Car error?", o:["Broke", "Wrong turn", "Traffic"], a:1},{q:"War triggered?", o:["WWII", "WWI", "Crimean"], a:1},{q:"Penalty?", o:["Death", "Under 20 exemption", "Exile"], a:1},{q:"Victim?", o:["Franz Ferdinand", "Peter", "King"], a:0}] },
    { title: "Gazi Osman Pasha", fk: "gazi osman", text: "Gazi Osman Pasha was a great commander of the 19th century. He became famous during the Russo-Turkish War for defending Plevna in Bulgaria. Russian and Romanian armies attacked Plevna. Osman Pasha organized the defenses and built strong trenches. For five months, his army resisted. In December 1877, out of food and ammunition, he tried to attack the enemy. He was wounded and captured, but the Russians respected him and treated him with dignity. He returned to Istanbul as a hero and was given the title 'Gazi.'", mcq: [{q:"War?", o:["Crimean", "Russo-Turkish", "Balkan"], a:1},{q:"Defense site?", o:["Plevna", "Sofia", "Varna"], a:0},{q:"Duration?", o:["5 months", "1 year", "2 weeks"], a:0},{q:"Russian treat?", o:["Cruel", "Dignity/Respect", "Ignore"], a:1},{q:"Title?", o:["Sultan", "Gazi", "Vizier"], a:1}] },
    { title: "Halil Pasha", fk: "halil", text: "At the Siege of Kut al-Amara (1915-1916), Halil Pasha surrounded 13,000 British soldiers in Mesopotamia (Iraq). After 147 days of hunger and disease, General Townshend surrendered in April 1916. It was a massive Ottoman victory and a major British defeat in WWI.", mcq: [{q:"Location?", o:["Turkey", "Iraq", "Egypt"], a:1},{q:"General?", o:["Smith", "Townshend", "Lawrence"], a:1},{q:"Days?", o:["47", "147", "300"], a:1},{q:"Result?", o:["British won", "Ottoman victory", "Peace"], a:1},{q:"War?", o:["WWII", "WWI", "Prut"], a:1}] },
    { title: "isabelle & ferdinand", fk: "isabelle & ferdinand", text: "The Catholic Monarchs united Spain in 1469. In 1492, they captured Granada, finishing the Reconquista. They expelled Muslims and Jews and supported Columbus's voyage, creating Spain's empire but leaving a legacy of religious removal.", mcq: [{q:"Granada year?", o:["1453", "1492", "1711"], a:1},{q:"Explorer?", o:["Marco Polo", "Columbus", "Vasco"], a:1},{q:"Struggle?", o:["Crusades", "Reconquista", "Armada"], a:1},{q:"Non-Christian result?", o:["Pay tax", "Convert/Leave", "Offices"], a:1},{q:"Union year?", o:["1469", "1492", "1500"], a:0}] },
    { title: "Jacobi", fk: "jacobi", text: "Jacobi (Yakup), a Jewish physician from Genoa, served Mehmed II. Studied medicines and poisons in Italy for Venice/Vatican. In 1481, Mehmed died after Yakup gave him medicine. Life ended in mystery; suspicion of being a Venetian spy remained.", mcq: [{q:"Palace name?", o:["Mehmed", "Yakup", "Joseph"], a:1},{q:"Role?", o:["Architect", "Physician", "Advisor"], a:1},{q:"Died Sultan?", o:["Murad", "Mehmed II", "Ismail"], a:1},{q:"Masters?", o:["British", "Venice/Vatican", "Spain"], a:1},{q:"Origin?", o:["Genoa", "Rome", "Cairo"], a:0}] },
    { title: "Koca Sinan Pasha", fk: "koca sinan", text: "In 1595, Koca Sinan Pasha led an army into Wallachia against Michael the Brave. Retreating to the Danube, the army used a wooden bridge at Giurgiu. Heavy carts filled with treasure delayed the crossing. Sinan Pasha crossed first, leaving the 'Akƒ±ncƒ±' warriors at the back. Michael the Brave fired cannons, destroying the bridge. Thousands of Akƒ±ncƒ± died, and they never recovered their strength. This event is called the 'Bridge Disaster.'", mcq: [{q:"Rebel prince?", o:["Michael the Brave", "Prince Eugene", "Peter"], a:0},{q:"Delay cause?", o:["Rain", "Treasure carts", "Broken wheels"], a:1},{q:"Unit destroyed?", o:["Janissaries", "Akƒ±ncƒ± warriors", "Mamluks"], a:1},{q:"Bridge site?", o:["Giurgiu", "Istanbul", "Vienna"], a:0},{q:"Tool?", o:["Fire", "Cannons", "Axe"], a:1}] },
    { title: "mezamorta", fk: "mezamorta", text: "Mezamorta H√ºseyin Pasha was a famous Ottoman admiral. His name means 'half-dead' in Italian because he survived a Venetian battle where enemies thought he was dead. In 1683, he stopped a French attack on Algiers by firing the French consul from a large cannon. He won back Chios Island from the Venetians and modernized the navy by introducing large sailing ships called 'kalyons.' He died from illness in 1701.", mcq: [{q:"Name meaning?", o:["Sea Lion", "Half-dead", "Great Captain"], a:1},{q:"French stop?", o:["Burning fleet", "Consul from cannon", "Surrender"], a:1},{q:"Ship change?", o:["Rowing to kalyons", "Iron", "Small to large"], a:0},{q:"Chios enemy?", o:["French", "Venetians", "Spanish"], a:1},{q:"Start?", o:["Pirate/Sailor", "Farmer", "Prince"], a:0}] },
    { title: "Mir Ali Beg", fk: "mir ali beg", text: "In the late 1500s, Mir Ali Beg challenged Portuguese rule in Mombasa. Local people disliked the Portuguese and asked for Ottoman help. In 1589, Portuguese ships attacked Mombasa with heavy guns. Suddenly, cannibal warriors called the Zimba attacked from the land, eating Ottoman soldiers. Mir Ali Beg was captured and sent to Portugal as a prisoner, where he died. This ended Ottoman attempts to control East Africa.", mcq: [{q:"Enemy in Africa?", o:["Spain", "Portugal", "Britain"], a:1},{q:"Land attacker?", o:["Zimba cannibals", "Mongols", "Greeks"], a:0},{q:"Fate?", o:["Escaped", "Prisoner in Portugal", "Killed"], a:1},{q:"Port?", o:["Mombasa", "Cairo", "Algiers"], a:0},{q:"Region?", o:["North", "East", "India"], a:1}] },
    { title: "mustafa the second", fk: "mustafa the second", text: "In 1695, Sultan Mustafa II attacked Austria. Spies told Prince Eugene of Savoy exactly where the Sultan planned to cross the Tisa River. Greedy Pashas delayed the army by demanding money from soldiers at the narrow bridge. Prince Eugene attacked with cannons, the bridge broke, and 30,000 soldiers died. This disaster led to the Treaty of Karlowitz and massive land loss.", mcq: [{q:"Austrian General?", o:["Townshend", "Prince Eugene", "Smith"], a:1},{q:"Delay cause?", o:["Storm", "Pashas/Money", "Snow"], a:1},{q:"Dead count?", o:["3,000", "30,000", "100,000"], a:1},{q:"Sultan loss?", o:["Crown", "Seal", "Sword"], a:1},{q:"Treaty?", o:["Prut", "Karlowitz", "Acre"], a:1}] },
    { title: "ragnar lodbrok", fk: "ragnar lodbrok", text: "Ragnar Lodbrok was a famous Viking leader who lived in the 9th century. He attacked Paris in 845 and was paid silver to leave. He died in a snake pit in England after being captured by King Aella of Northumbria. His sons later killed the King for revenge. He is famous for his brave fighting and smart battle plans.", mcq: [{q:"Name meaning?", o:["Hairy pants", "Fast boat", "Great King"], a:0},{q:"Paris 845?", o:["Defeat", "Silver payment", "Crowned King"], a:1},{q:"Death?", o:["Battle", "Snake pit", "Old age"], a:1},{q:"Sons group?", o:["Heathen Army", "Legion", "Akƒ±ncƒ±"], a:0},{q:"Vengeance on?", o:["Nero", "King Aella", "Eugene"], a:1}] },
    { title: "Rob Roy", fk: "rob roy", text: "Rob Roy MacGregor (1671-1734) was the 'Scottish Robin Hood.' A cattle farmer who became an outlaw after a noble took his land. He stole from the rich to give to the poor while hiding in the Highlands mountains. He belonged to the MacGregor clan, which had a very difficult life due to English laws.", mcq: [{q:"Job?", o:["Soldier", "Cattle farmer", "Sailor"], a:1},{q:"Nickname?", o:["Scot", "Robin Hood", "King"], a:1},{q:"Outlaw cause?", o:["Stole crown", "Lost land/Debt", "Old age"], a:1},{q:"Hideout?", o:["London", "Highlands", "Cave"], a:1},{q:"Clan?", o:["MacGregor", "Stewart", "Aella"], a:0}] },
    { title: "salahuddin eyyubi", fk: "salahuddin eyyubi", text: "Salahuddin Ayyubi (Saladin) united Muslim lands to defend against Crusaders. Born in Tikrit (1137), he won at Hattin in 1187 and captured Jerusalem fairly. He treated Christians and Jews with respect. He died in 1193, remembered as a hero of fairness and unity among Muslims.", mcq: [{q:"Born?", o:["Cairo", "Tikrit", "Baghdad"], a:1},{q:"1187 victory?", o:["Jalut", "Hattin", "Plevna"], a:1},{q:"City?", o:["Rome", "Jerusalem", "Paris"], a:1},{q:"Trait?", o:["Cruelty", "Fairness/Respect", "Gold"], a:1},{q:"Goal?", o:["Conquer Rome", "Unite Muslims", "Build wall"], a:1}] },
    { title: "Skanderbeg", fk: "skanderbeg", text: "Gjergj Kastrioti (Skanderbeg) is the national hero of Albania. Trained as an Ottoman soldier, he returned to Albania in 1443 and started a revolt. For 20 years, he protected Albania using knowledge of Ottoman tactics. The Pope called him the 'Athlete of Christ.' His eagle flag remains the symbol of Albania.", mcq: [{q:"Real name?", o:["Osman", "Gjergj Kastrioti", "Mehmet"], a:1},{q:"Flag symbol?", o:["Lion", "Double-headed eagle", "Star"], a:1},{q:"Resistance time?", o:["2", "20", "50 years"], a:1},{q:"Pope title?", o:["Athlete of Christ", "Saint", "King"], a:0},{q:"Trained?", o:["Rome", "Ottoman Empire", "Paris"], a:1}] },
    { title: "Spartacus", fk: "spartacus", text: "Spartacus led 70 gladiators escaping Capua in 73 BC using kitchen knives. They hid at Mount Vesuvius and built a massive slave army. Defeated by Crassus in 71 BC, leading to 6,000 crucifixions along the Appian Way. Today, he is remembered as a powerful symbol of freedom.", mcq: [{q:"Origin?", o:["Rome", "Thrace", "Egypt"], a:1},{q:"Escape tool?", o:["Swords", "Kitchen knives", "Chains"], a:1},{q:"Hideout?", o:["Forum", "Mount Vesuvius", "Colosseum"], a:1},{q:"Defeated by?", o:["Caesar", "Crassus", "Napoleon"], a:1},{q:"Captured fate?", o:["Crucified", "Free", "Exiled"], a:0}] },
    { title: "stefan dusan", fk: "stefan dusan", text: "King Stefan Du≈°an built a strong Serbian Empire (1331-1355) taking parts of Macedonia and Greece. He aimed to take Constantinople before the Ottomans. He tried to form a united Christian army against them but died suddenly in 1355. Empire weakened and divided after his death.", mcq: [{q:"Goal?", o:["Rome", "Constantinople", "London"], a:1},{q:"Threat?", o:["Vikings", "Ottomans", "British"], a:1},{q:"Alliance?", o:["France", "Pope/Venice", "Russia"], a:1},{q:"Post-death status?", o:["Stronger", "Weakened/Divided", "Stable"], a:1},{q:"Maritsa timing?", o:["34 years after death", "Immediately", "100 years"], a:0}] },
    { title: "Taras Bulba", fk: "taras bulba", text: "Taras Bulba was a famous Cossack warrior who fought Polish rule in Ukraine. Taras killed his own son, Andriy, for betraying the Cossacks for a Polish woman. His older son, Ostap, was killed in Warsaw. Taras continued to fight but was finally killed by the Polish army. He is a hero of tradition.", mcq: [{q:"Fought who?", o:["Russia", "Poland", "Germany"], a:1},{q:"Why kill son?", o:["Stealing", "Enemy betrayal/Love", "Cowardice"], a:1},{q:"Ostap killed where?", o:["Kyiv", "Warsaw", "London"], a:1},{q:"Famous line?", o:["Sword gift", "I give life, I take it", "Go"], a:1},{q:"Group?", o:["Viking", "Cossack", "Mamluk"], a:1}] },
    { title: "tariq ibn ziyad", fk: "tariq ibn ziyad", text: "Tariq ibn Ziyad led 7,000 soldiers into Spain in 711 AD. He ordered his soldiers to burn their boats at Gibraltar (Jabal Tariq) to show there was no retreat. He defeated King Roderick at Guadalete, starting 800 years of Muslim rule in Spain. Gibraltar remembers his name today.", mcq: [{q:"Modern name?", o:["Madrid", "Gibraltar", "Alps"], a:1},{q:"Boat order?", o:["Build wall", "Burn them", "Sell"], a:1},{q:"Defeated King?", o:["Philip", "Roderick", "Alexander"], a:1},{q:"Muslim rule length?", o:["8", "800", "8,000 years"], a:1},{q:"Crossing year?", o:["711 AD", "1000", "1492"], a:0}] },
    { title: "timur", fk: "timur", text: "Timur (Tamerlane) was a powerful Central Asian ruler. In 1402, he defeated Ottoman Sultan Yƒ±ldƒ±rƒ±m Bayezid at the Battle of Ankara by turning Bayezid's soldiers against him. Bayezid died as Timur's prisoner. Timur died in 1405 while planning to invade China. He was one of history's greatest conquerors.", mcq: [{q:"Sultan captured?", o:["Mehmed", "Bayezid", "Mustafa"], a:1},{q:"Ankara tactic?", o:["Cannons", "Switch sides", "Night"], a:1},{q:"Invade where?", o:["Egypt", "China", "India"], a:1},{q:"Died year?", o:["1336", "1405", "1492"], a:1},{q:"Captured Sultan fate?", o:["Freed", "Died prisoner", "Escaped"], a:1}] },
    { title: "Tomyris", fk: "tomyris", text: "Queen Tomyris of Massagetae defeated Cyrus the Great (Persia) in 530 BC. Cyrus tricked her son with wine; he died. She avenged him by cutting off Cyrus's head and putting it in a bag of blood. She was a brave queen who defended her people against the powerful Persians.", mcq: [{q:"King defeated?", o:["Xerxes", "Cyrus the Great", "Darius"], a:1},{q:"Trick used?", o:["Wine and food", "Fake peace", "Spies"], a:0},{q:"Head fate?", o:["Sent to Rome", "Bag of blood", "Buried"], a:1},{q:"Son's death?", o:["Battle", "Suicide/Capture", "Old age"], a:1},{q:"Location?", o:["Egypt", "Central Asia", "France"], a:1}] },
    { title: "Turgut Reis", fk: "turgut reis", text: "Turgut Reis began as a Muƒüla-born sailor and became an Ottoman admiral. Rescued from the Genoese after 3 years, he famously moved ships overland at Djerba. He died at the Siege of Malta in 1565. He served with Admiral Barbarossa Hayreddin in Algeria. His tomb stands in Tripoli.", mcq: [{q:"Who rescued him?", o:["Suleiman", "Barbarossa", "Yusuf"], a:1},{q:"Djerba escape?", o:["Swim", "Overland ships", "Storm"], a:1},{q:"Where died?", o:["Vienna", "Malta", "Acre"], a:1},{q:"Prisoner length?", o:["1 month", "3 years", "10 years"], a:1},{q:"Ally?", o:["Napoleon", "Barbarossa", "Gessler"], a:1}] },
    { title: "vlad dracula", fk: "vlad dracula", text: "Vlad III (The Impaler) was a Wallachian prince. An Ottoman hostage as a child, he later used scorched earth and night attacks against Mehmed II. He was defeated and his head sent to Mehmed as proof in 1476. His brother, Radu, became an Ottoman ally and his enemy.", mcq: [{q:"Meaning?", o:["Impaler", "Son of dragon", "King"], a:1},{q:"Hostage where?", o:["Rome", "Ottoman Empire", "Paris"], a:1},{q:"Brother name?", o:["Radu", "Mustafa", "Stefan"], a:0},{q:"Tactic?", o:["Scorched earth", "Wall", "Bribe"], a:0},{q:"Head recipient?", o:["Philip", "Mehmed II", "Pope"], a:1}] },
    { title: "William Tell", fk: "william tell", text: "Swiss hero William Tell shot an apple off his son's head under Gessler's cruel orders. He admitted his second arrow was meant for Gessler. He escaped a storm and sparked the rebellion for Swiss independence. He remains an enduring symbol of resistance to tyranny.", mcq: [{q:"Target?", o:["Bird", "Apple on son's head", "Target"], a:1},{q:"2nd arrow use?", o:["Son", "Gessler", "King"], a:1},{q:"Escape method?", o:["Swim", "Steering in storm", "Bribes"], a:1},{q:"On pole?", o:["Sword", "Hat", "Crown"], a:1},{q:"Nation inspired?", o:["Scotland", "Switzerland", "Albania"], a:1}] },
    { title: "William Wallace", fk: "william wallace", text: "William Wallace was a famous fighter who rebelled against Edward I after English soldiers killed his wife. Won at Stirling Bridge (1297) but lost at Falkirk. Executed in London in 1305, he remains a national hero and symbol of Scottish freedom.", mcq: [{q:"English King?", o:["Henry", "Edward I", "Richard"], a:1},{q:"Victory?", o:["Falkirk", "Stirling Bridge", "London"], a:1},{q:"Trigger?", o:["Gold", "Wife killed", "Taxes"], a:1},{q:"Execution place?", o:["Edinburgh", "London", "Paris"], a:1},{q:"Successor?", o:["Bruce", "Rob Roy", "Eugene"], a:0}] },
    { title: "Yusuf Pasha", fk: "yusuf pasha", text: "In 1788, an Austrian army of 100,000 destroyed itself in Romania due to confusion and alcohol. Soldiers misheard 'Halt' as 'Allah' and fired on each other. Yusuf Pasha took the town without a fight. Victory was won due to the total chaos in the Austrian camp.", mcq: [{q:"Cause?", o:["Plague", "Alcohol/Confusion", "Storm"], a:1},{q:"Mistaken word?", o:["Halt!", "Attack!", "Run!"], a:0},{q:"Army size?", o:["10,000", "100,000", "500,000"], a:1},{q:"Effort?", o:["Siege", "None", "1-day fight"], a:1},{q:"Country today?", o:["Turkey", "Romania", "Germany"], a:1}] }
];

let currentMode = 'listen'; let isSlowMode = false; let repoFiles = [];
const player = document.getElementById('player'); const list = document.getElementById('list');

function norm(str) { if(!str) return ""; return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().replace(" and ", " & ").trim(); }

async function fetchFiles() {
    try {
        const res = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
        const data = await res.json();
        if(Array.isArray(data)) { repoFiles = data.map(f => f.name); renderList(); }
    } catch (e) { renderList(); }
}
fetchFiles();

function startApp() { document.getElementById('splash-screen').style.display = 'none'; }

function renderList() {
    const sorted = [...db].sort((a, b) => a.title.localeCompare(b.title));
    list.innerHTML = sorted.map((item) => {
        const originalIndex = db.findIndex(x => x.title === item.title);
        if (currentMode === 'listen') {
            return `<div class="card" data-name="${item.title.toLowerCase()}">
                <div class="card-title">${item.title}</div>
                <button class="listen-btn btn-uk" onclick="playHP(${originalIndex},'uk')">üá¨üáß 1. UK English</button>
                <button class="listen-btn btn-us-f" onclick="playHP(${originalIndex},'female')">üá∫üá∏ 2. US Female</button>
                <button class="listen-btn btn-us-m" onclick="openRead(${originalIndex})">üìñ 3. Read & Listen (US Male)</button>
            </div>`;
        } else {
            return `<button class="quiz-menu-btn" data-name="${item.title.toLowerCase()}" onclick="openQuiz(${originalIndex})">üß† ${item.title} Quiz</button>`;
        }
    }).join('');
}

function playHP(idx, type) {
    const item = db[idx];
    const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
    let key = norm(item.fk); 
    let file = repoFiles.find(f => {
        const nf = norm(f);
        if (type === 'uk') return nf.includes(key) && nf.includes('uk');
        if (type === 'female') return nf.includes(key) && nf.includes('us') && nf.includes('female');
        if (type === 'male') return nf.includes(key) && nf.includes('us') && nf.includes('male') && !nf.includes('female');
        return false;
    });
    if (file) { player.src = BASE + encodeURIComponent(file); player.playbackRate = isSlowMode ? 0.8 : 1.0; player.play(); }
}

function openRead(i) {
    document.getElementById('story-text').innerText = db[i].text;
    document.getElementById('view-listen').style.display = 'block';
    document.getElementById('view-quiz').style.display = 'none';
    document.getElementById('modal').style.display = 'block';
    playHP(i, 'male');
}

function openQuiz(i) {
    document.getElementById('quiz-title').innerText = db[i].title + " Quiz";
    document.getElementById('quiz-area').innerHTML = db[i].mcq.map((q, qIdx) => `
        <div class="quiz-q"><div class="q-text">Q${qIdx+1}: ${q.q}</div>
        ${q.options.map((opt, oIdx) => `<button class="mcq-option" onclick="checkMCQ(this, ${q.a}, ${oIdx})">${opt}</button>`).join('')}
        <div class="feedback"></div></div>`).join('');
        document.getElementById('view-listen').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('modal').style.display = 'block';
}

function checkMCQ(btn, correctIdx, userIdx) {
    const parent = btn.parentElement;
    const fb = parent.querySelector('.feedback');
    if (correctIdx === userIdx) {
        fb.innerHTML = "<span class='correct'>‚úì CORRECT!</span>";
        btn.style.backgroundColor = "#2f9e44";
    } else {
        fb.innerHTML = "<span class='wrong'>‚úó WRONG!</span>";
        btn.style.backgroundColor = "#d63031";
    }
}

function setMode(m) { 
    currentMode = m; 
    document.getElementById('btn-listen').className = (m==='listen')?'toggle-btn active':'toggle-btn';
    document.getElementById('btn-quiz').className = (m==='quiz')?'toggle-btn active':'toggle-btn';
    renderList(); 
}
function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
function toggleSnail() { isSlowMode = !isSlowMode; player.playbackRate = isSlowMode ? 0.8 : 1.0; document.getElementById('btn-snail').classList.toggle('active'); }
function filterList() {
    const val = document.getElementById('search').value.toLowerCase();
    document.querySelectorAll('.card, .quiz-menu-btn').forEach(el => {
        el.style.display = el.getAttribute('data-name').includes(val) ? 'block' : 'none';
    });
}
</script>
</body>
</html>
