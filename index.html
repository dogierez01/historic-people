<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lingua Pharmacia - Historic People</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #000; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .logo-ring { width: 85vw; height: 85vw; max-width: 480px; max-height: 480px; border-radius: 50%; border: 6px solid gold; box-shadow: 0 0 50px #d32f2f; display: flex; align-items: center; justify-content: center; margin-bottom: 35px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 20px 0; text-align: center; }
        .toggle-btn { padding: 14px 35px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: #fff; background: #222; margin: 0 8px; font-size: 18px; }
        .toggle-btn.active#btn-learn { background: #1976d2; }
        .toggle-btn.active#btn-quiz { background: #9c27b0; }
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 65%; }
        #btn-snail { background: #111; color: white; border: 2px solid #ffcc00; font-size: 30px; padding: 8px 18px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #ffcc00; color: #000; }
        #content-area { padding: 20px; padding-top: 220px; max-width: 700px; margin: 0 auto; }
        .card { background: #1a1a1a; padding: 35px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 32px; font-weight: 900; color: #fff; margin-bottom: 25px; text-align: center; text-transform: uppercase; }
        .action-btn { width: 100%; padding: 22px; margin-bottom: 15px; border: none; border-radius: 12px; color: white; font-weight: 900; font-size: 22px; text-align: left; cursor: pointer; }
        .btn-uk { background: #d32f2f; }
        .btn-usf { background: #9c27b0; }
        .btn-usm { background: #1976d2; }
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.99); z-index: 200; overflow-y: auto; }
        #modal-content { padding: 30px; max-width: 850px; margin: 0 auto; padding-top: 100px; padding-bottom: 100px; }
        #close-btn { position: fixed; top: 25px; right: 25px; font-size: 45px; cursor: pointer; color: white; z-index: 300; background: #333; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        #story-text { font-size: 26px; line-height: 1.9; color: #f0f0f0; text-align: justify; }
        .m-header { text-align: center; color: #1976d2; font-size: 42px; margin-bottom: 40px; font-weight: 900; text-transform: uppercase; border-bottom: 2px solid #333; }
        .q-container { background: #121212; padding: 35px; border-radius: 15px; margin-bottom: 30px; border-left: 10px solid #9c27b0; }
        .q-text { font-size: 26px; font-weight: bold; color: gold; margin-bottom: 25px; display: block; }
        .mcq-btn { width: 100%; padding: 22px; margin-bottom: 15px; border: 1px solid #555; background: #2a2a2a; color: #fff; border-radius: 10px; font-size: 22px; text-align: left; cursor: pointer; }
        .mcq-btn.correct { background: #2f9e44 !important; border-color: #39ff14; }
        .mcq-btn.wrong { background: #d63031 !important; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="logo-ring"><img src="https://dogierez01.github.io/historic-people/logo.png" class="logo-img" onerror="this.src='https://via.placeholder.com/500?text=LINGUA+PHARMACIA'"></div>
    <div style="color: white; font-size: 38px; font-weight: 900; margin-bottom: 40px; letter-spacing: 4px;">LINGUA PHARMACIA</div>
    <button onclick="startApp()" style="padding:25px 100px; font-size:32px; font-weight:bold; background:#d32f2f; color:white; border:none; border-radius:70px; cursor:pointer;">START üèõÔ∏è</button>
</div>

<div id="header-area">
    <div style="font-weight:900; color:gold; margin-bottom:10px; font-size:22px;">üèõÔ∏è HISTORIC PEOPLE</div>
    <div>
        <button id="btn-learn" class="toggle-btn active" onclick="setMode('learn')">üìñ Listen & Read</button>
        <button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button>
    </div>
    <div id="audio-bar"><audio id="player" controls controlsList="nodownload"></audio><button id="btn-snail" onclick="toggleSnail()">üêå</button></div>
</div>

<div id="content-area"><div id="list"></div></div>

<div id="modal"><div id="close-btn" onclick="closeModal()">‚úï</div><div id="modal-content"><h1 id="m-title" class="m-header"></h1><div id="view-learn"><div id="story-text"></div></div><div id="view-quiz" style="display:none;"><div id="quiz-area"></div></div></div></div>

<script>
    const player = document.getElementById('player');
    const snailBtn = document.getElementById('btn-snail');
    let currentMode = 'learn';
    let isSlow = false;

    const db = [
        {
            name: "Alexander the Great", slug: "alexander the great",
            text: "Alexander was born in 356 BC in Pella, the capital of Macedon. His mother, Olympia, was a strong and mysterious woman. She prayed to snakes and kept many of them in the palace. Alexander grew up with these snakes. Poisonous snakes bit him, so his body became strong against poison. His father, King Philip II, was a very strict ruler. One night, he punished Alexander very badly. This difficult event helped make Alexander a fearless and strong man. Even as a young man, Alexander was special. He did not have a beard. He ordered all his soldiers to shave their faces, too. This rule for soldiers is still used today. He was a student of the famous teacher Aristotle. He learned about war and how to lead an army. He became a commander when he was still a teenager. Alexander wanted to conquer the whole world. He took control of many huge lands like Persia and Egypt. He even traveled as far as India. His army grew bigger and stronger. However, great power brought danger. When he was at the River Indus, his own generals turned against him. They poisoned him because they were tired of fighting. They wanted to stop and return to their homes and families.",
            questions: [
                { q: "How did Alexander become strong against poison?", options: ["By eating rare herbs", "By being bitten by snakes", "Aristotle gave him medicine"], a: 1 },
                { q: "What rule for soldiers did Alexander create?", options: ["Wearing capes", "Shaving their faces", "Marching in lines"], a: 1 },
                { q: "Who was his famous teacher?", options: ["Socrates", "Aristotle", "Plato"], a: 1 },
                { q: "Where did his generals betray him?", options: ["The River Indus", "Egypt", "Persia"], a: 0 },
                { q: "How did he die?", options: ["In battle", "Old age", "Poisoned by generals"], a: 2 }
            ]
        },
        {
            name: "Baltacƒ± Mehmet Pasha", slug: "baltaci mehmet pasha",
            text: "Baltacƒ± Mehmet Pasha was an Ottoman grand vizier... surrounded Russian forces at the Prut River. The Russians were trapped and weak. With the Treaty of Prut, Russia gave back Azov. Peter the Great was allowed to leave safely.",
            questions: [
                { q: "Which empire did he fight in 1711?", options: ["France", "Russia", "Britain"], a: 1 },
                { q: "Result of Treaty of Prut?", options: ["War continued", "Russia gave back Azov", "Pasha killed"], a: 1 },
                { q: "Why was he blamed?", options: ["For losing", "For avoiding blood", "For not destroying Russia completely"], a: 2 },
                { q: "Russian leader?", options: ["Peter the Great", "Ivan", "Nicholas"], a: 0 },
                { q: "Russian army state?", options: ["Trapped and weak", "Ready to win", "Escaped"], a: 0 }
            ]
        },
        {
            name: "Baybars", slug: "baybars",
            text: "Born in Central Asia around 1223, sold as a slave, became a Mamluk. Defeated Mongols at Ain Jalut using a trap. Became Sultan and built a fast mail system using horses.",
            questions: [
                { q: "How did he arrive in Egypt?", options: ["Trader", "Slave", "King"], a: 1 },
                { q: "Plan at Ain Jalut?", options: ["Cannons", "Pretended to run", "Wall"], a: 1 },
                { q: "Mamluks were?", options: ["Soldier-slaves", "Farmers", "Mongols"], a: 0 },
                { q: "System made?", options: ["Tax", "Fast mail using horses", "School"], a: 1 },
                { q: "He built?", options: ["Pyramids", "Bridges and roads", "Ships"], a: 1 }
            ]
        },
        {
            name: "Boudica", slug: "boudica",
            text: "Warrior queen of Britain. Fought Romans after they attacked her family and took her land. Destroyed Londinium but defeated in 61 AD.",
            questions: [
                { q: "Who ruled Britain?", options: ["Greeks", "Romans", "Vikings"], a: 1 },
                { q: "Why angry?", options: ["Tax", "Romans attacked family", "Lost race"], a: 1 },
                { q: "City NOT destroyed?", options: ["Londinium", "Verulamium", "Rome"], a: 2 },
                { q: "Who defeated her?", options: ["Suetonius", "Augustus", "Prasutagus"], a: 0 },
                { q: "Death detail?", options: ["Battle", "Suicide or illness", "Old age"], a: 1 }
            ]
        },
        {
            name: "Cezzar Ahmed Pasha", slug: "cezzar ahmed pasha",
            text: "Governor of Acre who stopped Napoleon in 1799. With British help, resisted 2-month siege, stopping Napoleon's Eastern dreams.",
            questions: [
                { q: "Who attacked Acre?", options: ["Peter", "Napoleon", "Smith"], a: 1 },
                { q: "Why Acre?", options: ["Gold", "Enter Anatolia", "Escape"], a: 1 },
                { q: "Who helped?", options: ["British", "French", "Russians"], a: 0 },
                { q: "Siege time?", options: ["2 days", "2 weeks", "2 months"], a: 2 },
                { q: "Napoleon result?", options: ["Victory", "Dreams stopped", "Captured"], a: 1 }
            ]
        },
        {
            name: "El Cid", slug: "el cid",
            text: "Rodrigo Diaz de Vivar, Spanish warrior who worked with Christians and Muslims. Captured Valencia in 1094.",
            questions: [
                { q: "El Cid means?", options: ["King", "Warrior", "Respected"], a: 2 },
                { q: "Exile reason?", options: ["Spy", "Treachery", "Retired"], a: 1 },
                { q: "City taken 1094?", options: ["Madrid", "Valencia", "Burgos"], a: 1 },
                { q: "Worked with?", options: ["French", "Muslim rulers", "English"], a: 1 },
                { q: "Valencia treatment?", options: ["Expelled", "Let them stay", "Slaves"], a: 1 }
            ]
        },
        {
            name: "Fahrettin Pasha", slug: "fahrettin pasha",
            text: "Desert Tiger who defended Medina in WWI. Refused to surrender flag even when eating locusts to survive.",
            questions: [
                { q: "Nickname?", options: ["Tiger", "Lion", "Bear"], a: 0 },
                { q: "Defended city?", options: ["Mecca", "Medina", "Cairo"], a: 1 },
                { q: "Food eaten?", options: ["Sand", "Locusts", "Fish"], a: 1 },
                { q: "Sent to Istanbul?", options: ["Gold", "Relics", "Guns"], a: 1 },
                { q: "Ambassador to?", options: ["Egypt", "Afghanistan", "Malta"], a: 1 }
            ]
        },
        {
            name: "Gavrilo Princip", slug: "gavrilo princip",
            text: "Serbian student who shot Franz Ferdinand in 1914, starting WWI. Died in prison in 1918.",
            questions: [
                { q: "From?", options: ["Austria", "Serbia", "Bosnia"], a: 1 },
                { q: "Assassinated?", options: ["King", "Archduke Ferdinand", "Napoleon"], a: 1 },
                { q: "Car found?", options: ["Driver", "Accident", "Map"], a: 1 },
                { q: "No death penalty?", options: ["Student", "Under 20", "Escaped"], a: 1 },
                { q: "War started?", options: ["WWI", "WWII", "Civil War"], a: 0 }
            ]
        },
        {
            name: "Gazi Osman Pasha", slug: "gazi osman pasha",
            text: "Defended Plevna for 5 months against Russians in 1877. Respected hero given title Gazi.",
            questions: [
                { q: "Town defended?", options: ["Istanbul", "Plevna", "Egypt"], a: 1 },
                { q: "How long?", options: ["5 days", "5 weeks", "5 months"], a: 2 },
                { q: "Built?", options: ["Walls", "Trenches", "Bridges"], a: 1 },
                { q: "Title?", options: ["Vizier", "Gazi", "King"], a: 1 },
                { q: "Captured by?", options: ["British", "Russians", "French"], a: 1 }
            ]
        },
        {
            name: "Halil Pasha", slug: "halil pasha",
            text: "Commanded Siege of Kut al-Amara in 1916. 13,000 British surrendered after 147 days.",
            questions: [
                { q: "Kut location?", options: ["Egypt", "Anatolia", "Mesopotamia"], a: 2 },
                { q: "British leader?", options: ["Townshend", "Smith", "Lawrence"], a: 0 },
                { q: "Days?", options: ["47", "147", "200"], a: 1 },
                { q: "Strong enemy?", options: ["Cannons", "Hunger and disease", "Night"], a: 1 },
                { q: "Who won?", options: ["British", "Ottomans", "Indians"], a: 1 }
            ]
        },
        {
            name: "Isabella and Ferdinand", slug: "isabella i",
            text: "United Spain, finished Reconquista in 1492, supported Columbus voyage.",
            questions: [
                { q: "Marriage year?", options: ["1469", "1492", "1500"], a: 0 },
                { q: "Goal?", options: ["Reconquista", "Crusade", "Migration"], a: 0 },
                { q: "Last city?", options: ["Madrid", "Barcelona", "Granada"], a: 2 },
                { q: "Supported?", options: ["Vespucci", "Columbus", "Polo"], a: 1 },
                { q: "Order?", options: ["Stay", "Tax", "Convert or leave"], a: 2 }
            ]
        },
        {
            name: "Jacobi", slug: "jacobi",
            text: "Head physician for Mehmed II. Mystery surrounds Sultan's death in 1481.",
            questions: [
                { q: "Skill?", options: ["War", "Medicine", "Ships"], a: 1 },
                { q: "Palace name?", options: ["Halil", "Sinan", "Yakup"], a: 2 },
                { q: "Sultan served?", options: ["Mehmed II", "Mustafa II", "Peter"], a: 0 },
                { q: "1481?", options: ["Retired", "Died", "Left"], a: 1 },
                { q: "Born?", options: ["Venice", "Genoa", "Istanbul"], a: 1 }
            ]
        },
        {
            name: "Koca Sinan Pasha", slug: "koca sinan pasha",
            text: "Led army in Wallachia. Bridge Disaster on Danube destroyed Akƒ±ncƒ± warriors in 1595.",
            questions: [
                { q: "Rebel?", options: ["Michael", "Peter", "Napoleon"], a: 0 },
                { q: "Bridge?", options: ["Prut", "Giurgiu", "Medina"], a: 1 },
                { q: "Slow why?", options: ["Narrow", "Treasure carts", "Broken"], a: 1 },
                { q: "Trapped?", options: ["Pasha", "Akƒ±ncƒ±", "Michael"], a: 1 },
                { q: "Destroyed bridge?", options: ["Weight", "Cannons", "River"], a: 1 }
            ]
        },
        {
            name: "Mezamorta H√ºseyin Pasha", slug: "mezamorta huseyin pasha",
            text: "Admiral known as half-dead. Introduced big sailing kalyons to the fleet.",
            questions: [
                { q: "Means?", options: ["Pirate", "Half-dead", "Admiral"], a: 1 },
                { q: "French stop?", options: ["Cannon", "Sank ships", "Peace"], a: 0 },
                { q: "Island?", options: ["Malta", "Cyprus", "Chios"], a: 2 },
                { q: "Ships?", options: ["Rowing", "Kalyons", "Subs"], a: 1 },
                { q: "Origin?", options: ["Spain", "France", "Russia"], a: 0 }
            ]
        },
        {
            name: "Mir Ali Beg", slug: "mir ali beg",
            text: "Captain fought Portugal in East Africa. Captured after battle with Zimba cannibals.",
            questions: [
                { q: "Region?", options: ["Britain", "Portugal", "France"], a: 1 },
                { q: "Captain?", options: ["Beg", "Pasha", "Yakup"], a: 0 },
                { q: "Land warriors?", options: ["Portu", "Zimba", "Scots"], a: 1 },
                { q: "Beg fate?", options: ["Died", "Captured", "Sultan"], a: 1 },
                { q: "Prisoner in?", options: ["Istanbul", "Mombasa", "Portugal"], a: 2 }
            ]
        },
        {
            name: "Mustafa II", slug: "mustafa the second",
            text: "Army destroyed at Tisa River. Greedy pashas delayed bridge crossing in 1695.",
            questions: [
                { q: "General?", options: ["Eugene", "Peter", "Sancho"], a: 0 },
                { q: "Delay?", options: ["Broken", "Greedy commanders", "Rain"], a: 1 },
                { q: "River?", options: ["Danube", "Tisa", "Prut"], a: 1 },
                { q: "Lost?", options: ["Seal", "Crown", "Horse"], a: 0 },
                { q: "Treaty?", options: ["Prut", "Hattin", "Karlowitz"], a: 2 }
            ]
        },
        {
            name: "Ragnar Lodbrok", slug: "ragnar lodbrok",
            text: "Viking raided Paris. Died in snake pit in England. Avenged by sons.",
            questions: [
                { q: "Lodbrok?", options: ["Ship", "Pants", "Snake"], a: 1 },
                { q: "City silver?", options: ["London", "Paris", "Sarajevo"], a: 1 },
                { q: "Death?", options: ["Battle", "Snake pit", "Old"], a: 1 },
                { q: "Killer?", options: ["Aella", "Napo", "Ed I"], a: 0 },
                { q: "Avengers?", options: ["French", "Sons", "Romans"], a: 1 }
            ]
        },
        {
            name: "Rob Roy", slug: "rob roy",
            text: "Scottish Robin Hood. Stole cattle to help poor after losing land to noble.",
            questions: [
                { q: "From?", options: ["England", "Scotland", "Ireland"], a: 1 },
                { q: "Land loss?", options: ["Sold", "Debt", "War"], a: 1 },
                { q: "Nickname?", options: ["John", "Robin Hood", "Tiger"], a: 1 },
                { q: "Stole?", options: ["Gold", "Cattle", "Horses"], a: 1 },
                { q: "Hid in?", options: ["Castles", "Mountains", "Subway"], a: 1 }
            ]
        },
        {
            name: "Salahuddin Ayyubi", slug: "salahuddin ayyubi",
            text: "Muslim hero retook Jerusalem. Fairness to all at Battle of Hattin 1187.",
            questions: [
                { q: "Born?", options: ["Egypt", "Tikrit", "Jeru"], a: 1 },
                { q: "Battle 1187?", options: ["Hattin", "Plevna", "Ankara"], a: 0 },
                { q: "City?", options: ["Paris", "Medina", "Jeru"], a: 2 },
                { q: "Fairness?", options: ["Harsh", "Kindness", "None"], a: 1 },
                { q: "United?", options: ["Mongols", "Muslim lands", "Scots"], a: 1 }
            ]
        },
        {
            name: "Skanderbeg", slug: "skanderbeg",
            text: "Albanian hero. Fought 20-year revolt against Ottoman Empire.",
            questions: [
                { q: "Hero?", options: ["Serbia", "Albania", "Bulg"], a: 1 },
                { q: "Flag?", options: ["Lion", "Eagle", "Tiger"], a: 1 },
                { q: "Nickname?", options: ["Tiger", "Athlete of Christ", "Respected"], a: 1 },
                { q: "Years?", options: ["5", "20", "50"], a: 1 },
                { q: "Fought?", options: ["Otto", "Roman", "French"], a: 0 }
            ]
        },
        {
            name: "Spartacus", slug: "spartacus",
            text: "Gladiator slave revolt leader against Rome. Hideout at Vesuvius.",
            questions: [
                { q: "From?", options: ["Rome", "Thrace", "Egypt"], a: 1 },
                { q: "Escape?", options: ["Swords", "Kitchen knives", "Horses"], a: 1 },
                { q: "Hideout?", options: ["Castle", "Vesuvius", "Sea"], a: 1 },
                { q: "General?", options: ["Crassus", "Napo", "Eugene"], a: 0 },
                { q: "6000 fate?", options: ["Free", "Crosses", "Slaves"], a: 1 }
            ]
        },
        {
            name: "Stefan Du≈°an", slug: "stefan dusan",
            text: "Serbian King expanded empire. Died before taking Constantinople.",
            questions: [
                { q: "King?", options: ["Serbia", "Alba", "Spain"], a: 0 },
                { q: "Goal?", options: ["Isa", "Constan", "Bridge"], a: 1 },
                { q: "Threat?", options: ["Roman", "Ottoman", "British"], a: 1 },
                { q: "Soldiers?", options: ["Otto", "Scots", "Viking"], a: 0 },
                { q: "Battle?", options: ["Prut", "Maritsa", "Ankara"], a: 1 }
            ]
        },
        {
            name: "Taras Bulba", slug: "taras bulba",
            text: "Cossack warrior in Ukraine. Killed son for betraying traditions for love.",
            questions: [
                { q: "From?", options: ["Russia", "Ukraine", "Poland"], a: 1 },
                { q: "Was?", options: ["Mamluk", "Cossack", "Roman"], a: 1 },
                { q: "Killed son?", options: ["Weak", "Betrayal", "Stole"], a: 1 },
                { q: "Ostap?", options: ["Kyiv", "Warsaw", "London"], a: 1 },
                { q: "Ruler?", options: ["Otto", "Poland", "Viking"], a: 1 }
            ]
        },
        {
            name: "Tariq ibn Ziyad", slug: "tariq ibn ziyad",
            text: "Muslim commander invaded Spain 711. Burned boats to stop retreat.",
            questions: [
                { q: "Year?", options: ["711", "1043", "1492"], a: 0 },
                { q: "Burned?", options: ["Town", "Boats", "Forest"], a: 1 },
                { q: "Rock?", options: ["Pella", "Acre", "Gibraltar"], a: 2 },
                { q: "King?", options: ["Roderick", "Sancho", "Alfonso"], a: 0 },
                { q: "Rule?", options: ["100", "800", "50"], a: 1 }
            ]
        },
        {
            name: "Timur", slug: "timur (tamerlane)",
            text: "Defeated Ottomans at Ankara 1402. Death 1405 saved China.",
            questions: [
                { q: "From?", options: ["Asia", "Anatolia", "Bulg"], a: 0 },
                { q: "Sultan?", options: ["Mehmed", "Mustafa", "Bayezid"], a: 2 },
                { q: "Year?", options: ["1402", "1492", "1595"], a: 0 },
                { q: "Place?", options: ["Plevna", "Ankara", "Sara"], a: 1 },
                { q: "Saved?", options: ["Russia", "India", "China"], a: 2 }
            ]
        },
        {
            name: "Tomyris", slug: "tomyris",
            text: "Queen killed Cyrus the Great 530 BC. Bag of blood revenge.",
            questions: [
                { q: "Queen?", options: ["Visigoth", "Massaget", "Viking"], a: 1 },
                { q: "King?", options: ["Cyrus", "Edward", "Napo"], a: 0 },
                { q: "Trap?", options: ["Wall", "Wine", "Boat"], a: 1 },
                { q: "Suicide?", options: ["Ill", "Shame", "Old"], a: 1 },
                { q: "Head?", options: ["Gold", "Blood", "River"], a: 1 }
            ]
        },
        {
            name: "Turgut Reis", slug: "turgut reis",
            text: "Admiral moved ships overland to escape siege at Djerba.",
            questions: [
                { q: "Born?", options: ["Alge", "Muƒüla", "Malta"], a: 1 },
                { q: "Djerba?", options: ["Cave", "Overland", "Swim"], a: 1 },
                { q: "Gov?", options: ["Istan", "Naples", "Tripoli"], a: 2 },
                { q: "Death?", options: ["Preveza", "Malta", "Karli"], a: 1 },
                { q: "Prison?", options: ["1", "3", "10"], a: 1 }
            ]
        },
        {
            name: "Vlad III", slug: "vlad iii (dracula)",
            text: "The real Dracula. Guerrilla war against Ottomans. Impaler.",
            questions: [
                { q: "Means?", options: ["Impaler", "Son of Dragon", "King"], a: 1 },
                { q: "Hostage?", options: ["Aust", "Otto", "Eng"], a: 1 },
                { q: "Lang?", options: ["Rom", "Turk", "Latin"], a: 1 },
                { q: "Brother?", options: ["Mich", "Radu", "Gavr"], a: 1 },
                { q: "Death?", options: ["Sara", "Bucha", "Plev"], a: 1 }
            ]
        },
        {
            name: "William Tell", slug: "william tell",
            text: "Hero shot apple off son's head. Swiss rebellion sparked.",
            questions: [
                { q: "From?", options: ["Aust", "Swiss", "Scot"], a: 1 },
                { q: "Weapon?", options: ["Sword", "Crossbow", "Can"], a: 1 },
                { q: "Test?", options: ["Bird", "Apple", "Swim"], a: 1 },
                { q: "Arrow?", options: ["Gessler", "Case", "Son"], a: 0 },
                { q: "Inspire?", options: ["Tax", "Rebel", "School"], a: 1 }
            ]
        },
        {
            name: "William Wallace", slug: "william wallace",
            text: "Scottish freedom fighter against Edward I. Stirling Bridge 1297.",
            questions: [
                { q: "Why?", options: ["Gold", "Wife", "Bored"], a: 1 },
                { q: "Win?", options: ["Falk", "Stir", "Lond"], a: 1 },
                { q: "King?", options: ["Ed I", "Peter", "Roder"], a: 0 },
                { q: "Next?", options: ["Rob", "Bruce", "Tell"], a: 1 },
                { q: "Death?", options: ["Edin", "Lond", "Paris"], a: 1 }
            ]
        },
        {
            name: "Yusuf Pasha", slug: "yusuf pasha",
            text: "Vizier won Karansebes after Austrians fought themselves.",
            questions: [
                { q: "Army?", options: ["10k", "100k", "1m"], a: 1 },
                { q: "Why?", options: ["Money", "Alco", "Flag"], a: 1 },
                { q: "Word?", options: ["Stop", "Run", "Halt"], a: 2 },
                { q: "Heard?", options: ["Fire", "Allah", "Help"], a: 1 },
                { q: "Win?", options: ["Aust", "Locals", "Yusuf"], a: 2 }
            ]
        }
    ];

    function playAudioLiteral(idx, type, openModal = false) {
        const p = db[idx];
        const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
        let literalName = p.slug + " " + type + ".wav";
        player.src = BASE + encodeURIComponent(literalName);
        player.playbackRate = isSlow ? 0.9 : 1.0;
        player.play().catch(e => {
            player.src = BASE + encodeURIComponent(literalName.toLowerCase());
            player.play();
        });
        if (openModal) {
            document.getElementById('modal').style.display = 'block';
            document.getElementById('m-title').innerText = p.name;
            document.getElementById('story-text').innerText = p.text;
            document.getElementById('view-learn').style.display = 'block';
            document.getElementById('view-quiz').style.display = 'none';
        }
    }
    function startApp() { document.getElementById('splash-screen').style.display = 'none'; renderList(); }
    function renderList() {
        const container = document.getElementById('list');
        container.innerHTML = db.map((p, i) => `
            <div class="card">
                <div class="card-title">${p.name}</div>
                ${currentMode === 'learn' ? `
                    <button class="action-btn btn-uk" onclick="playAudioLiteral(${i}, 'female accent')">1. üá¨üáß UK English</button>
                    <button class="action-btn btn-usf" onclick="playAudioLiteral(${i}, 'female ai')">2. üá∫üá∏ US Female</button>
                    <button class="action-btn btn-usm" onclick="playAudioLiteral(${i}, 'male ai', true)">3. üìñ Read & Listen (US Male)</button>
                ` : `<button class="action-btn btn-usf" onclick="openQuiz(${i})" style="text-align:center">üß† Start Quiz</button>`}
            </div>`).join('');
    }
    function openQuiz(idx) {
        const p = db[idx];
        document.getElementById('modal').style.display = 'block';
        document.getElementById('m-title').innerText = p.name + " Quiz";
        document.getElementById('view-learn').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('quiz-area').innerHTML = p.questions.map((q, i) => `
            <div class="q-box">
                <span class="q-text">${i+1}. ${q.q}</span>
                ${q.options.map((o, oi) => `<button class="opt-btn" onclick="check(this, ${oi}, ${q.a})">${o}</button>`).join('')}
            </div>`).join('');
    }
    function check(b, s, c) {
        const btns = b.parentElement.querySelectorAll('.opt-btn');
        btns.forEach(x => x.disabled = true);
        if(s===c) b.classList.add('correct');
        else { b.classList.add('wrong'); btns[c].classList.add('correct'); }
    }
    function toggleSnail() { isSlow = !isSlow; player.playbackRate = isSlow ? 0.9 : 1.0; snailBtn.classList.toggle('active'); }
    function setMode(m) { currentMode = m; document.getElementById('btn-learn').classList.toggle('active', m==='learn'); document.getElementById('btn-quiz').classList.toggle('active', m==='quiz'); renderList(); }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
    renderList();
</script>
</body>
</html>
