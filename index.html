<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Historic People MCQ</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* SPLASH SCREEN - NEON RED RING */
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: opacity 0.5s ease; }
        .neon-ring { width: 350px; height: 350px; border-radius: 50%; border: 10px solid #ff0000; box-shadow: 0 0 40px #ff0000; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; margin-bottom: 40px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes pulse { 0% { box-shadow: 0 0 20px #ff0000; } 50% { box-shadow: 0 0 60px #ff0000; } 100% { box-shadow: 0 0 20px #ff0000; } }
        #start-btn { padding: 20px 80px; font-size: 26px; font-weight: 900; color: white; background: linear-gradient(135deg, #d63031, #ff0000); border: none; border-radius: 60px; cursor: pointer; text-transform: uppercase; }

        /* HEADER AREA */
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #app-title { font-size: 22px; font-weight: 900; color: #fff; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .toggle-btn { padding: 12px 35px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: #888; background: #222; margin: 0 10px; transition: all 0.2s; font-size: 16px; }
        .toggle-btn.active { color: #fff; background: #007AFF; }
        
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 75%; outline: none; }
        #btn-snail { background: #111; color: white; border: 2px solid #ff0033; font-size: 28px; padding: 5px 20px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #0a1f0a; border-color: #39ff14; box-shadow: 0 0 10px #39ff14; }

        /* CONTENT ZONES */
        #content-area { padding: 20px; padding-top: 200px; max-width: 700px; margin: 0 auto; }
        .card { background: #1e1e1e; padding: 25px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 20px; text-transform: capitalize; text-align: center; border-bottom: 1px solid #444; padding-bottom: 12px; }
        .listen-btn { padding: 18px; border-radius: 12px; border: none; cursor: pointer; font-weight: 900; font-size: 18px; color: white; display: block; width: 100%; margin-bottom: 12px; }
        .btn-uk { background: #d63031; } .btn-us-f { background: #e056fd; } .btn-us-m { background: #007AFF; }

        /* TEXT OVERLAY */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 3000; overflow-y: auto; }
        #modal-content { padding: 50px; max-width: 900px; margin: 0 auto; padding-top: 100px; }
        #close-btn { position: fixed; top: 30px; right: 30px; font-size: 35px; cursor: pointer; color: white; z-index: 3100; background: #ff0033; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        #story-text { font-size: 32px; line-height: 1.6; color: #f0f0f0; text-align: justify; font-weight: 500; }

        /* MCQ ENLARGED */
        .quiz-q { background: #121212; padding: 30px; border-radius: 15px; margin-bottom: 30px; border-left: 10px solid #e056fd; }
        .q-text { font-size: 26px; font-weight: bold; color: #fff; margin-bottom: 25px; line-height: 1.3; }
        .mcq-option { width: 100%; padding: 20px; background: #1e1e1e; border: 2px solid #333; color: #fff; border-radius: 12px; font-size: 22px; font-weight: bold; text-align: left; margin-bottom: 15px; cursor: pointer; transition: 0.2s; }
        .mcq-option:hover { background: #222; border-color: #007AFF; }
        .feedback { font-weight: bold; display: block; margin-top: 20px; font-size: 28px; text-align: center; }
        .correct { color: #39ff14; } .wrong { color: #ff0033; }
        .quiz-menu-btn { width: 100%; padding: 20px; background: #1e1e1e; border: 1px solid #333; color: white; font-weight: bold; border-radius: 12px; margin-bottom: 15px; cursor: pointer; text-align: left; font-size: 22px; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="neon-ring"><img src="logo.png" class="logo-img" onerror="this.src='https://via.placeholder.com/350?text=Logo'"></div>
    <button onclick="startApp()" id="start-btn">START üèõÔ∏è</button>
</div>

<div id="header-area">
    <div id="app-title">üèõÔ∏è HISTORIC PEOPLE</div>
    <div>
        <button id="btn-listen" class="toggle-btn active" onclick="setMode('listen')">üéß Listen</button>
        <button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button>
    </div>
    <div id="audio-bar">
        <audio id="player" controls controlsList="nodownload"></audio>
        <button id="btn-snail" onclick="toggleSnail()">üêå</button>
    </div>
</div>

<div id="content-area"><div id="list"></div></div>

<div id="modal">
    <div id="close-btn" onclick="closeModal()">‚úï</div>
    <div id="modal-content">
        <div id="view-listen"><div id="story-text"></div></div>
        <div id="view-quiz" style="display:none;">
            <h2 id="quiz-title" style="text-align:center; font-size: 36px; margin-bottom: 30px;"></h2>
            <div id="quiz-area"></div>
        </div>
    </div>
</div>

<script>
    const db = [
        {
            title: "Alexander the Great",
            text: "Alexander was born in 356 BC in Pella, the capital of Macedon. His mother, Olympia, was a strong and mysterious woman. She prayed to snakes and kept many of them in the palace. Alexander grew up with these snakes. Poisonous snakes bit him, so his body became strong against poison. His father, King Philip II, was a very strict ruler. One night, he punished Alexander very badly. This difficult event helped make Alexander a fearless and strong man. Even as a young man, Alexander was special. He did not have a beard. He ordered all his soldiers to shave their faces, too. This rule for soldiers is still used today. He was a student of the famous teacher Aristotle. He learned about war and how to lead an army. He became a commander when he was still a teenager. Alexander wanted to conquer the whole world. He took control of many huge lands like Persia and Egypt. He even traveled as far as India. His army grew bigger and stronger. However, great power brought danger. When he was at the River Indus, his own generals turned against him. They poisoned him because they were tired of fighting. They wanted to stop and return to their homes and families.",
            mcq: [
                { q: "Why was Alexander's body strong against poison?", options: ["He was born with a genetic mutation", "He grew up being bitten by palace snakes", "He took a special medicine every morning"], a: 1 },
                { q: "What modern military rule did Alexander initiate?", ["Wearing uniforms", "Strict dietary laws", "Shaving the face"], a: 2 },
                { q: "Who was Alexander's world-famous teacher?", ["Plato", "Aristotle", "Socrates"], a: 1 },
                { q: "At what location did his generals turn against him?", ["The River Nile", "The River Indus", "The Persian Desert"], a: 1 },
                { q: "Why did his generals decide to poison him?", ["They wanted more money", "They were tired and wanted to go home", "They wanted to join the Persian army"], a: 1 }
            ]
        },
        {
            title: "Yusuf Pasha",
            text: "In 1788, a large Austrian army of about 100,000 soldiers camped in Romania to fight the Ottoman commander Yusuf Pasha. However, they never fought the enemy. Because of a foolish mistake and alcohol, the army destroyed itself. The trouble began one night when Austrian horsemen crossed a river and bought strong drinks from local people. They drank too much. When foot soldiers arrived and asked to share the drink, the horsemen refused. A big fight started between them, and someone fired a gun. This loud shot made the soldiers panic and run back toward their main camp in the dark. In the camp, soldiers woke up to the noise. They believed the enemy was attacking. Commanders shouted 'Halt!'‚Äîwhich means stop in German‚Äîto control their men. However, soldiers who spoke different languages heard 'Allah!' instead of 'Halt!' They were very afraid and fired guns and cannons at their own friends. Two days later, Yusuf Pasha arrived for a battle. Instead, he found dead and wounded Austrian soldiers everywhere. The survivors had escaped, so the Ottomans took the town easily. They won the victory because of the Austrian army's total confusion.",
            mcq: [
                { q: "What was the size of the Austrian army in 1788?", ["50,000", "100,000", "200,000"], a: 1 },
                { q: "What sparked the initial internal conflict?", ["A stolen map", "Alcohol bought from locals", "A disagreement over horses"], a: 1 },
                { q: "Why did the soldiers in the camp fire at their own friends?", ["They were ordered to by Yusuf Pasha", "They mistook the word 'Halt' for 'Allah'", "They were trying to steal more drinks"], a: 1 },
                { q: "What did Yusuf Pasha find when he arrived two days later?", ["A fully prepared army", "Dead and wounded Austrians", "A peaceful village"], a: 1 },
                { q: "In what country was the Austrian army camping?", ["Germany", "Turkey", "Romania"], a: 2 }
            ]
        }
        // ... I will continue populating all 31 history figures following this 5-question MCQ format ...
    ];

    let currentMode = 'listen'; let isSlowMode = false; let repoFiles = [];
    const player = document.getElementById('player'); const list = document.getElementById('list');

    async function fetchFiles() {
        try {
            const res = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            const data = await res.json();
            repoFiles = data.map(f => f.name);
            renderList();
        } catch (e) { renderList(); }
    }
    fetchFiles();

    function startApp() { document.getElementById('splash-screen').style.display = 'none'; }

    function renderList() {
        list.innerHTML = db.map((item, i) => {
            if (currentMode === 'listen') {
                return `<div class="card"><div class="card-title">${item.title}</div>
                <button class="listen-btn btn-uk" onclick="playHP(${i},'uk')">üá¨üáß 1. UK English</button>
                <button class="listen-btn btn-us-f" onclick="playHP(${i},'female')">üá∫üá∏ 2. US Female</button>
                <button class="listen-btn btn-us-m" onclick="openRead(${i})">üìñ 3. Read & Listen (US Male)</button></div>`;
            } else {
                return `<button class="quiz-menu-btn" onclick="openQuiz(${i})">üß† ${item.title} MCQ Quiz</button>`;
            }
        }).join('');
    }

    function playHP(idx, type) {
        const item = db[idx];
        const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
        let key = item.title.toLowerCase();
        let file = "";
        if (type === 'uk') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('uk'));
        else if (type === 'female') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('female'));
        else if (type === 'male') {
            file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('male') && !f.toLowerCase().includes('female'));
        }
        if (file) { player.src = BASE + encodeURIComponent(file); player.playbackRate = isSlowMode ? 0.8 : 1.0; player.play(); }
    }

    function openRead(i) {
        document.getElementById('story-text').innerText = db[i].text;
        document.getElementById('view-listen').style.display = 'block';
        document.getElementById('view-quiz').style.display = 'none';
        document.getElementById('modal').style.display = 'block';
        playHP(i, 'male');
    }

    function openQuiz(i) {
        document.getElementById('quiz-title').innerText = db[i].title + " Quiz";
        document.getElementById('quiz-area').innerHTML = db[i].mcq.map((q, qIdx) => `
            <div class="quiz-q"><div class="q-text">Q${qIdx+1}: ${q.q}</div>
            ${q.options.map((opt, oIdx) => `<button class="mcq-option" onclick="checkMCQ(this, ${q.a}, ${oIdx})">${opt}</button>`).join('')}
            <div class="feedback"></div></div>`).join('');
        document.getElementById('view-listen').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('modal').style.display = 'block';
    }

    function checkMCQ(btn, correctIdx, userIdx) {
        const parent = btn.parentElement;
        const fb = parent.querySelector('.feedback');
        fb.innerHTML = (correctIdx === userIdx) ? "<span class='correct'>‚úì CORRECT!</span>" : "<span class='wrong'>‚úó WRONG!</span>";
        parent.querySelectorAll('.mcq-option').forEach(b => b.disabled = true);
    }

    function setMode(m) { currentMode = m; 
        document.getElementById('btn-listen').className = (m==='listen')?'toggle-btn active':'toggle-btn';
        document.getElementById('btn-quiz').className = (m==='quiz')?'toggle-btn active':'toggle-btn';
        renderList(); 
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
    function toggleSnail() { isSlowMode = !isSlowMode; player.playbackRate = isSlowMode ? 0.8 : 1.0; document.getElementById('btn-snail').classList.toggle('active'); }
</script>
</body>
</html>
