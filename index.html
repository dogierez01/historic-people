<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Historic People - Complete</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* SPLASH SCREEN - NEON RED RING */
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 10001; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: opacity 0.5s ease; }
        .neon-ring { width: 350px; height: 350px; border-radius: 50%; border: 10px solid #ff0000; box-shadow: 0 0 40px #ff0000; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; margin-bottom: 40px; overflow: hidden; background: #1a1a1a; }
        .logo-img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes pulse { 0% { box-shadow: 0 0 20px #ff0000; } 50% { box-shadow: 0 0 60px #ff0000; } 100% { box-shadow: 0 0 20px #ff0000; } }
        #start-btn { padding: 20px 80px; font-size: 26px; font-weight: 900; color: white; background: linear-gradient(135deg, #d63031, #ff0000); border: none; border-radius: 60px; cursor: pointer; text-transform: uppercase; }

        /* HEADER AREA */
        #header-area { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 2px solid #333; z-index: 100; padding: 15px 0; text-align: center; }
        #app-title { font-size: 22px; font-weight: 900; color: #fff; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .toggle-btn { padding: 12px 35px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: #888; background: #222; margin: 0 10px; transition: all 0.2s; font-size: 16px; }
        .toggle-btn.active { color: #fff; background: #007AFF; }
        
        #audio-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px; }
        #player { height: 45px; width: 75%; outline: none; }
        #btn-snail { background: #111; color: white; border: 2px solid #ff0033; font-size: 28px; padding: 5px 20px; border-radius: 12px; cursor: pointer; }
        #btn-snail.active { background: #0a1f0a; border-color: #39ff14; box-shadow: 0 0 10px #39ff14; }

        /* CONTENT AREA */
        #content-area { padding: 20px; padding-top: 220px; max-width: 700px; margin: 0 auto; }
        .search-bar { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: 1px solid #333; background: #1e1e1e; color: white; margin-bottom: 20px; box-sizing: border-box; }
        .card { background: #1e1e1e; padding: 25px; margin-bottom: 20px; border-radius: 15px; border: 1px solid #333; }
        .card-title { font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 20px; text-transform: capitalize; text-align: center; border-bottom: 1px solid #444; padding-bottom: 12px; }
        .listen-btn { padding: 18px; border-radius: 12px; border: none; cursor: pointer; font-weight: 900; font-size: 18px; color: white; display: block; width: 100%; margin-bottom: 12px; text-align: center; }
        .btn-uk { background: #d63031; } .btn-us-f { background: #e056fd; } .btn-us-m { background: #007AFF; }

        /* MODAL OVERLAY - 32PX FONT */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 3000; overflow-y: auto; }
        #modal-content { padding: 50px; max-width: 900px; margin: 0 auto; padding-top: 100px; }
        #close-btn { position: fixed; top: 30px; right: 30px; font-size: 35px; cursor: pointer; color: white; z-index: 3100; background: #ff0033; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; }
        #story-text { font-size: 32px; line-height: 1.6; color: #f0f0f0; text-align: justify; font-weight: 500; }

        /* MCQ STYLES */
        .quiz-q { background: #121212; padding: 30px; border-radius: 15px; margin-bottom: 30px; border-left: 10px solid #e056fd; }
        .q-text { font-size: 26px; font-weight: bold; color: #fff; margin-bottom: 25px; line-height: 1.3; }
        .mcq-option { width: 100%; padding: 20px; background: #1e1e1e; border: 2px solid #333; color: #fff; border-radius: 12px; font-size: 22px; font-weight: bold; text-align: left; margin-bottom: 15px; cursor: pointer; transition: 0.2s; }
        .feedback { font-weight: bold; display: block; margin-top: 20px; font-size: 28px; text-align: center; }
        .correct { color: #39ff14; } .wrong { color: #ff0033; }
        .quiz-menu-btn { width: 100%; padding: 20px; background: #1e1e1e; border: 1px solid #333; color: white; font-weight: bold; border-radius: 12px; margin-bottom: 15px; cursor: pointer; text-align: left; font-size: 22px; text-transform: capitalize; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="neon-ring">
        <img src="logo.png" class="logo-img" onerror="this.src='https://raw.githubusercontent.com/dogierez01/historic-people/main/logo.png'">
    </div>
    <button onclick="startApp()" id="start-btn">START üèõÔ∏è</button>
</div>

<div id="header-area">
    <div id="app-title">üèõÔ∏è HISTORIC PEOPLE</div>
    <div class="toggle-container">
        <button id="btn-listen" class="toggle-btn active" onclick="setMode('listen')">üéß Listen</button>
        <button id="btn-quiz" class="toggle-btn" onclick="setMode('quiz')">üß† Quiz</button>
    </div>
    <div id="audio-bar">
        <audio id="player" controls controlsList="nodownload"></audio>
        <button id="btn-snail" onclick="toggleSnail()">üêå</button>
    </div>
</div>

<div id="content-area">
    <input type="text" id="search" class="search-bar" placeholder="Search a history figure..." onkeyup="filterList()">
    <div id="list"></div>
</div>

<div id="modal">
    <button id="close-btn" onclick="closeModal()">‚úï</button>
    <div id="modal-content">
        <div id="view-listen"><div id="story-text"></div></div>
        <div id="view-quiz" style="display:none;">
            <h2 id="quiz-title" style="text-align:center; font-size: 36px; margin-bottom: 30px;"></h2>
            <div id="quiz-area"></div>
        </div>
    </div>
</div>

<script>
    const db = [
        {
            title: "Alexander the Great",
            text: "Alexander was born in 356 BC in Pella, the capital of Macedon. His mother, Olympia, was a strong and mysterious woman. She prayed to snakes and kept many of them in the palace. Alexander grew up with these snakes. Poisonous snakes bit him, so his body became strong against poison. His father, King Philip II, was a very strict ruler. One night, he punished Alexander very badly. This difficult event helped make Alexander a fearless and strong man. Even as a young man, Alexander was special. He did not have a beard. He ordered all his soldiers to shave their faces, too. This rule for soldiers is still used today. He was a student of the famous teacher Aristotle. He learned about war and how to lead an army. He became a commander when he was still a teenager. Alexander wanted to conquer the whole world. He took control of many huge lands like Persia and Egypt. He even traveled as far as India. His army grew bigger and stronger. However, great power brought danger. When he was at the River Indus, his own generals turned against him. They poisoned him because they were tired of fighting. They wanted to stop and return to their homes and families.",
            mcq: [
                { q: "Why was Alexander's body resilient against poison?", options: ["Intense military training", "Growing up with poisonous snakes", "Eating a specialized diet"], a: 1 },
                { q: "What military tradition did Alexander establish?", options: ["Standardized uniforms", "The requirement to shave", "Nighttime marching"], a: 1 },
                { q: "Who was Alexander's world-renowned tutor?", options: ["Socrates", "Plato", "Aristotle"], a: 2 },
                { q: "Where did Alexander's generals conspire against him?", options: ["The River Indus", "The Persian Capital", "The City of Pella"], a: 0 },
                { q: "What was the primary reason his generals poisoned him?", options: ["They wanted to be kings", "They were exhausted from fighting", "They were paid by the Persians"], a: 1 }
            ]
        },
        {
            title: "Baltacƒ± Mehmet Pasha",
            text: "Baltacƒ± Mehmet Pasha was an Ottoman grand vizier in the early 18th century. He is best known for his role in the Prut War between the Ottoman Empire and Russia in 1711. At that time, Russia was growing stronger under Tsar Peter the Great. The Ottomans, with the help of the Crimean Tatars, marched to stop them. Baltacƒ± Mehmet Pasha led the Ottoman army to the Prut River, where they surrounded the Russian forces. The Russians were trapped, hungry, and weak. It seemed that the Ottomans were ready for a great victory. Although the army had the chance to destroy the Russians, Baltacƒ± Mehmet Pasha accepted peace. With the Treaty of Prut, Russia gave back the city of Azov and promised to stay away from Ottoman lands. Peter the Great and his army were allowed to leave safely. Some people praised Baltacƒ± Mehmet Pasha for avoiding more bloodshed. Others blamed him for not using the chance to defeat Russia completely. After this, his career lost strength, but the Treaty of Prut remained an important event in Ottoman history.",
            mcq: [
                { q: "What was the result of the Treaty of Prut?", options: ["Russia gained Azov", "Russia returned Azov", "The war continued for years"], a: 1 },
                { q: "In what condition were the Russian forces at the Prut River?", options: ["Strong and ready", "Hungry and trapped", "Attacking from the sea"], a: 1 },
                { q: "Who was the Tsar of Russia during the Prut War?", options: ["Ivan the Terrible", "Nicholas II", "Peter the Great"], a: 2 },
                { q: "What did the Treaty of Prut require from Russia?", options: ["Staying away from Ottoman lands", "Paying a massive gold debt", "Surrendering Moscow"], a: 0 },
                { q: "How did the peace treaty affect Baltacƒ± Mehmet Pasha‚Äôs career?", options: ["He became Sultan", "His career lost strength", "He was executed immediately"], a: 1 }
            ]
        },
        {
            title: "Baybars",
            text: "Baybars was born in Central Asia around 1223. Enemies captured him and sold him as a slave. He traveled to Egypt to become a Mamluk. Baybars trained very hard with horses and weapons and quickly became an important commander. At this time, the Mongols were attacking the Middle East. In 1260, they tried to enter Egypt. Baybars met them at Ain Jalut. He used a clever plan: he led a small attack and then pretended to run away. The Mongols chased him into a valley where the rest of the Mamluk army was hiding. The trap worked, and they defeated the Mongol army. Baybars then became the Sultan of Egypt and Syria. He built bridges, canals, and a fast horse mail system. Today, he is remembered as a great protector of his people.",
            mcq: [
                { q: "What were Mamluks in medieval Egypt?", options: ["Priests", "Soldier-slaves", "Farming experts"], a: 1 },
                { q: "What tactic did Baybars use at Ain Jalut?", options: ["A wall of shields", "A pretend retreat", "A night-time ambush"], a: 1 },
                { q: "Which invading force did Baybars stop?", options: ["The Crusaders", "The Romans", "The Mongols"], a: 2 },
                { q: "What civilian system did Baybars improve?", options: ["Maritime trade", "Horse mail system", "Public schools"], a: 1 },
                { q: "Where was Baybars born?", options: ["Cairo", "Central Asia", "Damascus"], a: 1 }
            ]
        },
        {
            title: "Boudica",
            text: "Boudica was a warrior queen in Britain during the first century. At that time, the Roman Empire ruled parts of Britain. Roman rulers treated the Celtic people harshly. After Boudica's husband died, the Romans took his lands, beat Boudica, and attacked her daughters. Enraged, she gathered warriors from Celtic tribes and led them against Roman rule. They destroyed major cities like Londinium. However, in 61 AD, the Roman army defeated her forces, even though hers was much larger. Boudica's death remains a mystery; some say she died of illness, others say suicide to avoid capture.",
            mcq: [
                { q: "Which empire did Boudica fight against?", options: ["The Vikings", "The Romans", "The Greeks"], a: 1 },
                { q: "What triggered Boudica‚Äôs rebellion?", options: ["A dispute over taxes", "Roman mistreatment of her family", "A religious conflict"], a: 1 },
                { q: "Which major city did Boudica's forces destroy?", options: ["Paris", "Rome", "Londinium"], a: 2 },
                { q: "What happened at the final battle in 61 AD?", options: ["The Romans were defeated", "Boudica's army won easily", "The smaller Roman army defeated Boudica"], a: 2 },
                { q: "How is Boudica believed to have died?", options: ["Killed in battle", "Suicide or illness", "Escaped to Ireland"], a: 1 }
            ]
        },
        {
            title: "Cezzar Ahmed Pasha",
            text: "Cezzar Ahmed Pasha was the governor of Acre. He became famous in 1799 when Napoleon Bonaparte attacked Acre. Napoleon believed Acre would open the road for him to enter Anatolia. With modern cannons, he began a long siege. However, Cezzar Ahmed Pasha defended the city with courage. He was supported by British ships under Admiral Sidney Smith. For two months, Napoleon‚Äôs forces tried to break the walls, but failed. Napoleon abandoned the siege and returned to Egypt. Cezzar Ahmed Pasha became a hero of the Ottoman Empire, remembered as the man who stopped Napoleon.",
            mcq: [
                { q: "Who attacked the fortress of Acre in 1799?", options: ["Peter the Great", "Napoleon Bonaparte", "King Louis XIV"], a: 1 },
                { q: "Who provided naval support to the Ottomans during the siege?", options: ["The British", "The Russians", "The Venetians"], a: 0 },
                { q: "How long did the siege of Acre last before Napoleon retreated?", options: ["Two weeks", "Two months", "Two years"], a: 1 },
                { q: "Why did Napoleon want to capture Acre?", options: ["To reach India", "To enter Anatolia", "To build a new palace"], a: 1 },
                { q: "What was the result for Napoleon's reputation?", options: ["It was enhanced", "It was damaged", "It remained the same"], a: 1 }
            ]
        },
        {
            title: "El Cid",
            text: "Rodrigo Diaz de Vivar, known as 'El Cid,' was a skilled warrior from Spain. His nickname comes from Arabic, meaning 'respected.' He served several kings but was eventually exiled. Rodrigo fought to survive, often working with Muslim rulers. His respect for Muslim culture made him unique. In 1094, he took Valencia, where he allowed Muslim families to stay and even hired Muslim soldiers. He defended the city until his death in 1099. His life proves that alliances and respect for Muslim culture were key to his success.",
            mcq: [
                { q: "What does the nickname 'El Cid' mean?", options: ["The King", "The Respected", "The Sword"], a: 1 },
                { q: "Which city did El Cid capture in 1094?", options: ["Madrid", "Barcelona", "Valencia"], a: 2 },
                { q: "How was El Cid different from other Christian knights of his time?", options: ["He hated all other religions", "He respected Muslim culture and leaders", "He never used a horse in battle"], a: 1 },
                { q: "Why was Rodrigo sent into exile?", options: ["He lost a battle", "He was accused of treachery", "He retired from fighting"], a: 1 },
                { q: "Who did El Cid often work with during his exile?", options: ["Muslim rulers", "French monks", "Italian sailors"], a: 0 }
            ]
        },
        {
            title: "Fahrettin Pasha",
            text: "Fahrettin Pasha, the 'Desert Tiger,' defended Medina during WWI. He protected the holy city against the British-supported Arab revolt. Lawrence of Arabia cut Medina off by destroying the railway. Food became so scarce that soldiers ate locusts. Still, Fahrettin Pasha refused to surrender, sending holy relics to Istanbul for safety. He was finally forced to give up by his own officers after the war ended. He later joined the Turkish War of Independence and became an ambassador.",
            mcq: [
                { q: "What was Fahrettin Pasha's famous nickname?", options: ["The Iron Wall", "The Desert Tiger", "The Holy Guardian"], a: 1 },
                { q: "What did the soldiers eat to survive the siege of Medina?", options: ["Saltwater fish", "Locusts", "Wild desert fruits"], a: 1 },
                { q: "Who was the British figure involved in cutting off Medina?", options: ["General Townshend", "Lawrence of Arabia", "Admiral Smith"], a: 1 },
                { q: "What did Fahrettin Pasha send to Istanbul for safety?", options: ["His secret maps", "The Ottoman treasury", "Holy relics"], a: 2 },
                { q: "How did Fahrettin Pasha finally leave Medina?", options: ["He surrendered to the British", "His own officers forced him to give up", "He escaped in the night"], a: 1 }
            ]
        },
        {
            title: "Gavrilo Princip",
            text: "Gavrilo Princip was a young Serbian student who wanted freedom for Slavic peoples. In 1914, he assassinated Archduke Franz Ferdinand in Sarajevo. Princip saw the Archduke's car by accident after the driver made a wrong turn. Both the Archduke and his wife died. This event started WWI. Princip was arrested immediately, but because he was under 20, he couldn't get the death penalty. He died in prison in 1918.",
            mcq: [
                { q: "What was Gavrilo Princip's primary goal?", options: ["To become a king", "Freedom for Slavic peoples", "To start a global business"], a: 1 },
                { q: "Why did the driver stop the Archduke's car near Princip?", options: ["To buy a newspaper", "He made a wrong turn", "The car broke down"], a: 1 },
                { q: "Which major event was triggered by the assassination?", options: ["The French Revolution", "World War I", "The Industrial Revolution"], a: 1 },
                { q: "Why was Princip spared from the death penalty?", options: ["The Archduke's family forgave him", "He was under 20 years old", "He was found innocent"], a: 1 },
                { q: "In which city did the assassination take place?", options: ["Belgrade", "Sarajevo", "Vienna"], a: 1 }
            ]
        },
        {
            title: "Gazi Osman Pasha",
            text: "Gazi Osman Pasha defended Plevna in Bulgaria during the Russo-Turkish War (1877-1878). With a smaller army, he built strong trenches and resisted Russian and Romanian forces for five months. Even with low food and ammo, he refused to surrender. In December 1877, he attempted a final attack, was wounded, and captured. The Russians treated him with great respect. He returned to Istanbul as a hero with the title 'Gazi'.",
            mcq: [
                { q: "During which war did Gazi Osman Pasha become famous?", options: ["Crimean War", "Russo-Turkish War", "World War I"], a: 1 },
                { q: "Which town did he defend for five months?", options: ["Plevna", "Sofia", "Varna"], a: 0 },
                { q: "How did the Russians treat him after his capture?", options: ["With great cruelty", "With dignity and respect", "They ignored him"], a: 1 },
                { q: "What defensive structure was key to his success at Plevna?", options: ["High castle walls", "Strong trenches", "Underwater mines"], a: 1 },
                { q: "What title was given to him upon his return to Istanbul?", options: ["Sultan", "Admiral", "Gazi"], a: 2 }
            ]
        },
        {
            title: "Halil Pasha",
            text: "Halil Pasha commanded Ottoman forces during the Siege of Kut al-Amara in WWI. They surrounded a British army of 13,000 under General Townshend. After 147 days of hunger and disease, the British surrendered in April 1916. It was a huge victory for the Ottomans and one of the worst defeats for the British. Kut al-Amara became a symbol of Ottoman courage in the war.",
            mcq: [
                { q: "How many British/Indian soldiers were taken prisoner at Kut?", options: ["1,300", "13,000", "130,000"], a: 1 },
                { q: "Who was the British general who surrendered to Halil Pasha?", options: ["General Townshend", "General Kitchener", "General Savoy"], a: 0 },
                { q: "How many days did the siege of Kut al-Amara last?", options: ["47 days", "147 days", "247 days"], a: 1 },
                { q: "What were the primary 'enemies' inside the town for the British?", options: ["Ottoman spies", "Hunger and disease", "Cold weather"], a: 1 },
                { q: "Where is Kut al-Amara located today?", options: ["Turkey", "Iraq", "Egypt"], a: 1 }
            ]
        },
        {
            title: "Isabella and Ferdinand",
            text: "Isabella of Castile and Ferdinand of Aragon united Spain in 1469. They completed the Reconquista in 1492 by capturing Granada. They ordered Muslims and Jews to convert or leave. That same year, they supported Columbus's voyage, leading to Spain's overseas empire. They built a strong monarchy but are also remembered for the painful removal of non-Christians.",
            mcq: [
                { q: "Which kingdom was the last Muslim territory in Spain to fall in 1492?", options: ["Madrid", "Granada", "Seville"], a: 1 },
                { q: "What was the result of the decree issued to Muslims and Jews?", options: ["They were given free land", "They had to convert or leave", "They were made government officials"], a: 1 },
                { q: "Who did the monarchs support for an overseas voyage in 1492?", options: ["Marco Polo", "Vasco da Gama", "Christopher Columbus"], a: 2 },
                { q: "What was the historical name for the struggle to retake Spain?", options: ["The Crusades", "The Reconquista", "The Armada"], a: 1 },
                { q: "How did their marriage affect the kingdoms of Castile and Aragon?", options: ["They became enemies", "The kingdoms were united", "One was sold to France"], a: 1 }
            ]
        },
        {
            title: "Jacobi",
            text: "Jacobi was a Jewish physician from Genoa who studied herbs and poisons. Recruited by Venice and the Vatican, he went to the Ottoman palace as 'Yakup.' Mehmed II trusted him and made him head physician. In 1481, Mehmed fell ill and died after Yakup gave him medicine. Suspicion arose that he was still serving Venice. Jacobi's life ended in mystery; some say he was killed, others that he fled.",
            mcq: [
                { q: "What was Jacobi's profession in the Ottoman palace?", options: ["Head Architect", "Head Physician", "Financial Advisor"], a: 1 },
                { q: "What name did Jacobi use while serving the Sultan?", options: ["Yakup", "Joseph", "Ahmed"], a: 0 },
                { q: "Which Sultan died after receiving medicine from Jacobi?", options: ["Murad II", "Mehmed II", "Suleiman I"], a: 1 },
                { q: "Who was whispered to be Jacobi's secret master?", options: ["The King of Spain", "The British Navy", "Venice and the Vatican"], a: 2 },
                { q: "Where was Jacobi originally from?", options: ["Istanbul", "Near Genoa", "Cairo"], a: 1 }
            ]
        },
        {
            title: "Koca Sinan Pasha",
            text: "In 1595, Koca Sinan Pasha fought Michael the Brave in Wallachia. During a retreat, the army used a wooden bridge at Giurgiu. Heavy carts slowed the crossing. Sinan Pasha and the main army crossed, leaving the 'Akƒ±ncƒ±' riders to guard the rear. Michael the Brave fired cannons, destroying the bridge. Thousands of Akƒ±ncƒ± died, and the group never recovered. This event is called the 'Bridge Disaster.'",
            mcq: [
                { q: "Which famous riders were destroyed in the 'Bridge Disaster'?", options: ["Janissaries", "Akƒ±ncƒ±", "Mamluks"], a: 1 },
                { q: "What slowed down the army's retreat across the Danube?", options: ["Heavy rain", "Heavy carts of treasure", "Broken horses"], a: 1 },
                { q: "Who was the enemy leader who destroyed the bridge?", options: ["Prince Eugene", "Michael the Brave", "Tsar Peter"], a: 1 },
                { q: "Where was the bridge located?", options: ["Istanbul", "Giurgiu", "Vienna"], a: 1 },
                { q: "What was the ultimate result of this event for the Akƒ±ncƒ±?", options: ["They became stronger", "They never recovered", "They moved to Egypt"], a: 1 }
            ]
        },
        {
            title: "Mezamorta H√ºseyin Pasha",
            text: "Mezamorta H√ºseyin Pasha was an Ottoman admiral. His nickname means 'half-dead' because he survived a Venetian battle where enemies thought he was dead. In 1683, he defended Algiers against the French by firing the French consul from a cannon. He later modernized the navy, switching from rowing ships to large sailing ships (kalyons). He died of illness in 1701.",
            mcq: [
                { q: "What does the nickname 'Mezamorta' mean?", options: ["Great Admiral", "Half-dead", "Spanish King"], a: 1 },
                { q: "What radical action did he take to stop the French at Algiers?", options: ["Burned his own city", "Fired a consul from a cannon", "Switched sides"], a: 1 },
                { q: "What type of ships did he introduce to modernize the navy?", options: ["Rowing boats", "Small canoes", "Large sailing kalyons"], a: 2 },
                { q: "Against which power did he win back Chios Island?", options: ["The French", "The Venetians", "The Russians"], a: 1 },
                { q: "What was his rank in the Ottoman navy?", options: ["Grand Vizier", "Kapudan Pasha", "Soldier"], a: 1 }
            ]
        },
        {
            title: "Mir Ali Beg",
            text: "In the 1500s, Mir Ali Beg tried to liberate East African cities like Mombasa from Portuguese rule. He built a castle and captured ships. In 1589, the Portuguese attacked from the sea while the cannibalistic Zimba tribe attacked from land. Ottoman soldiers were caught and eaten. Mir Ali Beg was captured and spent the rest of his life in Portugal, ending Ottoman influence in the region.",
            mcq: [
                { q: "In which region did Mir Ali Beg fight the Portuguese?", options: ["North Africa", "East Africa", "India"], a: 1 },
                { q: "What terrifying group attacked the Ottomans from the land?", options: ["The Zimba tribe", "Roman legionnaires", "Vikings"], a: 0 },
                { q: "What was unique about the Zimba warriors?", options: ["They used guns", "They were cannibals", "They were sailors"], a: 1 },
                { q: "What happened to Mir Ali Beg after the battle?", options: ["He was executed", "He became a Portuguese prisoner", "He escaped to Istanbul"], a: 1 },
                { q: "What was the outcome for Ottoman control in East Africa?", options: ["It expanded", "It ended completely", "It remained stable"], a: 1 }
            ]
        },
        {
            title: "Mustafa the Second",
            text: "Sultan Mustafa II attacked Austria in 1695. Prince Eugene of Savoy used spies to find his location at the Tisa River. Greedy Ottoman Pashas delayed the army by demanding money from soldiers at the bridge. Prince Eugene attacked, the bridge broke, and 30,000 Ottomans died. Mustafa II watched helplessly. This led to the Treaty of Karlowitz and massive land loss.",
            mcq: [
                { q: "Who was the Austrian general who defeated Mustafa II?", options: ["General Townshend", "Prince Eugene of Savoy", "Sidney Smith"], a: 1 },
                { q: "What caused the fatal delay at the Tisa River bridge?", options: ["Broken wheels", "Pashas demanding money", "Heavy snow"], a: 1 },
                { q: "How many Ottoman men were lost in the disaster?", options: ["3,000", "30,000", "300,000"], a: 1 },
                { q: "What was the name of the treaty signed after this defeat?", options: ["Treaty of Prut", "Treaty of Karlowitz", "Treaty of London"], a: 1 },
                { q: "What did the Sultan lose besides his army?", options: ["His official seal", "His crown", "His horse"], a: 0 }
            ]
        },
        {
            title: "Ragnar Lodbrok",
            text: "Ragnar Lodbrok was a 9th-century Viking leader. He got his name 'Lodbrok' by wearing special pants to protect himself from a snake. He famously attacked Paris in 845 and was paid in silver to leave. He died in a snake pit after being captured by King Aella of Northumbria. His sons later returned to England to avenge him by killing the King.",
            mcq: [
                { q: "What does the name 'Lodbrok' refer to?", options: ["Strong Shield", "Hairy Breeches/Pants", "Fast Runner"], a: 1 },
                { q: "How did the French King get Ragnar to leave Paris?", options: ["He defeated him", "He paid him in silver", "He gave him a castle"], a: 1 },
                { q: "How did Ragnar die?", options: ["In a shipwreck", "In a snake pit", "Of old age"], a: 1 },
                { q: "Who were Ragnar's famous sons?", options: ["Ivar, Bjorn, Halfdan", "Peter, Paul, John", "Alexander, Philip, Karl"], a: 0 },
                { q: "Who was the English King Ragnar's sons killed for revenge?", options: ["Edward I", "King Aella", "General Smith"], a: 1 }
            ]
        },
        {
            title: "Rob Roy",
            text: "Rob Roy MacGregor was a Scottish hero. He was a cattle farmer who became an outlaw after a noble took his land. Known as the 'Scottish Robin Hood,' he stole from the rich and gave to the poor. He hid in the Highlands for years, avoiding the English police who offered rewards for his capture.",
            mcq: [
                { q: "What was Rob Roy's original profession?", options: ["Soldier", "Cattle farmer", "Sailor"], a: 1 },
                { q: "What was his famous nickname?", options: ["The Iron Scot", "The Scottish Robin Hood", "The Highland King"], a: 1 },
                { q: "Why did he become an outlaw?", options: ["He hated the King", "A noble took his land", "He wanted to travel"], a: 1 },
                { q: "In which region of Scotland did he hide?", options: ["The Lowlands", "The Highlands", "Edinburgh"], a: 1 },
                { q: "Who offered rewards for his capture?", options: ["The French", "The English government", "The Vikings"], a: 1 }
            ]
        },
        {
            title: "Salahuddin Ayyubi",
            text: "Salahuddin Ayyubi (Saladin) was born in 1137. He united Muslim lands to defend against the Crusaders. His greatest victory was the Battle of Hattin in 1187, after which he captured Jerusalem. He was famously fair, allowing Christians and Jews to stay or leave safely. He died in 1193, remembered as a hero who showed respect to everyone.",
            mcq: [
                { q: "In which battle did Saladin defeat the Crusaders in 1187?", options: ["Ain Jalut", "Hattin", "Guadalete"], a: 1 },
                { q: "Which holy city did Saladin capture?", options: ["Rome", "Jerusalem", "Constantinople"], a: 1 },
                { q: "How did Saladin treat non-Muslims in Jerusalem?", options: ["He executed them", "He let them stay in peace", "He made them slaves"], a: 1 },
                { q: "Where was Saladin born?", options: ["Cairo", "Tikrit", "Baghdad"], a: 1 },
                { q: "What was his primary goal?", options: ["To conquer Europe", "To unite Muslim lands", "To find gold"], a: 1 }
            ]
        },
        {
            title: "Skanderbeg",
            text: "Skanderbeg (Gjergj Kastrioti) is Albania's national hero. Taken as a hostage and trained by Ottomans, he revolted in 1443. He used his knowledge of Ottoman tactics to protect Albania for 20 years. The Pope called him the 'Athlete of Christ.' He died in 1468, and his double-headed eagle flag remains the symbol of Albania.",
            mcq: [
                { q: "Where was Skanderbeg trained as a soldier?", options: ["Rome", "The Ottoman Empire", "Venice"], a: 1 },
                { q: "What is the symbol on the flag he raised?", options: ["A lion", "A double-headed eagle", "A crescent moon"], a: 1 },
                { q: "How long did he resist the Ottomans in Albania?", options: ["2 years", "20 years", "50 years"], a: 1 },
                { q: "What title did the Pope give him?", options: ["The Saint of War", "Athlete of Christ", "King of Albania"], a: 1 },
                { q: "What was his real name?", options: ["Fahrettin", "Gjergj Kastrioti", "Mehmed"], a: 1 }
            ]
        },
        {
            title: "Spartacus",
            text: "Spartacus was a Thracian gladiator who led a slave revolt against Rome in 73 BC. He escaped gladiator school with 70 others using kitchen knives. He built a massive army and defeated several Roman forces. He was finally defeated by General Crassus in 71 BC. 6,000 rebels were crucified along the Appian Way as a warning.",
            mcq: [
                { q: "What was Spartacus's original role in Rome?", options: ["Senator", "Gladiator", "Farmer"], a: 1 },
                { q: "What 'weapons' did they use to escape the school?", options: ["Swords", "Kitchen knives", "Bow and arrows"], a: 1 },
                { q: "Where did the escaped slaves first gather?", options: ["The Colosseum", "Mount Vesuvius", "Sicily"], a: 1 },
                { q: "Who was the Roman general who finally defeated him?", options: ["Julius Caesar", "Crassus", "Sidney Smith"], a: 1 },
                { q: "What was the punishment for the captured 6,000 rebels?", options: ["Crucifixion", "Sent to the mines", "Banished from Rome"], a: 0 }
            ]
        },
        {
            title: "Stefan Du≈°an",
            text: "King Stefan Du≈°an built a Serbian Empire in the 14th century. He expanded into Macedonia and Greece. He tried to unite Christian nations against the rising Ottoman threat. He aimed to capture Constantinople but died suddenly in 1355. Without his leadership, the empire collapsed, leading to the Battle of Maritsa and Ottoman control.",
            mcq: [
                { q: "What was Stefan Du≈°an's main military goal?", options: ["To take Rome", "To capture Constantinople", "To sail to America"], a: 1 },
                { q: "Which empire did he see as the greatest threat?", options: ["The Ottoman Turks", "The British", "The Mongols"], a: 0 },
                { q: "What happened to his empire after his sudden death?", options: ["It grew larger", "It weakened and divided", "It moved to Greece"], a: 1 },
                { q: "Which battle occurred 34 years after his death?", options: ["Ain Jalut", "Maritsa", "Ankara"], a: 1 },
                { q: "Which nations did he try to form an alliance with?", options: ["The Pope and Venice", "Persia and Egypt", "Vikings"], a: 0 }
            ]
        },
        {
            title: "Taras Bulba",
            text: "Taras Bulba was a Cossack warrior who fought Polish rule in Ukraine. Polish rulers mistreated Cossacks and their religion. Taras killed his own son, Andriy, for betraying the Cossacks for a Polish woman. His older son, Ostap, was killed by the Polish in Warsaw. Taras was eventually caught and killed, remembered today as a hero of tradition.",
            mcq: [
                { q: "Against which country did Taras Bulba fight?", options: ["Russia", "Poland", "Germany"], a: 1 },
                { q: "Why did Taras kill his younger son, Andriy?", options: ["Andriy stole gold", "Andriy joined the enemy", "Andriy was a coward"], a: 1 },
                { q: "What famous line did Taras say to Andriy?", options: ["I give you my sword", "I gave you life, and I will take it away", "Go and be free"], a: 1 },
                { q: "Where was his older son Ostap killed?", options: ["Kyiv", "Warsaw", "Moscow"], a: 1 },
                { q: "To which group of warriors did Taras belong?", options: ["Vikings", "Cossacks", "Mamluks"], a: 1 }
            ]
        },
        {
            title: "Tariq ibn Ziyad",
            text: "In 711 AD, Tariq ibn Ziyad led 7,000 soldiers from North Africa to Spain. He landed at Gibraltar (Jabal Tariq). He famously burned his boats and told his men the sea was behind them and the enemy before them. He defeated King Roderick at Guadalete, beginning 800 years of Muslim rule in Spain.",
            mcq: [
                { q: "What modern landmark is named after Tariq ibn Ziyad?", options: ["The Eiffel Tower", "Gibraltar", "The Pyramids"], a: 1 },
                { q: "What radical order did Tariq give upon landing?", options: ["Build a castle", "Burn the boats", "Hide in the mountains"], a: 1 },
                { q: "Which King did he defeat at the Battle of Guadalete?", options: ["King Philip", "King Roderick", "King Aella"], a: 1 },
                { q: "How many soldiers did he initially lead across the water?", options: ["700", "7,000", "70,000"], a: 1 },
                { q: "How long did Muslim rule last in Spain following his victory?", options: ["80 years", "800 years", "8,000 years"], a: 1 }
            ]
        },
        {
            title: "Timur (Tamerlane)",
            text: "Timur was a Central Asian conqueror born in 1336. He defeated Ottoman Sultan Bayezid at the Battle of Ankara in 1402 by convincing Ottoman soldiers to switch sides. Bayezid died as his prisoner. Timur was known for his strength and cruelty. He died in 1405 while planning to invade China.",
            mcq: [
                { q: "Which Sultan did Timur capture in 1402?", options: ["Mustafa II", "Bayezid", "Mehmed II"], a: 1 },
                { q: "What was the turning point in the Battle of Ankara?", options: ["A rainstorm", "Ottoman soldiers switching sides", "A new type of cannon"], a: 1 },
                { q: "Which country was Timur planning to invade when he died?", options: ["India", "Egypt", "China"], a: 2 },
                { q: "Along which trade route did Timur want to control all lands?", options: ["The Spice Route", "The Silk Road", "The King's Highway"], a: 1 },
                { q: "What happened to Sultan Bayezid after the battle?", options: ["He was set free", "He died as Timur's prisoner", "He escaped to Italy"], a: 1 }
            ]
        },
        {
            title: "Tomyris",
            text: "Tomyris, Queen of the Massagetae, refused to marry Cyrus the Great of Persia. Cyrus tricked her son into drinking wine; he was captured and committed suicide. Tomyris gained revenge in 530 BC by defeating the Persian army. She cut off Cyrus's head and put it in a bag of blood, defending her kingdom.",
            mcq: [
                { q: "Which Persian King did Tomyris defeat?", options: ["Xerxes", "Darius", "Cyrus the Great"], a: 2 },
                { q: "What did Cyrus use to trick Tomyris's soldiers?", options: ["Gold", "Wine and food", "Secret maps"], a: 1 },
                { q: "How did Tomyris's son die?", options: ["In battle", "Suicide in captivity", "Old age"], a: 1 },
                { q: "What did Tomyris do with Cyrus's head?", options: ["Sent it to Rome", "Put it in a bag of blood", "Buried it with honor"], a: 1 },
                { q: "In what year did the final battle take place?", options: ["356 BC", "530 BC", "1223 AD"], a: 1 }
            ]
        },
        {
            title: "Turgut Reis",
            text: "Turgut Reis was a sailor who rose to become an Ottoman admiral. He was once a prisoner of the Genoese for three years. He famously escaped a Spanish siege by moving his ships overland at Djerba. He became Governor of Tripoli and died at the Siege of Malta in 1565. His tomb is in Tripoli.",
            mcq: [
                { q: "How did Turgut Reis escape the Spanish siege at Djerba?", options: ["By swimming", "Transporting ships overland", "Using a submarine"], a: 1 },
                { q: "Which European power held him prisoner for three years?", options: ["The Genoese", "The British", "The French"], a: 0 },
                { q: "At which famous siege did Turgut Reis die in 1565?", options: ["Siege of Vienna", "Siege of Malta", "Siege of Acre"], a: 1 },
                { q: "Where is his tomb located today?", options: ["Istanbul", "Tripoli", "Malta"], a: 1 },
                { q: "With which famous Admiral did he join forces in Algeria?", options: ["Mezamorta", "Barbarossa Hayreddin", "Yusuf Pasha"], a: 1 }
            ]
        },
        {
            title: "Vlad III (Dracula)",
            text: "Vlad III, 'The Impaler,' was a prince of Wallachia. Raised as a hostage in the Ottoman palace, he grew to hate them, while his brother Radu became their ally. As ruler, he used brutal night attacks and scorched earth tactics against the Ottomans. He was eventually defeated, and his head was sent to Sultan Mehmed II in 1476.",
            mcq: [
                { q: "What does the name 'Dracula' mean?", options: ["Impaler", "Son of the Dragon", "King of the Dark"], a: 1 },
                { q: "Where was Vlad raised alongside the Sultan's son?", options: ["Rome", "The Ottoman Palace", "Paris"], a: 1 },
                { q: "What was Vlad‚Äôs brother‚Äôs name?", options: ["Radu", "Mustafa", "Stefan"], a: 0 },
                { q: "Which tactic did Vlad use against the Ottoman army?", options: ["Burning food and villages", "Building huge walls", "Bribing the generals"], a: 0 },
                { q: "To whom was Vlad's head sent after his death?", options: ["King Philip", "Sultan Mehmed II", "The Pope"], a: 1 }
            ]
        },
        {
            title: "William Tell",
            text: "William Tell was a Swiss hero who refused to bow to Gessler's hat. Gessler forced him to shoot an apple off his son's head. Tell succeeded but admitted his second arrow was meant for Gessler. He escaped a boat during a storm and later killed Gessler, inspiring the Swiss rebellion and independence.",
            mcq: [
                { q: "What was William Tell forced to shoot?", options: ["A bird", "An apple on his son's head", "A target on a wall"], a: 1 },
                { q: "Who was the second arrow for?", options: ["His son", "The ruler Gessler", "The King of Austria"], a: 1 },
                { q: "How did Tell escape from the boat?", options: ["He swam 10 miles", "He was freed to steer in a storm", "He bribed the guards"], a: 1 },
                { q: "What did the Austrian ruler place in the square for people to bow to?", options: ["His sword", "His hat", "His horse"], a: 1 },
                { q: "Which nation's independence was inspired by Tell?", options: ["Scotland", "Switzerland", "Albania"], a: 1 }
            ]
        },
        {
            title: "William Wallace",
            text: "William Wallace was a Scottish fighter who rebelled against Edward I after English soldiers killed his wife. He won at Stirling Bridge in 1297 but lost at Falkirk in 1298. He was captured in 1305, tried in London, and executed. He remains a national hero of Scotland.",
            mcq: [
                { q: "Which English King did Wallace fight against?", options: ["Henry VIII", "Edward I", "Richard III"], a: 1 },
                { q: "What was Wallace's greatest victory?", options: ["Battle of Falkirk", "Battle of Stirling Bridge", "Battle of London"], a: 1 },
                { q: "What triggered Wallace's rebellion?", options: ["Stolen gold", "English soldiers killing his wife", "A disagreement over land"], a: 1 },
                { q: "Where was Wallace taken for trial and execution?", options: ["Edinburgh", "London", "Paris"], a: 1 },
                { q: "Who became the leader of Scotland after Wallace?", options: ["Robert the Bruce", "Rob Roy", "Prince Eugene"], a: 0 }
            ]
        },
        {
            title: "Yusuf Pasha",
            text: "In 1788, the Austrian army of 100,000 destroyed itself due to confusion over alcohol. Soldiers mistook the word 'Halt!' for 'Allah!' and began firing on their own friends. Yusuf Pasha arrived two days later to find dead and wounded Austrians, taking the town without a fight. Confusion won the victory.",
            mcq: [
                { q: "Why did the Austrian army destroy itself?", options: ["A plague", "Confusion and alcohol", "A volcanic eruption"], a: 1 },
                { q: "What word was mistaken for 'Allah'?", options: ["Halt", "Attack", "Run"], a: 0 },
                { q: "How many soldiers were in the Austrian army?", options: ["1,000", "100,000", "500,000"], a: 1 },
                { q: "In which country did this event occur?", options: ["Turkey", "Romania", "Germany"], a: 1 },
                { q: "How much did Yusuf Pasha have to fight for the town?", options: ["A long siege", "A one-day battle", "Not at all"], a: 2 }
            ]
        }
    ];

    let currentMode = 'listen'; let isSlowMode = false; let repoFiles = [];
    const player = document.getElementById('player'); const list = document.getElementById('list');

    async function fetchFiles() {
        try {
            const res = await fetch("https://api.github.com/repos/dogierez01/historic-people/contents/");
            const data = await res.json();
            repoFiles = data.map(f => f.name);
            renderList();
        } catch (e) { renderList(); }
    }
    fetchFiles();

    function startApp() { document.getElementById('splash-screen').style.display = 'none'; }

    function renderList() {
        const sorted = [...db].sort((a, b) => a.title.localeCompare(b.title));
        list.innerHTML = sorted.map((item, i) => {
            const originalIndex = db.indexOf(item);
            if (currentMode === 'listen') {
                return `<div class="card" data-name="${item.title.toLowerCase()}">
                    <div class="card-title">${item.title}</div>
                    <button class="listen-btn btn-uk" onclick="playHP(${originalIndex},'uk')">üá¨üáß 1. UK English</button>
                    <button class="listen-btn btn-us-f" onclick="playHP(${originalIndex},'female')">üá∫üá∏ 2. US Female</button>
                    <button class="listen-btn btn-us-m" onclick="openRead(${originalIndex})">üìñ 3. Read & Listen (US Male)</button>
                </div>`;
            } else {
                return `<button class="quiz-menu-btn" data-name="${item.title.toLowerCase()}" onclick="openQuiz(${originalIndex})">üß† ${item.title} MCQ Quiz</button>`;
            }
        }).join('');
    }

    function playHP(idx, type) {
        const item = db[idx];
        const BASE = "https://raw.githubusercontent.com/dogierez01/historic-people/main/";
        let key = item.title.toLowerCase();
        let file = "";
        if (type === 'uk') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('uk'));
        else if (type === 'female') file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('female'));
        else if (type === 'male') {
            file = repoFiles.find(f => f.toLowerCase().includes(key) && f.toLowerCase().includes('us') && f.toLowerCase().includes('male') && !f.toLowerCase().includes('female'));
        }
        if (file) { player.src = BASE + encodeURIComponent(file); player.playbackRate = isSlowMode ? 0.8 : 1.0; player.play(); }
    }

    function openRead(i) {
        document.getElementById('story-text').innerText = db[i].text;
        document.getElementById('view-listen').style.display = 'block';
        document.getElementById('view-quiz').style.display = 'none';
        document.getElementById('modal').style.display = 'block';
        playHP(i, 'male');
    }

    function openQuiz(i) {
        document.getElementById('quiz-title').innerText = db[i].title + " Quiz";
        document.getElementById('quiz-area').innerHTML = db[i].mcq.map((q, qIdx) => `
            <div class="quiz-q"><div class="q-text">Q${qIdx+1}: ${q.q}</div>
            ${q.options.map((opt, oIdx) => `<button class="mcq-option" onclick="checkMCQ(this, ${q.a}, ${oIdx})">${opt}</button>`).join('')}
            <div class="feedback"></div></div>`).join('');
        document.getElementById('view-listen').style.display = 'none';
        document.getElementById('view-quiz').style.display = 'block';
        document.getElementById('modal').style.display = 'block';
    }

    function checkMCQ(btn, correctIdx, userIdx) {
        const parent = btn.parentElement;
        const fb = parent.querySelector('.feedback');
        if (correctIdx === userIdx) {
            fb.innerHTML = "<span class='correct'>‚úì CORRECT!</span>";
            btn.style.backgroundColor = "#2f9e44";
        } else {
            fb.innerHTML = "<span class='wrong'>‚úó WRONG!</span>";
            btn.style.backgroundColor = "#d63031";
        }
        parent.querySelectorAll('.mcq-option').forEach(b => b.disabled = true);
    }

    function setMode(m) { 
        currentMode = m; 
        document.getElementById('btn-listen').className = (m==='listen')?'toggle-btn active':'toggle-btn';
        document.getElementById('btn-quiz').className = (m==='quiz')?'toggle-btn active':'toggle-btn';
        renderList(); 
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; player.pause(); }
    function toggleSnail() { isSlowMode = !isSlowMode; player.playbackRate = isSlowMode ? 0.8 : 1.0; document.getElementById('btn-snail').classList.toggle('active'); }
    function filterList() {
        const val = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.card, .quiz-menu-btn').forEach(el => {
            el.style.display = el.getAttribute('data-name').includes(val) ? 'block' : 'none';
        });
    }
</script>
</body>
</html>
